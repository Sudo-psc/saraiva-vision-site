# Content Security Policy (CSP) Configuration for Saraiva Vision
# Modo: Report-Only (teste inicial)
# Após validação, remover -Report-Only do header

# CSP para aplicação principal
add_header Content-Security-Policy-Report-Only "
    default-src 'self';
    script-src 'self' 'unsafe-inline' 'unsafe-eval' 
        https://www.google.com 
        https://www.gstatic.com 
        https://www.googletagmanager.com
        https://cdn.pulse.is;
    style-src 'self' 'unsafe-inline';
    img-src 'self' data: https: blob:;
    font-src 'self' data:;
    connect-src 'self' 
        https://saraivavision.com.br
        https://www.google.com
        https://dns.google
        https://*.supabase.co
        wss://*.supabase.co;
    frame-src 'self' https://www.google.com;
    media-src 'self' https: blob:;
    object-src 'none';
    base-uri 'self';
    form-action 'self';
    frame-ancestors 'self';
    upgrade-insecure-requests;
" always;

# CSP Report URI (opcional - para monitoramento)
# add_header Content-Security-Policy-Report-Only "...; report-uri /api/csp-report;" always;
