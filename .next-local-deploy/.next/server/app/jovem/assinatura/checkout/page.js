(()=>{var a={};a.id=9647,a.ids=[9647],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15549:(a,b,c)=>{Promise.resolve().then(c.bind(c,73227))},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21435:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/saraiva-vision-site/app/jovem/assinatura/checkout/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/saraiva-vision-site/app/jovem/assinatura/checkout/page.tsx","default")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73227:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>A});var d,e=c(21124),f=c(38301),g=c(42378),h="clover",i="https://js.stripe.com",j="".concat(i,"/").concat(h,"/stripe.js"),k=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,l=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,m=function(){for(var a=document.querySelectorAll('script[src^="'.concat(i,'"]')),b=0;b<a.length;b++){var c,d=a[b];if(c=d.src,k.test(c)||l.test(c))return d}return null},n=function(a){var b=a&&!a.advancedFraudSignals?"?advancedFraudSignals=false":"",c=document.createElement("script");c.src="".concat(j).concat(b);var d=document.head||document.body;if(!d)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return d.appendChild(c),c},o=function(a,b){a&&a._registerWrapper&&a._registerWrapper({name:"stripe-js",version:"8.0.0",startTime:b})},p=null,q=null,r=null,s=function(a,b,c){if(null===a)return null;var d,e=b[0].match(/^pk_test/),f=3===(d=a.version)?"v3":d;e&&f!==h&&console.warn("Stripe.js@".concat(f," was loaded on the page, but @stripe/stripe-js@").concat("8.0.0"," expected Stripe.js@").concat(h,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=a.apply(void 0,b);return o(g,c),g},t=!1,u=function(){return d?d:d=(null!==p?p:(p=new Promise(function(a,b){if("undefined"==typeof window||"undefined"==typeof document)return void a(null);if(window.Stripe,window.Stripe)return void a(window.Stripe);try{var c,d=m();d?d&&null!==r&&null!==q&&(d.removeEventListener("load",r),d.removeEventListener("error",q),null==(c=d.parentNode)||c.removeChild(d),d=n(null)):d=n(null),r=function(){window.Stripe?a(window.Stripe):b(Error("Stripe.js not available"))},q=function(a){b(Error("Failed to load Stripe.js",{cause:a}))},d.addEventListener("load",r),d.addEventListener("error",q)}catch(a){b(a);return}})).catch(function(a){return p=null,Promise.reject(a)})).catch(function(a){return d=null,Promise.reject(a)})};Promise.resolve().then(function(){return u()}).catch(function(a){t||console.warn(a)});let v={basic:{id:"basic",name:"Basic",description:"1 par de lentes por m\xeas",price:4900,priceFormatted:"R$ 49",features:["1 par de lentes de contato por m\xeas","Lentes de prescri\xe7\xe3o b\xe1sica","Suporte online","Cancelamento a qualquer momento"]},pro:{id:"pro",name:"Pro",description:"2 pares + experimenta\xe7\xe3o virtual",price:7900,priceFormatted:"R$ 79",recommended:!0,features:["2 pares de lentes por m\xeas (principal + reserva)","Lentes premium","Experimenta\xe7\xe3o virtual","Suporte priorit\xe1rio","Descontos em arma\xe7\xf5es"]},premium:{id:"premium",name:"Premium",description:"Lentes ilimitadas + consultas",price:9900,priceFormatted:"R$ 99",features:["Substitui\xe7\xf5es ilimitadas de lentes","Arma\xe7\xf5es de grife inclu\xeddas","Consultas presenciais","Acesso a recursos exclusivos do app","Concierge oftalmol\xf3gico"]}},w=`
AVISO M\xc9DICO IMPORTANTE:

Este servi\xe7o de assinatura de lentes \xe9 complementar ao acompanhamento oftalmol\xf3gico regular.
A assinatura N\xc3O substitui consultas m\xe9dicas peri\xf3dicas com oftalmologista.

Recomendamos consultas oftalmol\xf3gicas pelo menos uma vez ao ano, ou conforme orienta\xe7\xe3o m\xe9dica.

Em caso de desconforto, vermelhid\xe3o, dor ou altera\xe7\xf5es visuais, suspenda o uso das lentes
e consulte imediatamente um oftalmologista.

As lentes fornecidas s\xe3o baseadas na sua prescri\xe7\xe3o mais recente. \xc9 sua responsabilidade
manter sua prescri\xe7\xe3o atualizada atrav\xe9s de consultas regulares.

Ao prosseguir, voc\xea reconhece ter lido e compreendido este aviso m\xe9dico.
`,x=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];t=!0;var d=Date.now();return u().then(function(a){return s(a,b,d)})}(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY||"");function y({planId:a,onSuccess:b,onCancel:c}){let[d,g]=(0,f.useState)(!1),[h,i]=(0,f.useState)(null),[j,k]=(0,f.useState)(!1),[l,m]=(0,f.useState)({name:"",email:"",consentTerms:!1,consentPrivacy:!1,consentMarketing:!1,medicalDisclaimer:!1}),n=async c=>{c.preventDefault(),i(null),g(!0);try{if(!l.name||!l.email)throw Error("Nome e email s\xe3o obrigat\xf3rios");if(!l.consentTerms||!l.consentPrivacy)throw Error("Voc\xea deve aceitar os termos e a pol\xedtica de privacidade");if(!l.medicalDisclaimer)throw Error("Voc\xea deve ler e aceitar o aviso m\xe9dico");let c="pm_"+Math.random().toString(36).substring(7),d=await fetch("/api/subscription/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:a,email:l.email,name:l.name,paymentMethodId:c,consentTerms:l.consentTerms,consentPrivacy:l.consentPrivacy,consentMarketing:l.consentMarketing})}),e=await d.json();if(!e.success)throw Error(e.error||"Erro ao criar assinatura");if(e.subscription.clientSecret&&!await x)throw Error("Stripe n\xe3o carregado");b(e.subscription.id)}catch(a){i(a instanceof Error?a.message:"Erro desconhecido")}finally{g(!1)}};return(0,e.jsx)("div",{className:"mx-auto max-w-2xl",children:(0,e.jsxs)("form",{onSubmit:n,className:"space-y-6 rounded-lg bg-white p-8 shadow-lg",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Finalizar Assinatura"}),h&&(0,e.jsx)("div",{className:"rounded-lg bg-red-50 p-4 text-sm text-red-800",children:h}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nome Completo *"}),(0,e.jsx)("input",{type:"text",id:"name",value:l.name,onChange:a=>m({...l,name:a.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email *"}),(0,e.jsx)("input",{type:"email",id:"email",value:l.email,onChange:a=>m({...l,email:a.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]})]}),(0,e.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4",children:[(0,e.jsx)("p",{className:"mb-2 text-sm font-medium text-gray-700",children:"M\xe9todo de Pagamento"}),(0,e.jsx)("p",{className:"text-sm text-gray-600",children:"O formul\xe1rio de cart\xe3o do Stripe ser\xe1 exibido aqui em produ\xe7\xe3o"})]}),(0,e.jsxs)("div",{className:"space-y-3 rounded-lg border border-yellow-200 bg-yellow-50 p-4",children:[(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("input",{type:"checkbox",id:"medicalDisclaimer",checked:l.medicalDisclaimer,onChange:a=>m({...l,medicalDisclaimer:a.target.checked}),className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,e.jsxs)("label",{htmlFor:"medicalDisclaimer",className:"ml-3 text-sm text-gray-700",children:["Li e compreendi o"," ",(0,e.jsx)("button",{type:"button",onClick:()=>k(!j),className:"font-semibold text-blue-600 hover:underline",children:"aviso m\xe9dico importante"})]})]}),j&&(0,e.jsx)("div",{className:"mt-3 max-h-48 overflow-y-auto rounded border border-yellow-300 bg-white p-3 text-xs text-gray-700",children:(0,e.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:w})})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("input",{type:"checkbox",id:"consentTerms",checked:l.consentTerms,onChange:a=>m({...l,consentTerms:a.target.checked}),className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",required:!0}),(0,e.jsxs)("label",{htmlFor:"consentTerms",className:"ml-3 text-sm text-gray-700",children:["Aceito os"," ",(0,e.jsx)("a",{href:"/termos",className:"text-blue-600 hover:underline",target:"_blank",children:"Termos de Servi\xe7o"})," ","*"]})]}),(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("input",{type:"checkbox",id:"consentPrivacy",checked:l.consentPrivacy,onChange:a=>m({...l,consentPrivacy:a.target.checked}),className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",required:!0}),(0,e.jsxs)("label",{htmlFor:"consentPrivacy",className:"ml-3 text-sm text-gray-700",children:["Aceito a"," ",(0,e.jsx)("a",{href:"/privacidade",className:"text-blue-600 hover:underline",target:"_blank",children:"Pol\xedtica de Privacidade"})," ","(LGPD) *"]})]}),(0,e.jsxs)("div",{className:"flex items-start",children:[(0,e.jsx)("input",{type:"checkbox",id:"consentMarketing",checked:l.consentMarketing,onChange:a=>m({...l,consentMarketing:a.target.checked}),className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,e.jsx)("label",{htmlFor:"consentMarketing",className:"ml-3 text-sm text-gray-700",children:"Desejo receber ofertas e novidades por email"})]})]}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("button",{type:"button",onClick:c,className:"flex-1 rounded-lg border border-gray-300 bg-white px-6 py-3 font-semibold text-gray-700 hover:bg-gray-50",disabled:d,children:"Cancelar"}),(0,e.jsx)("button",{type:"submit",className:"flex-1 rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50",disabled:d,children:d?"Processando...":"Assinar Agora"})]})]})})}function z(){let a=(0,g.useRouter)();(0,g.useSearchParams)();let[b,c]=(0,f.useState)(null);if(!b)return(0,e.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,e.jsx)("div",{className:"text-xl text-gray-600",children:"Carregando..."})});let d=v[b];return(0,e.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-16 px-4",children:(0,e.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,e.jsxs)("div",{className:"mb-8 text-center",children:[(0,e.jsx)("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"Checkout"}),(0,e.jsxs)("p",{className:"text-gray-600",children:["Plano: ",(0,e.jsx)("span",{className:"font-semibold",children:d.name})," -"," ",d.priceFormatted,"/m\xeas"]})]}),(0,e.jsx)(y,{planId:b,onSuccess:b=>{a.push(`/jovem/assinatura/success?subscription=${b}`)},onCancel:()=>{a.push("/jovem/assinatura")}}),(0,e.jsx)("div",{className:"mt-8 text-center text-sm text-gray-600",children:(0,e.jsx)("p",{children:"Pagamento seguro processado via Stripe. Seus dados s\xe3o protegidos com criptografia SSL."})})]})})}function A(){return(0,e.jsx)(f.Suspense,{fallback:(0,e.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,e.jsx)("div",{className:"text-xl text-gray-600",children:"Carregando..."})}),children:(0,e.jsx)(z,{})})}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},96989:(a,b,c)=>{Promise.resolve().then(c.bind(c,21435))},99793:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.default,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(50539),D=c(62506),E=c(91203),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["jovem",{children:["assinatura",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,21435)),"/home/saraiva-vision-site/app/jovem/assinatura/checkout/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,18879)),"/home/saraiva-vision-site/app/jovem/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"/home/saraiva-vision-site/app/layout.tsx"],error:[()=>Promise.resolve().then(c.bind(c,41697)),"/home/saraiva-vision-site/app/error.tsx"],loading:[()=>Promise.resolve().then(c.bind(c,90391)),"/home/saraiva-vision-site/app/loading.tsx"],"global-error":[()=>Promise.resolve().then(c.bind(c,50539)),"/home/saraiva-vision-site/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(c.bind(c,8595)),"/home/saraiva-vision-site/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,H=["/home/saraiva-vision-site/app/jovem/assinatura/checkout/page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/jovem/assinatura/checkout/page",pathname:"/jovem/assinatura/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",relativeProjectDir:""});async function K(a,b,d){var F;let L="/jovem/assinatura/checkout/page";"/index"===L&&(L="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await J.prepare(a,b,{srcPage:L,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(L),{isOnDemandRevalidate:ah}=O,ai=J.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(F=$.routes[ag]??$.dynamicRoutes[ag])?void 0:F.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===J.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&J.isDev&&(aB=aa),J.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...D,tree:G,pages:H,GlobalError:C.default,handler:K,routeModule:J,__next_app__:I};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:L,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=J.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:J,page:L,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),J.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!J.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===J.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await J.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await J.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!J.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&E.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:L,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}}};var b=require("../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[4586,9091,779,19],()=>b(b.s=99793));module.exports=c})();