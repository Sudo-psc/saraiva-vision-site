(()=>{var a={};a.id=8910,a.ids=[8910],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},51745:(a,b,c)=>{"use strict";c.d(b,{x0:()=>g});let d={business:{legalName:"Cl\xednica Saraiva Vision",displayName:"Saraiva Vision",tradeName:"Saraiva Vision",type:"Ophthalmology Clinic",medicalSpecialty:"Oftalmologia",priceRange:"$$",founded:"2020",slogan:"Cuidando da sua vis\xe3o com tecnologia e humaniza\xe7\xe3o"},address:{full:"Rua Catarina Maria Passos, 97 - Santa Zita, Caratinga - MG, 35300-299",street:"Rua Catarina Maria Passos",number:"97",neighborhood:"Santa Zita",city:"Caratinga",state:"MG",stateCode:"MG",postalCode:"35300-299",country:"Brasil",countryCode:"BR",formatted:{short:"Rua Catarina Maria Passos, 97 - Caratinga/MG",medium:"Rua Catarina Maria Passos, 97 - Santa Zita, Caratinga/MG",long:"Rua Catarina Maria Passos, 97 - Santa Zita, Caratinga - MG, 35300-299",singleLine:"Rua Catarina Maria Passos, 97 - Santa Zita, Caratinga/MG 35300-299"},geo:{latitude:-19.789444,longitude:-42.137778,mapUrl:"https://maps.app.goo.gl/YOUR_GOOGLE_PLACE_ID"}},phone:{primary:{raw:"5533998601427",e164:"+5533998601427",display:"+55 33 99860-1427",displayShort:"(33) 99860-1427",href:"tel:+5533998601427",areaCode:"33",number:"998601427",international:"+55 33 99860-1427",national:"(033) 99860-1427"},whatsapp:{raw:"5533998601427",e164:"+5533998601427",display:"+55 33 99860-1427",href:"https://wa.me/5533998601427",defaultMessage:"Ol\xe1! Gostaria de agendar uma consulta."}},email:{primary:"saraivavision@gmail.com",contact:"saraivavision@gmail.com",support:"saraivavision@gmail.com",appointments:"saraivavision@gmail.com",href:"mailto:saraivavision@gmail.com"}},e=["GOOGLE_PLACE_ID_PLACEHOLDER","your_google_place_id_here","PLACEHOLDER"],f=a=>{if(!a)return null;let b=String(a).trim();return!b||e.some(a=>b.includes(a))?null:b};(()=>{let a=[];for(let b of("undefined"!=typeof process&&process.env&&(a.push(process.env.GOOGLE_PLACE_ID),a.push(process.env.VITE_GOOGLE_PLACE_ID)),a)){let a=f(b);if(a)return a}})();let g={name:d.business.legalName,legalName:d.business.legalName,streetAddress:`${d.address.street}, ${d.address.number}`,neighborhood:d.address.neighborhood,city:d.address.city,state:d.address.stateCode,postalCode:d.address.postalCode,country:d.address.countryCode,address:{street:`${d.address.street}, ${d.address.number}`,city:d.address.city,state:d.address.stateCode,zip:d.address.postalCode,country:d.address.countryCode},phoneDisplay:d.phone.primary.display,phone:d.phone.primary.e164,whatsapp:d.phone.whatsapp.e164,whatsapp24h:"https://wa.me/message/EHTAAAAYH7SHJ1",email:d.email.primary,instagram:"https://www.instagram.com/saraiva_vision/",facebook:"https://www.facebook.com/philipeoftalmo",linkedin:"https://www.linkedin.com/in/dr-philipe-saraiva/",x:"https://x.com/philipe_saraiva",spotify:"https://open.spotify.com/show/6sHIG7HbhF1w5O63CTtxwV",chatbotUrl:"https://chatgpt.com/g/g-quepJB90J-saraiva-vision-clinica-oftalmologica",onlineSchedulingUrl:"https://agendarconsulta.com/perfil/dr-philipe-cruz-1678973613",validateSchedulingUrl:()=>{let a="https://agendarconsulta.com/perfil/dr-philipe-cruz-1678973613";try{let b=new URL(a);if("https:"!==b.protocol)throw Error("URL must use HTTPS");if(!b.hostname.includes("agendarconsulta.com"))throw Error("URL must be from agendarconsulta.com domain");return a}catch(a){return console.error("Invalid scheduling URL:",a),null}},responsiblePhysician:"Dr. Philipe Saraiva Cruz",responsiblePhysicianCRM:"CRM-MG 69.870",responsiblePhysicianTitle:"Respons\xe1vel T\xe9cnico M\xe9dico",responsibleNurse:"Ana L\xfacia",responsibleNurseTitle:"Enfermeira",responsibleNursePhone:"+55 33 98420-7437",dpoEmail:"saraivavision@gmail.com",taxId:"53.864.119/0001-79",foundingDate:"2024-02-08",latitude:-19.7890206,longitude:-42.1347583,servicesKeywords:["Consultas oftalmol\xf3gicas","Exames de refra\xe7\xe3o","Tratamentos especializados","Cirurgias oftalmol\xf3gicas","Oftalmologia pedi\xe1trica","Laudos especializados"]}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65487:(a,b,c)=>{"use strict";c.r(b),c.d(b,{handler:()=>z,patchFetch:()=>y,routeModule:()=>u,serverHooks:()=>x,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>w});var d=c(95736),e=c(9117),f=c(4044),g=c(39326),h=c(32324),i=c(261),j=c(54290),k=c(85328),l=c(38928),m=c(46595),n=c(3421),o=c(17679),p=c(41681),q=c(63446),r=c(86439),s=c(51356),t=c(90744);let u=new d.AppRouteRouteModule({definition:{kind:e.RouteKind.APP_ROUTE,page:"/api/appointments/availability/route",pathname:"/api/appointments/availability",filename:"route",bundlePath:"app/api/appointments/availability/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"/home/saraiva-vision-site/app/api/appointments/availability/route.ts",nextConfigOutput:"standalone",userland:t}),{workAsyncStorage:v,workUnitAsyncStorage:w,serverHooks:x}=u;function y(){return(0,f.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:w})}async function z(a,b,c){var d;let f="/api/appointments/availability/route";"/index"===f&&(f="/");let t=await u.prepare(a,b,{srcPage:f,multiZoneDraftMode:!1});if(!t)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:v,params:w,nextConfig:x,isDraftMode:y,prerenderManifest:z,routerServerContext:A,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,resolvedPathname:D}=t,E=(0,i.normalizeAppPath)(f),F=!!(z.dynamicRoutes[E]||z.routes[D]);if(F&&!y){let a=!!z.routes[D],b=z.dynamicRoutes[E];if(b&&!1===b.fallback&&!a)throw new r.NoFallbackError}let G=null;!F||u.isDev||y||(G="/index"===(G=D)?"/":G);let H=!0===u.isDev||!F,I=F&&!H,J=a.method||"GET",K=(0,h.getTracer)(),L=K.getActiveScopeSpan(),M={params:w,prerenderManifest:z,renderOpts:{experimental:{cacheComponents:!!x.experimental.cacheComponents,authInterrupts:!!x.experimental.authInterrupts},supportsDynamicResponse:H,incrementalCache:(0,g.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=x.experimental)?void 0:d.cacheLife,isRevalidate:I,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>u.onRequestError(a,b,d,A)},sharedContext:{buildId:v}},N=new j.NodeNextRequest(a),O=new j.NodeNextResponse(b),P=k.NextRequestAdapter.fromNodeNextRequest(N,(0,k.signalFromNodeResponse)(b));try{let d=async c=>u.handle(P,M).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=K.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==l.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${J} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${J} ${a.url}`)}),i=async h=>{var i,j;let k=async({previousCacheEntry:e})=>{try{if(!(0,g.getRequestMeta)(a,"minimalMode")&&B&&C&&!e)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let f=await d(h);a.fetchMetrics=M.renderOpts.fetchMetrics;let i=M.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=M.renderOpts.collectedTags;if(!F)return await (0,n.I)(N,O,f,M.renderOpts.pendingWaitUntil),null;{let a=await f.blob(),b=(0,o.toNodeOutgoingHttpHeaders)(f.headers);j&&(b[q.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=q.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,d=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=q.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:s.CachedRouteKind.APP_ROUTE,status:f.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==e?void 0:e.isStale)&&await u.onRequestError(a,b,{routerKind:"App Router",routePath:f,routeType:"route",revalidateReason:(0,m.c)({isRevalidate:I,isOnDemandRevalidate:B})},A),b}},l=await u.handleResponse({req:a,nextConfig:x,cacheKey:G,routeKind:e.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:z,isRoutePPREnabled:!1,isOnDemandRevalidate:B,revalidateOnlyGenerated:C,responseGenerator:k,waitUntil:c.waitUntil});if(!F)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==s.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,g.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",B?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),y&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let r=(0,o.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,g.getRequestMeta)(a,"minimalMode")&&F||r.delete(q.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||r.get("Cache-Control")||r.set("Cache-Control",(0,p.getCacheControlHeader)(l.cacheControl)),await (0,n.I)(N,O,new Response(l.value.body,{headers:r,status:l.value.status||200})),null};L?await i(L):await K.withPropagatedContext(a.headers,()=>K.trace(l.BaseServerSpan.handleRequest,{spanName:`${J} ${a.url}`,kind:h.SpanKind.SERVER,attributes:{"http.method":J,"http.target":a.url}},i))}catch(b){if(b instanceof r.NoFallbackError||await u.onRequestError(a,b,{routerKind:"App Router",routePath:E,routeType:"route",revalidateReason:(0,m.c)({isRevalidate:I,isOnDemandRevalidate:B})}),F)throw b;return await (0,n.I)(N,O,new Response(null,{status:500})),null}}},78335:()=>{},79626:(a,b,c)=>{"use strict";c.d(b,{Eb:()=>g,FO:()=>i,lY:()=>h,nX:()=>f,qb:()=>e});var d=c(45711);let e=d.Ik({name:d.Yj().min(2,"Nome deve ter no m\xednimo 2 caracteres").max(100,"Nome deve ter no m\xe1ximo 100 caracteres").regex(/^[a-zA-ZÀ-ÿ\s'-]+$/,"Nome cont\xe9m caracteres inv\xe1lidos"),email:d.Yj().email("Email inv\xe1lido").max(255,"Email muito longo").toLowerCase(),phone:d.Yj().regex(/^(?:\+?55\s?)?(?:\(?\d{2}\)?\s?)?(?:9\s?)?\d{4}[-\s]?\d{4}$/,"Telefone inv\xe1lido. Use formato: (33) 99999-9999").transform(a=>a.replace(/\D/g,"")),message:d.Yj().min(10,"Mensagem deve ter no m\xednimo 10 caracteres").max(2e3,"Mensagem deve ter no m\xe1ximo 2000 caracteres").refine(a=>a.trim().length>0,"Mensagem n\xe3o pode estar vazia"),honeypot:d.Yj().optional()});function f(a){let b={...a};for(let a of["email","phone","cpf","rg","address"])if(a in b){let c=String(b[a]);b[a]=c.slice(0,3)+"***"+c.slice(-2)}return b}function g(a,b,c,d){let e=Date.now(),f=d.get(a);if(!f||e>f.resetAt){let f=e+c;return d.set(a,{count:1,resetAt:f}),{allowed:!0,remaining:b-1,resetAt:f}}return f.count>=b?{allowed:!1,remaining:0,resetAt:f.resetAt}:(f.count++,{allowed:!0,remaining:b-f.count,resetAt:f.resetAt})}d.Ik({placeId:d.Yj().optional(),limit:d.Yj().transform(a=>parseInt(a,10)).pipe(d.ai().min(1).max(50)).default("5"),language:d.Yj().regex(/^[a-z]{2}-[A-Z]{2}$/).default("pt-BR")}),d.Ik({page:d.Yj().transform(a=>parseInt(a,10)).pipe(d.ai().min(1)).default("1"),pageSize:d.Yj().transform(a=>parseInt(a,10)).pipe(d.ai().min(1).max(100)).default("10"),category:d.Yj().optional(),featured:d.Yj().transform(a=>"true"===a).pipe(d.zM()).optional(),search:d.Yj().max(200).optional()}),d.Ik({slug:d.Yj().min(1).max(200).regex(/^[a-z0-9-]+$/,"Slug inv\xe1lido")}),d.Ik({profile:d.k5(["familiar","jovem","senior"]),source:d.k5(["manual","auto"]).default("manual"),confidence:d.ai().min(0).max(1).optional()}),d.Ik({planId:d.Yj().min(1,"Plan ID \xe9 obrigat\xf3rio"),customerEmail:d.Yj().email("Email inv\xe1lido"),customerName:d.Yj().min(2,"Nome deve ter no m\xednimo 2 caracteres").max(100,"Nome deve ter no m\xe1ximo 100 caracteres"),paymentMethodId:d.Yj().optional()}),d.Ik({id:d.Yj().min(1,"Subscription ID \xe9 obrigat\xf3rio")}),d.Ik({hasDisclaimer:d.zM().refine(a=>!0===a,"Aviso m\xe9dico obrigat\xf3rio"),authorCRM:d.Yj().regex(/^CRM\/[A-Z]{2}\s\d{4,6}$/,"CRM inv\xe1lido. Use formato: CRM/MG 12345"),category:d.k5(["medical","educational","informational"]),reviewedBy:d.Yj().optional(),reviewedAt:d.Yj().datetime().optional()}),d.Ik({analytics:d.zM().default(!1),marketing:d.zM().default(!1),necessary:d.zM().default(!0),timestamp:d.Yj().datetime(),userAgent:d.Yj().optional(),ipAddress:d.Yj().ip().optional()}),d.Ik({"X-Content-Type-Options":d.eu("nosniff"),"X-Frame-Options":d.k5(["DENY","SAMEORIGIN"]),"X-XSS-Protection":d.eu("1; mode=block"),"Strict-Transport-Security":d.Yj().regex(/^max-age=\d+/),"Referrer-Policy":d.k5(["no-referrer","strict-origin-when-cross-origin","same-origin"]),"Permissions-Policy":d.Yj()}),d.Ik({appointment_date:d.Yj().regex(/^\d{4}-\d{2}-\d{2}$/,"Data inv\xe1lida. Use formato: YYYY-MM-DD").refine(a=>{let b=new Date(a).getDay();return b>=1&&b<=5},"Agendamentos s\xe3o permitidos apenas de segunda a sexta-feira").refine(a=>{let b=new Date(a),c=new Date;return c.setHours(0,0,0,0),b>=c},"A data deve ser hoje ou uma data futura"),appointment_time:d.Yj().regex(/^\d{2}:\d{2}$/,"Hor\xe1rio inv\xe1lido. Use formato: HH:MM").refine(a=>{let[b,c]=a.split(":").map(Number);return b>=8&&b<18&&(0===c||30===c)},"Hor\xe1rios dispon\xedveis: 08:00 \xe0s 18:00 em intervalos de 30 minutos")});let h=d.Ik({patient_name:d.Yj().min(2,"Nome deve ter no m\xednimo 2 caracteres").max(100,"Nome deve ter no m\xe1ximo 100 caracteres").regex(/^[a-zA-ZÀ-ÿ\s'-]+$/,"Nome cont\xe9m caracteres inv\xe1lidos"),patient_email:d.Yj().email("Email inv\xe1lido").max(255,"Email muito longo").toLowerCase(),patient_phone:d.Yj().regex(/^(?:\+?55\s?)?(?:\(?\d{2}\)?\s?)?(?:9\s?)?\d{4}[-\s]?\d{4}$/,"Telefone inv\xe1lido. Use formato: (33) 99999-9999").transform(a=>a.replace(/\D/g,"")),appointment_date:d.Yj().regex(/^\d{4}-\d{2}-\d{2}$/,"Data inv\xe1lida. Use formato: YYYY-MM-DD").refine(a=>{let b=new Date(a).getDay();return b>=1&&b<=5},"Agendamentos s\xe3o permitidos apenas de segunda a sexta-feira").refine(a=>{let b=new Date(a),c=new Date;return c.setHours(0,0,0,0),b>=c},"A data deve ser hoje ou uma data futura"),appointment_time:d.Yj().regex(/^\d{2}:\d{2}$/,"Hor\xe1rio inv\xe1lido. Use formato: HH:MM").refine(a=>{let[b,c]=a.split(":").map(Number);return b>=8&&b<18&&(0===c||30===c)},"Hor\xe1rios dispon\xedveis: 08:00 \xe0s 18:00 em intervalos de 30 minutos"),notes:d.Yj().max(1e3,"Observa\xe7\xf5es devem ter no m\xe1ximo 1000 caracteres").optional().default(""),honeypot:d.Yj().optional()}),i=d.Ik({days:d.Yj().transform(a=>parseInt(a,10)).pipe(d.ai().min(1).max(30)).default("14"),startDate:d.Yj().regex(/^\d{4}-\d{2}-\d{2}$/).optional(),endDate:d.Yj().regex(/^\d{4}-\d{2}-\d{2}$/).optional()})},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},90744:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GET:()=>i,OPTIONS:()=>j,dynamic:()=>l,mockBookedSlots:()=>h,runtime:()=>k});var d=c(10641),e=c(79626),f=c(51745);let g={start:8,end:18,slotDuration:30,workDays:[1,2,3,4,5]},h=new Map;async function i(a){try{let{searchParams:b}=new URL(a.url),c={days:b.get("days")||"14"},i=e.FO.safeParse(c);if(!i.success)return d.NextResponse.json({success:!1,error:{message:"Par\xe2metros inv\xe1lidos",code:"VALIDATION_ERROR"},timestamp:new Date().toISOString()},{status:400});let{days:j}=i.data,k=function(a){let b={},c=new Date(new Date),d=0;for(;d<a;){if(function(a){let b=a.getDay();return g.workDays.includes(b)}(c)){let a=c.toISOString().split("T")[0],e=function(a){let b=function(){let a=[];for(let b=g.start;b<g.end;b++)for(let c=0;c<60;c+=g.slotDuration){let d=`${b.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`;a.push(d)}return a}(),c=h.get(a)||new Set,d=new Date,e=new Date(a).toDateString()===d.toDateString();return b.map(b=>{let f=!c.has(b);if(e){let[a,c]=b.split(":").map(Number),e=new Date(d);e.setHours(a,c,0,0),e<=d&&(f=!1)}return Math.random()>.7&&(f=!1),{slot_time:b,is_available:f,slot_id:`${a}-${b}`}})}(a);e.filter(a=>a.is_available).length>0&&(b[a]=e),d++}c.setDate(c.getDate()+1)}return b}(j),l={success:!0,data:{availability:k,schedulingEnabled:!0,contact:{whatsapp:f.x0.whatsapp,phone:f.x0.phone,phoneDisplay:f.x0.phoneDisplay,externalUrl:f.x0.onlineSchedulingUrl}},timestamp:new Date().toISOString()};return d.NextResponse.json(l,{status:200,headers:{"Cache-Control":"private, no-cache, no-store, must-revalidate",Expires:"0",Pragma:"no-cache"}})}catch(a){return console.error("Availability API Error:",a),d.NextResponse.json({success:!1,error:{message:"Erro ao buscar disponibilidade. Tente novamente.",code:"INTERNAL_ERROR"},timestamp:new Date().toISOString()},{status:500})}}async function j(){return new d.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}let k="nodejs",l="force-dynamic"},96487:()=>{}};var b=require("../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[4586,1692,5711],()=>b(b.s=65487));module.exports=c})();