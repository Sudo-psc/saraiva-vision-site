[saraivavision]
; Pool name for SaraivaVision Medical Website
; Dr. Philipe Saraiva Cruz - CRM-MG 69.870
; Optimized for medical website with WordPress CMS

; Basic pool configuration
user = www-data
group = www-data
listen = /run/php/php8.3-fpm-saraivavision.sock
listen.owner = www-data
listen.group = www-data
listen.mode = 0660

; Process management settings
; Medical website requires reliable performance for patient inquiries
pm = dynamic
pm.max_children = 20
pm.start_servers = 5
pm.min_spare_servers = 3
pm.max_spare_servers = 8
pm.max_requests = 1000

; Process management tuning for medical website
; Higher max_requests for better memory management with medical images
; Conservative max_children for reliable performance under patient load

; Performance and resource limits
; Medical websites need stable memory usage for LGPD compliance
pm.process_idle_timeout = 30s
pm.max_requests = 1000
request_terminate_timeout = 60s
request_slowlog_timeout = 5s

; Logging for medical website monitoring
; Essential for healthcare compliance and debugging
php_admin_value[error_log] = /var/log/php/saraivavision-error.log
php_admin_flag[log_errors] = on
slowlog = /var/log/php/saraivavision-slow.log

; PHP configuration optimizations for medical website
; Memory and execution limits for WordPress + medical content
php_admin_value[memory_limit] = 256M
php_admin_value[max_execution_time] = 60
php_admin_value[max_input_time] = 60
php_admin_value[post_max_size] = 64M
php_admin_value[upload_max_filesize] = 32M

; Security settings for medical website
; LGPD compliance and patient data protection
php_admin_value[expose_php] = Off
php_admin_value[allow_url_fopen] = Off
php_admin_value[allow_url_include] = Off
php_admin_flag[display_errors] = off
php_admin_flag[display_startup_errors] = off

; Session security for admin panel access
php_admin_value[session.cookie_secure] = On
php_admin_value[session.cookie_httponly] = On
php_admin_value[session.use_strict_mode] = On
php_admin_value[session.gc_maxlifetime] = 3600

; OPcache settings (will be detailed in php.ini)
php_admin_value[opcache.enable] = 1
php_admin_value[opcache.enable_cli] = 0
php_admin_value[opcache.memory_consumption] = 256
php_admin_value[opcache.interned_strings_buffer] = 32
php_admin_value[opcache.max_accelerated_files] = 10000

; Environment variables for medical website
env[WORDPRESS_DB_HOST] = $WORDPRESS_DB_HOST
env[WORDPRESS_DB_NAME] = $WORDPRESS_DB_NAME
env[WORDPRESS_DB_USER] = $WORDPRESS_DB_USER
env[WORDPRESS_DB_PASSWORD] = $WORDPRESS_DB_PASSWORD
env[CLINIC_NAME] = $CLINIC_NAME
env[DOCTOR_NAME] = $DOCTOR_NAME
env[DOCTOR_CRM] = $DOCTOR_CRM

; Performance monitoring
; Enable FPM status page for medical website monitoring
pm.status_path = /fpm-status
ping.path = /fpm-ping
ping.response = pong

; Pool-specific access control
; Restrict access to medical website pool
access.log = /var/log/php/saraivavision-access.log
catch_workers_output = yes

; Clear environment for security
clear_env = no

; Chroot and chdir for enhanced security (optional)
; chroot = /var/www/saraivavision
; chdir = /