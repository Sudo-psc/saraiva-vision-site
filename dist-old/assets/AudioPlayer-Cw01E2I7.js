import{d as c,u as W,p as Y,X as Z,V as ee,q as ae,D as te}from"./index-CHpaVNy9.js";import{j as e}from"./ui-CEZRb7IA.js";import{r as l}from"./router-CLI7QSIB.js";import{m as f,A as re}from"./animation-BKbqriLr.js";const xe=c("Mic2",[["path",{d:"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12",key:"zoua8r"}],["circle",{cx:"17",cy:"7",r:"5",key:"1fomce"}]]),se=c("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),le=c("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ne=c("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),oe=c("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ce=c("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),ie=c("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),ge=({episode:t,mode:x="card",onClose:j=()=>{},className:F=""})=>{const{t:g}=W(),[p,o]=l.useState(!1),[w,N]=l.useState(0),[i,I]=l.useState(0),[k,A]=l.useState(1),[d,y]=l.useState(!1),[C,b]=l.useState(!1),[$,q]=l.useState(1),[S,E]=l.useState(!1),[P,D]=l.useState(null),n=l.useRef(null),L=l.useRef(null);l.useEffect(()=>{const a=n.current;if(!a)return;const r=()=>N(a.currentTime),s=()=>I(a.duration),m=()=>b(!0),h=()=>b(!1),_=()=>o(!1),B=()=>{b(!1),o(!1),D("Falha ao carregar o áudio. Tente novamente mais tarde.")};return a.addEventListener("timeupdate",r),a.addEventListener("loadedmetadata",s),a.addEventListener("loadstart",m),a.addEventListener("canplay",h),a.addEventListener("ended",_),a.addEventListener("error",B),()=>{a.removeEventListener("timeupdate",r),a.removeEventListener("loadedmetadata",s),a.removeEventListener("loadstart",m),a.removeEventListener("canplay",h),a.removeEventListener("ended",_),a.removeEventListener("error",B)}},[]),l.useEffect(()=>{const a=r=>{if(r?.detail&&r.detail.id!==t.id){const s=n.current;s&&!s.paused&&(s.pause(),o(!1))}};return window.addEventListener("sv:audio-play",a),()=>window.removeEventListener("sv:audio-play",a)},[t.id]);const v=!!(t&&t.src),U=()=>{if(!v)return;const a=n.current;if(p)a.pause(),o(!1);else{try{window.dispatchEvent(new CustomEvent("sv:audio-play",{detail:{id:t.id}}))}catch{}a.playsInline=!0;try{a.muted=!1}catch{}const r=a.play();r&&typeof r.then=="function"?r.then(()=>o(!0)).catch(()=>{try{a.muted=!1}catch{}a.play().then(()=>o(!0)).catch(()=>o(!1))}):o(!0)}},z=a=>{const r=n.current;r.currentTime=Math.max(0,Math.min(i,r.currentTime+a))},O=a=>{const s=L.current.getBoundingClientRect(),m=(a.clientX-s.left)/s.width,h=n.current;h.currentTime=m*i},X=()=>{const a=n.current;d?(a.volume=k,y(!1)):(a.volume=0,y(!0))},G=a=>{const r=parseFloat(a.target.value);A(r),n.current.volume=r,y(r===0)},H=a=>{q(a),n.current.playbackRate=a,E(!1)},J=()=>{const a=n.current;a.currentTime=0,N(0)},K=()=>{const a=document.createElement("a");a.href=t.src,a.download=`${t.title}.mp3`,document.body.appendChild(a),a.click(),document.body.removeChild(a)},M=a=>{const r=Math.floor(a/60),s=Math.floor(a%60);return`${r}:${s.toString().padStart(2,"0")}`},R=i?w/i*100:0;l.useEffect(()=>()=>{try{n.current&&n.current.pause()}catch{}},[]);const T=x==="modal";Y(T);const u=x==="inline",Q=x==="card",V=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{ref:L,className:"w-full h-2 bg-gray-200 rounded-full cursor-pointer group",onClick:O,role:"slider","aria-label":"Progresso do áudio","aria-valuenow":Math.round(R),"aria-valuemin":0,"aria-valuemax":100,tabIndex:0,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-blue-700 rounded-full transition-all group-hover:from-blue-700 group-hover:to-blue-800 relative",style:{width:`${R}%`},children:e.jsx("div",{className:"absolute -right-1 top-1/2 -translate-y-1/2 w-4 h-4 bg-white border-2 border-blue-600 rounded-full shadow-sm opacity-0 group-hover:opacity-100 transition-opacity"})})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:M(w)}),e.jsx("span",{children:M(i)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:J,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Reiniciar episódio",title:"Reiniciar do início",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(-10),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Voltar 10 segundos",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:U,disabled:C||!v,className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-full flex items-center justify-center transition-all shadow-lg","aria-label":v?p?"Pausar":"Reproduzir":"Áudio indisponível",children:C?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):p?e.jsx(se,{className:"w-5 h-5"}):e.jsx(le,{className:"w-5 h-5 ml-0.5"})}),e.jsx("button",{onClick:()=>z(10),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Avançar 10 segundos",children:e.jsx(ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:X,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":d?"Ativar som":"Silenciar",children:d?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})}),!u&&e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:d?0:k,onChange:G,className:"w-16 h-1 bg-gray-200 rounded-full appearance-none cursor-pointer","aria-label":"Volume"})]}),t.src&&e.jsx("button",{onClick:K,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors","aria-label":"Baixar episódio",title:"Baixar episódio",children:e.jsx(te,{className:"w-4 h-4"})}),!u&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>E(!S),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Configurações de velocidade",title:"Velocidade de reprodução",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx(re,{children:S&&e.jsxs(f.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute bottom-full right-0 mb-2 bg-white rounded-xl shadow-lg border border-gray-200 p-3 min-w-[120px] z-50",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Velocidade"}),e.jsx("div",{className:"space-y-1",children:[.5,.75,1,1.25,1.5,2].map(a=>e.jsxs("button",{onClick:()=>H(a),className:`w-full text-left px-2 py-1 rounded-lg text-sm transition-colors ${$===a?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[a,"x"]},a))})]})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[t.spotifyUrl&&e.jsx("a",{href:t.spotifyUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors","aria-label":"Ouvir no Spotify",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.3c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"})})}),t.applePodcastsUrl&&e.jsx("a",{href:t.applePodcastsUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Ouvir no Apple Podcasts",children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.182c5.42 0 9.818 4.398 9.818 9.818S17.42 21.818 12 21.818 2.182 17.42 2.182 12 6.58 2.182 12 2.182zm0 3.273c-3.6 0-6.545 2.945-6.545 6.545S8.4 18.545 12 18.545s6.545-2.945 6.545-6.545S15.6 5.455 12 5.455zm0 2.182c2.4 0 4.364 1.964 4.364 4.363S14.4 16.364 12 16.364 7.636 14.4 7.636 12 9.6 7.637 12 7.637zm0 1.636c-1.5 0-2.727 1.227-2.727 2.727S10.5 14.727 12 14.727 14.727 13.5 14.727 12 13.5 9.273 12 9.273z"})})})]})]})]})]});return T?e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:j,children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative max-h-[90dvh] overflow-y-auto touch-scroll scroll-container scrollbar-none",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:j,className:"absolute top-4 right-4 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Fechar player",children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:t.cover,alt:g("ui.alt.podcast_episode","Capa do episódio de podcast sobre saúde ocular")+": "+t.title,className:"w-40 h-40 rounded-2xl mx-auto mb-4 shadow-lg object-cover",width:256,height:256,onError:a=>{try{a.currentTarget.src="/Podcasts/Covers/podcast.png"}catch{}}}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 max-w-md mx-auto leading-relaxed",children:t.description}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-sm text-gray-500",children:[t.duration&&e.jsx("span",{children:t.duration}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium text-xs",children:t.category})]})]})]}),e.jsx("audio",{ref:n,src:t.src,preload:"metadata",playsInline:!0,className:"hidden"}),P?e.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:P}):e.jsx(V,{})]})}):e.jsxs("div",{className:`bg-white rounded-2xl shadow-soft-light border border-gray-100 ${u?"p-4":"p-6"} ${F}`,children:[e.jsx("audio",{ref:n,src:t.src,preload:"metadata",playsInline:!0,className:"hidden"}),Q&&t.cover&&e.jsxs("div",{className:"mb-4",children:[e.jsx("img",{src:t.cover,alt:g("ui.alt.podcast_episode","Capa do episódio de podcast sobre saúde ocular")+": "+t.title,className:"w-full aspect-square rounded-xl object-cover shadow-md",loading:"lazy",onError:a=>{try{a.currentTarget.src="/Podcasts/Covers/podcast.png"}catch{}}}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-1 line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[t.duration&&e.jsx("span",{children:t.duration}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full font-medium",children:t.category})]})]})]})]}),u&&e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("img",{src:t.cover,alt:g("ui.alt.podcast_episode","Capa do episódio de podcast sobre saúde ocular")+": "+t.title,className:"w-16 h-16 rounded-xl object-cover shadow-md flex-shrink-0",loading:"lazy",onError:a=>{try{a.currentTarget.src="/Podcasts/Covers/podcast.png"}catch{}}}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-1 line-clamp-2",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2 leading-relaxed",children:t.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[t.duration&&e.jsx("span",{children:t.duration}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full font-medium",children:t.category})]})]})]})]}),e.jsx(V,{})]})};export{ge as A,xe as M};
