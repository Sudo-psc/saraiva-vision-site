/* Enhanced Accessibility & Contrast System - WCAG 2.1 AAA Compliance */

/* ===== CORE ACCESSIBILITY VARIABLES ===== */
:root {
  /* WCAG AAA Compliant Text Colors (7:1 contrast ratio) */
  --text-aaa-primary: #1a1a1a;        /* 15.3:1 contrast on white */
  --text-aaa-secondary: #2d2d2d;      /* 11.9:1 contrast on white */
  --text-aaa-muted: #404040;          /* 8.9:1 contrast on white */
  
  /* WCAG AA Compliant Text Colors (4.5:1 contrast ratio) */
  --text-aa-primary: #333333;         /* 12.6:1 contrast on white */
  --text-aa-secondary: #4d4d4d;       /* 9.0:1 contrast on white */
  --text-aa-muted: #666666;           /* 5.7:1 contrast on white */
  
  /* High Contrast Background Colors */
  --bg-high-contrast: #ffffff;
  --bg-high-contrast-secondary: #f8f9fa;
  --bg-high-contrast-tertiary: #e9ecef;
  
  /* Medical Brand Colors with Enhanced Contrast */
  --medical-blue-accessible: #0056b3;     /* 7.2:1 contrast on white */
  --medical-green-accessible: #006b3c;    /* 7.1:1 contrast on white */
  --medical-teal-accessible: #004d5c;     /* 8.9:1 contrast on white */
  
  /* Focus and Interactive States */
  --focus-ring-color: #0066cc;
  --focus-ring-width: 3px;
  --focus-ring-offset: 2px;
  
  /* Error, Success, Warning Colors (WCAG AAA) */
  --error-accessible: #c41e3a;        /* 7.1:1 contrast on white */
  --success-accessible: #2d5016;      /* 8.2:1 contrast on white */
  --warning-accessible: #8b4513;      /* 7.3:1 contrast on white */
  
  /* Link Colors */
  --link-color: #0056b3;              /* 7.2:1 contrast on white */
  --link-visited: #4b0082;            /* 7.8:1 contrast on white */
  --link-hover: #003d82;              /* 9.1:1 contrast on white */
}

/* Dark Mode Variables */
:root.dark-mode {
  --text-aaa-primary: #ffffff;
  --text-aaa-secondary: #e6e6e6;
  --text-aaa-muted: #cccccc;
  
  --text-aa-primary: #f0f0f0;
  --text-aa-secondary: #d9d9d9;
  --text-aa-muted: #b3b3b3;
  
  --bg-high-contrast: #000000;
  --bg-high-contrast-secondary: #1a1a1a;
  --bg-high-contrast-tertiary: #2d2d2d;
  
  --medical-blue-accessible: #66b3ff;
  --medical-green-accessible: #66cc99;
  --medical-teal-accessible: #66d9ef;
  
  --focus-ring-color: #66b3ff;
  
  --error-accessible: #ff6b6b;
  --success-accessible: #51cf66;
  --warning-accessible: #ffd43b;
  
  --link-color: #66b3ff;
  --link-visited: #b19cd9;
  --link-hover: #99ccff;
}

/* ===== ENHANCED TEXT CONTRAST SYSTEM ===== */

/* Primary Text - Maximum Contrast */
.text-contrast-aaa {
  color: var(--text-aaa-primary) !important;
  font-weight: 600;
  text-shadow: none;
}

.text-contrast-aa {
  color: var(--text-aa-primary) !important;
  font-weight: 500;
}

/* Headings with Enhanced Contrast */
h1, h2, h3, h4, h5, h6 {
  color: var(--text-aaa-primary) !important;
  font-weight: 700 !important;
  letter-spacing: -0.025em;
  text-rendering: optimizeLegibility;
}

/* Body Text with Optimal Contrast */
p, span, div {
  color: var(--text-aa-primary) !important;
  line-height: 1.6;
  text-rendering: optimizeLegibility;
}

/* Secondary Text */
.text-secondary-accessible {
  color: var(--text-aa-secondary) !important;
  font-weight: 500;
}

/* Muted Text - Still Accessible */
.text-muted-accessible {
  color: var(--text-aa-muted) !important;
  font-weight: 500;
}

/* ===== ENHANCED BACKGROUND CONTRAST ===== */

/* High Contrast Backgrounds */
.bg-contrast-high {
  background-color: var(--bg-high-contrast) !important;
  color: var(--text-aaa-primary) !important;
}

.bg-contrast-secondary {
  background-color: var(--bg-high-contrast-secondary) !important;
  color: var(--text-aaa-primary) !important;
}

.bg-contrast-tertiary {
  background-color: var(--bg-high-contrast-tertiary) !important;
  color: var(--text-aaa-primary) !important;
}

/* ===== MEDICAL BRAND COLORS WITH ACCESSIBILITY ===== */

/* Service Cards with Enhanced Contrast */
.service-card-accessible {
  background: linear-gradient(145deg, 
    var(--bg-high-contrast) 0%, 
    var(--bg-high-contrast-secondary) 100%) !important;
  color: var(--text-aaa-primary) !important;
  border: 2px solid var(--text-aa-muted) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

.service-card-accessible:hover {
  border-color: var(--medical-blue-accessible) !important;
  box-shadow: 0 8px 24px rgba(0, 86, 179, 0.2) !important;
  transform: translateY(-2px);
}

/* Medical Icons with High Contrast */
.medical-icon-accessible {
  background-color: var(--bg-high-contrast-secondary) !important;
  border: 2px solid var(--medical-blue-accessible) !important;
  color: var(--medical-blue-accessible) !important;
}

/* ===== ENHANCED FOCUS SYSTEM ===== */

/* Universal Focus Styles */
*:focus,
*:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  box-shadow: 0 0 0 calc(var(--focus-ring-width) + 1px) rgba(0, 102, 204, 0.2) !important;
  border-radius: 4px;
}

/* Button Focus Enhancement */
button:focus,
button:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  box-shadow: 
    0 0 0 calc(var(--focus-ring-width) + 1px) rgba(0, 102, 204, 0.3),
    0 4px 12px rgba(0, 102, 204, 0.2) !important;
  background-color: var(--bg-high-contrast-secondary) !important;
  color: var(--text-aaa-primary) !important;
}

/* Link Focus Enhancement */
a:focus,
a:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  background-color: var(--focus-ring-color) !important;
  color: var(--bg-high-contrast) !important;
  text-decoration: none !important;
  padding: 2px 4px !important;
  border-radius: 3px !important;
}

/* Form Element Focus */
input:focus,
textarea:focus,
select:focus {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  border-color: var(--focus-ring-color) !important;
  box-shadow: 
    0 0 0 calc(var(--focus-ring-width) + 1px) rgba(0, 102, 204, 0.2),
    inset 0 1px 3px rgba(0, 0, 0, 0.1) !important;
  background-color: var(--bg-high-contrast) !important;
  color: var(--text-aaa-primary) !important;
}

/* ===== ENHANCED LINK SYSTEM ===== */

/* Accessible Link Colors */
a {
  color: var(--link-color) !important;
  text-decoration: underline !important;
  text-decoration-thickness: 2px !important;
  text-underline-offset: 3px !important;
  font-weight: 600 !important;
}

a:visited {
  color: var(--link-visited) !important;
}

a:hover {
  color: var(--link-hover) !important;
  background-color: rgba(0, 86, 179, 0.1) !important;
  padding: 2px 4px !important;
  border-radius: 3px !important;
  text-decoration: none !important;
}

/* ===== BUTTON ACCESSIBILITY ENHANCEMENTS ===== */

/* High Contrast Buttons */
.btn-accessible {
  background-color: var(--medical-blue-accessible) !important;
  color: var(--bg-high-contrast) !important;
  border: 2px solid var(--medical-blue-accessible) !important;
  font-weight: 700 !important;
  font-size: 1rem !important;
  padding: 12px 24px !important;
  min-height: 48px !important; /* WCAG touch target size */
  border-radius: 6px !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
}

.btn-accessible:hover {
  background-color: var(--link-hover) !important;
  border-color: var(--link-hover) !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(0, 61, 130, 0.3) !important;
}

.btn-accessible:active {
  transform: translateY(0) !important;
  box-shadow: 0 2px 6px rgba(0, 61, 130, 0.3) !important;
}

.btn-accessible:disabled {
  background-color: var(--text-aa-muted) !important;
  border-color: var(--text-aa-muted) !important;
  color: var(--bg-high-contrast) !important;
  cursor: not-allowed !important;
  opacity: 1 !important;
  transform: none !important;
}

/* Secondary Button */
.btn-secondary-accessible {
  background-color: var(--bg-high-contrast) !important;
  color: var(--medical-blue-accessible) !important;
  border: 2px solid var(--medical-blue-accessible) !important;
  font-weight: 700 !important;
  font-size: 1rem !important;
  padding: 12px 24px !important;
  min-height: 48px !important;
  border-radius: 6px !important;
  cursor: pointer !important;
}

.btn-secondary-accessible:hover {
  background-color: var(--medical-blue-accessible) !important;
  color: var(--bg-high-contrast) !important;
}

/* ===== FORM ACCESSIBILITY ENHANCEMENTS ===== */

/* High Contrast Form Elements */
.form-input-accessible {
  background-color: var(--bg-high-contrast) !important;
  color: var(--text-aaa-primary) !important;
  border: 2px solid var(--text-aa-muted) !important;
  font-size: 16px !important; /* Prevents zoom on iOS */
  padding: 12px 16px !important;
  border-radius: 6px !important;
  min-height: 48px !important;
  font-weight: 500 !important;
}

.form-input-accessible:hover {
  border-color: var(--medical-blue-accessible) !important;
  box-shadow: 0 2px 8px rgba(0, 86, 179, 0.1) !important;
}

.form-input-accessible::placeholder {
  color: var(--text-aa-muted) !important;
  font-weight: 500 !important;
}

/* Form Labels */
.form-label-accessible {
  color: var(--text-aaa-primary) !important;
  font-weight: 700 !important;
  font-size: 1rem !important;
  margin-bottom: 8px !important;
  display: block !important;
}

/* Required Field Indicator */
.form-required::after {
  content: " *" !important;
  color: var(--error-accessible) !important;
  font-weight: 700 !important;
}

/* ===== ERROR AND SUCCESS STATES ===== */

/* Error Messages */
.error-accessible {
  background-color: rgba(196, 30, 58, 0.1) !important;
  color: var(--error-accessible) !important;
  border: 2px solid var(--error-accessible) !important;
  padding: 12px 16px !important;
  border-radius: 6px !important;
  font-weight: 600 !important;
  margin: 8px 0 !important;
}

.error-accessible::before {
  content: "⚠ " !important;
  font-weight: 700 !important;
}

/* Success Messages */
.success-accessible {
  background-color: rgba(45, 80, 22, 0.1) !important;
  color: var(--success-accessible) !important;
  border: 2px solid var(--success-accessible) !important;
  padding: 12px 16px !important;
  border-radius: 6px !important;
  font-weight: 600 !important;
  margin: 8px 0 !important;
}

.success-accessible::before {
  content: "✓ " !important;
  font-weight: 700 !important;
}

/* Warning Messages */
.warning-accessible {
  background-color: rgba(139, 69, 19, 0.1) !important;
  color: var(--warning-accessible) !important;
  border: 2px solid var(--warning-accessible) !important;
  padding: 12px 16px !important;
  border-radius: 6px !important;
  font-weight: 600 !important;
  margin: 8px 0 !important;
}

.warning-accessible::before {
  content: "⚡ " !important;
  font-weight: 700 !important;
}

/* ===== CARD SYSTEM WITH ENHANCED CONTRAST ===== */

/* Service Cards */
.service-card-enhanced {
  background: linear-gradient(145deg, 
    var(--bg-high-contrast) 0%, 
    var(--bg-high-contrast-secondary) 100%) !important;
  color: var(--text-aaa-primary) !important;
  border: 3px solid var(--text-aa-muted) !important;
  border-radius: 12px !important;
  padding: 24px !important;
  box-shadow: 
    0 4px 12px rgba(0, 0, 0, 0.15),
    0 1px 3px rgba(0, 0, 0, 0.1) !important;
  transition: all 0.3s ease !important;
}

.service-card-enhanced:hover {
  border-color: var(--medical-blue-accessible) !important;
  box-shadow: 
    0 8px 24px rgba(0, 86, 179, 0.2),
    0 4px 12px rgba(0, 0, 0, 0.15) !important;
  transform: translateY(-4px) !important;
}

.service-card-enhanced:focus-within {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  border-color: var(--focus-ring-color) !important;
}

/* Card Titles */
.service-card-enhanced h3 {
  color: var(--text-aaa-primary) !important;
  font-weight: 700 !important;
  font-size: 1.25rem !important;
  line-height: 1.3 !important;
  margin-bottom: 12px !important;
}

/* Card Descriptions */
.service-card-enhanced p {
  color: var(--text-aa-secondary) !important;
  font-weight: 500 !important;
  line-height: 1.6 !important;
  font-size: 1rem !important;
}

/* ===== NAVIGATION ACCESSIBILITY ===== */

/* Skip Links */
.skip-link-enhanced {
  position: absolute !important;
  top: -48px !important;
  left: 8px !important;
  background-color: var(--medical-blue-accessible) !important;
  color: var(--bg-high-contrast) !important;
  padding: 12px 16px !important;
  text-decoration: none !important;
  font-weight: 700 !important;
  border-radius: 6px !important;
  z-index: 9999 !important;
  font-size: 1rem !important;
  border: 2px solid var(--bg-high-contrast) !important;
}

.skip-link-enhanced:focus {
  top: 8px !important;
  outline: var(--focus-ring-width) solid var(--bg-high-contrast) !important;
  outline-offset: var(--focus-ring-offset) !important;
}

/* Navigation Links */
.nav-link-accessible {
  color: var(--text-aaa-primary) !important;
  font-weight: 600 !important;
  text-decoration: none !important;
  padding: 12px 16px !important;
  border-radius: 6px !important;
  transition: all 0.2s ease !important;
  min-height: 48px !important;
  display: flex !important;
  align-items: center !important;
}

.nav-link-accessible:hover {
  background-color: var(--bg-high-contrast-secondary) !important;
  color: var(--medical-blue-accessible) !important;
}

.nav-link-accessible.active {
  background-color: var(--medical-blue-accessible) !important;
  color: var(--bg-high-contrast) !important;
  font-weight: 700 !important;
}

/* ===== RESPONSIVE ACCESSIBILITY ===== */

/* Large Text Support */
@media (min-width: 1200px) {
  .large-text-support {
    font-size: 125% !important;
    line-height: 1.6 !important;
  }
  
  .large-text-support h1 { font-size: 3rem !important; }
  .large-text-support h2 { font-size: 2.5rem !important; }
  .large-text-support h3 { font-size: 2rem !important; }
  .large-text-support p { font-size: 1.25rem !important; }
}

/* Mobile Accessibility */
@media (max-width: 768px) {
  /* Larger touch targets on mobile */
  button, a, input, textarea, select {
    min-height: 48px !important;
    min-width: 48px !important;
  }
  
  /* Increased font sizes for mobile */
  .mobile-accessible {
    font-size: 18px !important;
    line-height: 1.6 !important;
  }
  
  /* Enhanced focus rings on mobile */
  *:focus {
    outline-width: 4px !important;
    outline-offset: 3px !important;
  }
}

/* ===== HIGH CONTRAST MODE ENHANCEMENTS ===== */

.high-contrast-enhanced {
  --text-aaa-primary: #000000;
  --text-aa-primary: #000000;
  --text-aa-secondary: #000000;
  --text-aa-muted: #333333;
  
  --bg-high-contrast: #ffffff;
  --bg-high-contrast-secondary: #f0f0f0;
  --bg-high-contrast-tertiary: #e0e0e0;
  
  --medical-blue-accessible: #0000ff;
  --medical-green-accessible: #008000;
  --medical-teal-accessible: #008080;
  
  --focus-ring-color: #ff0000;
  --error-accessible: #ff0000;
  --success-accessible: #008000;
  --warning-accessible: #ff8c00;
  
  --link-color: #0000ff;
  --link-visited: #800080;
  --link-hover: #000080;
}

.high-contrast-enhanced.dark-mode {
  --text-aaa-primary: #ffffff;
  --text-aa-primary: #ffffff;
  --text-aa-secondary: #ffffff;
  --text-aa-muted: #cccccc;
  
  --bg-high-contrast: #000000;
  --bg-high-contrast-secondary: #1a1a1a;
  --bg-high-contrast-tertiary: #333333;
  
  --medical-blue-accessible: #66b3ff;
  --medical-green-accessible: #66ff66;
  --medical-teal-accessible: #66ffff;
  
  --focus-ring-color: #ffff00;
  --error-accessible: #ff6666;
  --success-accessible: #66ff66;
  --warning-accessible: #ffcc66;
  
  --link-color: #66b3ff;
  --link-visited: #ff66ff;
  --link-hover: #99ccff;
}

/* ===== REDUCED MOTION SUPPORT ===== */

@media (prefers-reduced-motion: reduce) {
  .reduced-motion-safe {
    animation: none !important;
    transition: none !important;
    transform: none !important;
    scroll-behavior: auto !important;
  }
  
  .reduced-motion-safe:hover {
    transform: none !important;
  }
  
  .reduced-motion-safe * {
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
}

/* ===== PRINT ACCESSIBILITY ===== */

@media print {
  .print-accessible {
    background: white !important;
    color: black !important;
    font-size: 12pt !important;
    line-height: 1.5 !important;
  }
  
  .print-accessible a {
    color: black !important;
    text-decoration: underline !important;
  }
  
  .print-accessible a[href]:after {
    content: " (" attr(href) ")" !important;
    font-size: 10pt !important;
  }
}

/* ===== UTILITY CLASSES ===== */

/* Screen Reader Only */
.sr-only-enhanced {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.sr-only-enhanced:focus {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: 8px !important;
  margin: 0 !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
  background-color: var(--medical-blue-accessible) !important;
  color: var(--bg-high-contrast) !important;
  font-weight: 700 !important;
  border-radius: 4px !important;
}

/* Focus Trap */
.focus-trap {
  outline: none !important;
}

.focus-trap:focus-within {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
}

/* High Contrast Images */
.img-high-contrast {
  filter: contrast(1.2) brightness(1.1) !important;
  border: 2px solid var(--text-aa-muted) !important;
  border-radius: 4px !important;
}

.high-contrast-enhanced .img-high-contrast {
  filter: contrast(1.5) brightness(1.2) !important;
  border-color: var(--text-aaa-primary) !important;
}

/* ===== SYSTEM PREFERENCE INTEGRATION ===== */

@media (prefers-contrast: high) {
  :root {
    --focus-ring-width: 4px;
    --text-aaa-primary: #000000;
    --text-aa-primary: #000000;
    --bg-high-contrast: #ffffff;
    --medical-blue-accessible: #0000ff;
    --error-accessible: #ff0000;
    --success-accessible: #008000;
    --warning-accessible: #ff8c00;
  }
}

@media (prefers-color-scheme: dark) {
  :root {
    --text-aaa-primary: #ffffff;
    --text-aa-primary: #f0f0f0;
    --text-aa-secondary: #d9d9d9;
    --bg-high-contrast: #000000;
    --bg-high-contrast-secondary: #1a1a1a;
    --medical-blue-accessible: #66b3ff;
    --focus-ring-color: #66b3ff;
  }
}

@media (forced-colors: active) {
  * {
    background-color: Canvas !important;
    color: CanvasText !important;
    border-color: CanvasText !important;
  }
  
  button {
    background-color: ButtonFace !important;
    color: ButtonText !important;
    border-color: ButtonText !important;
  }
  
  button:hover, button:focus {
    background-color: Highlight !important;
    color: HighlightText !important;
  }
  
  a {
    color: LinkText !important;
  }
  
  a:visited {
    color: VisitedText !important;
  }
  
  a:hover, a:focus {
    background-color: Highlight !important;
    color: HighlightText !important;
  }
}