; PHP Configuration Optimizations for SaraivaVision Medical Website
; Dr. Philipe Saraiva Cruz - CRM-MG 69.870
; Caratinga, Minas Gerais
; Optimized for WordPress CMS with medical content

; =============================================================================
; OPCACHE CONFIGURATION FOR MEDICAL WEBSITE
; =============================================================================

[opcache]
; Enable OPcache for performance
opcache.enable=1
opcache.enable_cli=0

; Memory configuration for medical website with WordPress
opcache.memory_consumption=256
opcache.interned_strings_buffer=32
opcache.max_accelerated_files=10000

; File validation for medical website security
opcache.validate_timestamps=1
opcache.revalidate_freq=60
opcache.fast_shutdown=1

; Advanced OPcache settings for WordPress optimization
opcache.save_comments=1
opcache.enable_file_override=1
opcache.optimization_level=0x7FFFBFFF

; Preload for WordPress core files (production only)
; opcache.preload=/var/www/saraivavision/wp-content/plugins/opcache-preload/preload.php
; opcache.preload_user=www-data

; JIT compilation for PHP 8.3 (WordPress compatible)
opcache.jit_buffer_size=128M
opcache.jit=1255

; =============================================================================
; PERFORMANCE OPTIMIZATIONS
; =============================================================================

; Memory limits for medical content and images
memory_limit = 256M
max_execution_time = 60
max_input_time = 60

; File upload limits for medical images and documents
post_max_size = 64M
upload_max_filesize = 32M
max_file_uploads = 20

; Form data limits for patient inquiry forms
max_input_vars = 3000
max_input_nesting_level = 64

; =============================================================================
; SECURITY CONFIGURATION FOR MEDICAL WEBSITE
; =============================================================================

; Hide PHP version for security
expose_php = Off

; Disable dangerous functions for medical website security
disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source

; File access restrictions
allow_url_fopen = Off
allow_url_include = Off
auto_prepend_file =
auto_append_file =

; Error handling for production medical website
display_errors = Off
display_startup_errors = Off
log_errors = On
error_log = /var/log/php/saraivavision-error.log

; =============================================================================
; SESSION SECURITY FOR ADMIN PANEL
; =============================================================================

[Session]
; Secure session configuration for WordPress admin
session.cookie_secure = On
session.cookie_httponly = On
session.use_strict_mode = On
session.cookie_samesite = "Strict"

; Session storage and garbage collection
session.gc_maxlifetime = 3600
session.gc_probability = 1
session.gc_divisor = 100

; Session name for medical website
session.name = SARAIVAVISION_SESSID

; =============================================================================
; DATE AND TIMEZONE
; =============================================================================

[Date]
; Timezone for Caratinga, Minas Gerais
date.timezone = America/Sao_Paulo

; =============================================================================
; APCU CONFIGURATION (OBJECT CACHE FALLBACK)
; =============================================================================

[APCu]
; Enable APCu for object caching fallback
apc.enabled = 1
apc.shm_size = 128M
apc.ttl = 3600
apc.gc_ttl = 3600
apc.entries_hint = 4096

; =============================================================================
; REDIS EXTENSION CONFIGURATION
; =============================================================================

[redis]
; Redis configuration for WordPress object cache
; Connection settings defined in wp-config.php

; =============================================================================
; MYSQL/MYSQLI OPTIMIZATIONS
; =============================================================================

[mysql]
mysql.default_port = 3306
mysql.default_socket = /var/run/mysqld/mysqld.sock

[mysqli]
mysqli.default_port = 3306
mysqli.default_socket = /var/run/mysqld/mysqld.sock
mysqli.reconnect = On

; =============================================================================
; GZIP COMPRESSION
; =============================================================================

[zlib]
; Enable output compression for better performance
zlib.output_compression = On
zlib.output_compression_level = 6

; =============================================================================
; ADDITIONAL SECURITY HEADERS
; =============================================================================

; Custom headers for medical website (handled by Nginx)
; Content Security Policy, X-Frame-Options, etc.

; =============================================================================
; REALPATH CACHE OPTIMIZATION
; =============================================================================

; Optimize realpath cache for WordPress
realpath_cache_size = 512K
realpath_cache_ttl = 3600

; =============================================================================
; MBSTRING CONFIGURATION
; =============================================================================

[mbstring]
; Multi-byte string configuration for Portuguese content
mbstring.internal_encoding = UTF-8
mbstring.http_output = UTF-8