"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7689],{27689:(e,a,r)=>{r.d(a,{A:()=>y});var t=r(37876),s=r(14232),l=r(82120),o=r(8632),i=r(34846),n=r(87215),d=r(68852),c=r(97364),u=r(1937),m=r(98671),x=r(36691),h=r(85527),p=r(86405),b=r(46618),g=r(89903),v=r(97842);let y=e=>{let{episode:a,mode:r="card",onClose:y=()=>{},className:j=""}=e,{t:f}=(0,i.Bd)(),[N,w]=(0,s.useState)(!1),[C,E]=(0,s.useState)(0),[k,S]=(0,s.useState)(0),[L,z]=(0,s.useState)(1),[A,P]=(0,s.useState)(!1),[_,T]=(0,s.useState)(!1),[F,M]=(0,s.useState)(1),[R,B]=(0,s.useState)(!1),[U,V]=(0,s.useState)(null),I=(0,s.useRef)(null),O=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=I.current;if(!e)return;let a=()=>E(e.currentTime),r=()=>S(e.duration),t=()=>T(!0),s=()=>T(!1),l=()=>w(!1),o=()=>{T(!1),w(!1),V("Falha ao carregar o \xe1udio. Tente novamente mais tarde.")};return e.addEventListener("timeupdate",a),e.addEventListener("loadedmetadata",r),e.addEventListener("loadstart",t),e.addEventListener("canplay",s),e.addEventListener("ended",l),e.addEventListener("error",o),()=>{e.removeEventListener("timeupdate",a),e.removeEventListener("loadedmetadata",r),e.removeEventListener("loadstart",t),e.removeEventListener("canplay",s),e.removeEventListener("ended",l),e.removeEventListener("error",o)}},[]),(0,s.useEffect)(()=>{let e=e=>{if((null==e?void 0:e.detail)&&e.detail.id!==a.id){let e=I.current;e&&!e.paused&&(e.pause(),w(!1))}};return window.addEventListener("sv:audio-play",e),()=>window.removeEventListener("sv:audio-play",e)},[a.id]);let q=!!(a&&a.src),X=async()=>{if(!q)return;let e=I.current;if(N)e.pause(),w(!1);else try{window.dispatchEvent(new CustomEvent("sv:audio-play",{detail:{id:a.id}})),e.playsInline=!0,e.muted=!1,e.readyState<2&&(T(!0),await new Promise((a,r)=>{let t=()=>{e.removeEventListener("canplay",t),e.removeEventListener("error",s),T(!1),a()},s=()=>{e.removeEventListener("canplay",t),e.removeEventListener("error",s),T(!1),r(Error("Failed to load audio"))};e.addEventListener("canplay",t),e.addEventListener("error",s),e.load()})),await e.play(),w(!0)}catch(e){console.warn("Audio play failed:",e),w(!1),V("Falha ao reproduzir o \xe1udio. Tente novamente.")}},D=e=>{let a=I.current;a.currentTime=Math.max(0,Math.min(k,a.currentTime+e))},G=e=>{let a=O.current.getBoundingClientRect(),r=(e.clientX-a.left)/a.width;I.current.currentTime=r*k},H=()=>{let e=I.current;A?(e.volume=L,P(!1)):(e.volume=0,P(!0))},J=e=>{let a=parseFloat(e.target.value);z(a),I.current.volume=a,P(0===a)},K=()=>{I.current.currentTime=0,E(0)},Q=()=>{let e=document.createElement("a");e.href=a.src,e.download="".concat(a.title,".mp3"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},W=e=>{let a=Math.floor(e/60),r=Math.floor(e%60);return"".concat(a,":").concat(r.toString().padStart(2,"0"))},Y=k?C/k*100:0;(0,s.useEffect)(()=>()=>{try{I.current&&I.current.pause()}catch(e){}},[]);let Z="modal"===r;(0,n.y)(Z);let $="inline"===r||"compact"===r,ee=()=>(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{ref:O,className:"w-full h-2 bg-gray-200 rounded-full cursor-pointer group",onClick:G,role:"slider","aria-label":"Progresso do \xe1udio","aria-valuenow":Math.round(Y),"aria-valuemin":0,"aria-valuemax":100,tabIndex:0,children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all group-hover:from-blue-600 group-hover:to-blue-700 relative",style:{width:"".concat(Y,"%")},children:(0,t.jsx)("div",{className:"absolute -right-1 top-1/2 -translate-y-1/2 w-4 h-4 bg-white border-2 border-blue-500 rounded-full shadow-sm opacity-0 group-hover:opacity-100 transition-opacity"})})}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:W(C)}),(0,t.jsx)("span",{children:W(k)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:K,className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Reiniciar epis\xf3dio",title:"Reiniciar do in\xedcio",children:(0,t.jsx)(x.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>D(-10),className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Voltar 10 segundos",children:(0,t.jsx)(h.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:X,disabled:_||!q,className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-full flex items-center justify-center transition-all shadow-lg","aria-label":q?N?"Pausar":"Reproduzir":"\xc1udio indispon\xedvel",children:_?(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):N?(0,t.jsx)(d.A,{className:"w-5 h-5"}):(0,t.jsx)(c.A,{className:"w-5 h-5 ml-0.5"})}),(0,t.jsx)("button",{onClick:()=>D(10),className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Avan\xe7ar 10 segundos",children:(0,t.jsx)(p.A,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:H,className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":A?"Ativar som":"Silenciar",children:A?(0,t.jsx)(u.A,{className:"w-4 h-4"}):(0,t.jsx)(m.A,{className:"w-4 h-4"})}),!$&&(0,t.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:A?0:L,onChange:J,className:"w-16 h-1 bg-gray-200 rounded-full appearance-none cursor-pointer","aria-label":"Volume"})]}),a.src&&(0,t.jsx)("button",{onClick:Q,className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Baixar epis\xf3dio",title:"Baixar epis\xf3dio",children:(0,t.jsx)(b.A,{className:"w-4 h-4"})}),!$&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>B(!R),className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Configura\xe7\xf5es de velocidade",title:"Velocidade de reprodu\xe7\xe3o",children:(0,t.jsx)(g.A,{className:"w-4 h-4"})}),(0,t.jsx)(l.N,{children:R&&(0,t.jsxs)(o.P.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute bottom-full right-0 mb-2 bg-white rounded-xl shadow-lg border border-gray-200 p-3 min-w-[120px] z-50",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Velocidade"}),(0,t.jsx)("div",{className:"space-y-1",children:[.5,.75,1,1.25,1.5,2].map(e=>(0,t.jsxs)("button",{onClick:()=>(e=>{M(e),I.current.playbackRate=e,B(!1)})(e),className:"w-full text-left px-2 py-1 rounded-lg text-sm transition-colors ".concat(F===e?"bg-blue-50 text-blue-600 font-semibold border border-blue-200":"text-gray-600 hover:bg-gray-100"),children:[e,"x"]},e))})]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[a.spotifyUrl&&(0,t.jsx)("a",{href:a.spotifyUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Ouvir no Spotify",children:(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.3c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"})})}),a.applePodcastsUrl&&(0,t.jsx)("a",{href:a.applePodcastsUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Ouvir no Apple Podcasts",children:(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.182c5.42 0 9.818 4.398 9.818 9.818S17.42 21.818 12 21.818 2.182 17.42 2.182 12 6.58 2.182 12 2.182zm0 3.273c-3.6 0-6.545 2.945-6.545 6.545S8.4 18.545 12 18.545s6.545-2.945 6.545-6.545S15.6 5.455 12 5.455zm0 2.182c2.4 0 4.364 1.964 4.364 4.363S14.4 16.364 12 16.364 7.636 14.4 7.636 12 9.6 7.637 12 7.637zm0 1.636c-1.5 0-2.727 1.227-2.727 2.727S10.5 14.727 12 14.727 14.727 13.5 14.727 12 13.5 9.273 12 9.273z"})})})]})]})]})]}),ea=(0,t.jsx)("audio",{ref:I,src:a.src,preload:"none",playsInline:!0,className:"hidden"});return Z?(0,t.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:y,children:(0,t.jsxs)(o.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative max-h-[90dvh] overflow-y-auto touch-scroll scroll-container scrollbar-none",onClick:e=>e.stopPropagation(),children:[ea,(0,t.jsx)("button",{onClick:y,className:"absolute top-4 right-4 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Fechar player",children:(0,t.jsx)(v.A,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("img",{src:a.cover,alt:f("ui.alt.podcast_episode","Capa do epis\xf3dio de podcast sobre sa\xfade ocular")+": "+a.title,className:"w-40 h-40 rounded-2xl mx-auto mb-4 shadow-lg object-cover",width:256,height:256,onError:e=>{try{e.currentTarget.src="/Podcasts/Covers/podcast.png"}catch(e){}}}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:a.title}),a.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3 max-w-md mx-auto leading-relaxed",children:a.description}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3 text-sm text-gray-500",children:[a.duration&&(0,t.jsx)("span",{children:a.duration}),a.category&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{className:"bg-blue-50 text-blue-600 px-2 py-1 rounded-full font-semibold text-xs border border-blue-200",children:a.category})]})]})]}),U?(0,t.jsx)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:U}):(0,t.jsx)(ee,{})]})}):(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-soft-light border border-gray-100 ".concat($?"p-4":"p-6"," ").concat(j),children:[ea,"card"===r&&a.cover&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("img",{src:a.cover,alt:f("ui.alt.podcast_episode","Capa do epis\xf3dio de podcast sobre sa\xfade ocular")+": "+a.title,className:"w-full aspect-square rounded-xl object-cover shadow-md",loading:"lazy",onError:e=>{try{e.currentTarget.src="/Podcasts/Covers/podcast.png"}catch(e){}}}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("h4",{className:"font-bold text-gray-900 mb-1 line-clamp-2",children:a.title}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[a.duration&&(0,t.jsx)("span",{children:a.duration}),a.category&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{className:"bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full font-semibold border border-blue-200",children:a.category})]})]})]})]}),$&&(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,t.jsx)("img",{src:a.cover,alt:f("ui.alt.podcast_episode","Capa do epis\xf3dio de podcast sobre sa\xfade ocular")+": "+a.title,className:"w-16 h-16 rounded-xl object-cover shadow-md flex-shrink-0",loading:"lazy",onError:e=>{try{e.currentTarget.src="/Podcasts/Covers/podcast.png"}catch(e){}}}),(0,t.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,t.jsx)("h4",{className:"font-bold text-gray-900 mb-1 line-clamp-2",children:a.title}),a.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2 leading-relaxed",children:a.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[a.duration&&(0,t.jsx)("span",{children:a.duration}),a.category&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{className:"bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full font-semibold border border-blue-200",children:a.category})]})]})]})]}),(0,t.jsx)(ee,{})]})}}}]);