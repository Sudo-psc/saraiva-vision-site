"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6492],{13900:(e,t,a)=>{a.d(t,{d:()=>i});var r=a(14232);let s=0,o={state:{toasts:[]},listeners:[],getState:()=>o.state,setState:e=>{"function"==typeof e?o.state=e(o.state):o.state={...o.state,...e},o.listeners.forEach(e=>e(o.state))},subscribe:e=>(o.listeners.push(e),()=>{o.listeners=o.listeners.filter(t=>t!==e)})},n=e=>{let{...t}=e,a=(s=(s+1)%Number.MAX_VALUE).toString(),r=()=>o.setState(e=>({...e,toasts:e.toasts.filter(e=>e.id!==a)}));return o.setState(e=>({...e,toasts:[{...t,id:a,dismiss:r},...e.toasts].slice(0,1)})),{id:a,dismiss:r,update:e=>o.setState(t=>({...t,toasts:t.toasts.map(t=>t.id===a?{...t,...e}:t)}))}};function i(){let[e,t]=(0,r.useState)(o.getState());return(0,r.useEffect)(()=>o.subscribe(e=>{t(e)}),[]),(0,r.useEffect)(()=>{let t=[];return e.toasts.forEach(e=>{if(e.duration===1/0)return;let a=setTimeout(()=>{e.dismiss()},e.duration||5e3);t.push(a)}),()=>{t.forEach(e=>clearTimeout(e))}},[e.toasts]),{toast:n,toasts:e.toasts}}},18243:(e,t,a)=>{a.d(t,{A:()=>g});var r=a(37876);a(14232);var s=a(34846),o=a(55404),n=a(79890),i=a(35162),l=a(8584),c=a(96023),d=a(78447);let m=e=>{let{height:t}=e;return(0,r.jsx)(d.A,{height:t||320})};var u=a(26283);let g=()=>{let{t:e}=(0,s.Bd)();return(0,r.jsxs)("section",{id:"local","aria-labelledby":"local-heading",className:"py-12 lg:py-16 text-white bg-gradient-to-br from-[#0a1628] via-[#13203a] to-[#0d1b2a] relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/20 via-indigo-900/10 to-blue-800/20","aria-hidden":"true"}),(0,r.jsx)("div",{className:"container mx-auto px-[7%] relative z-10",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 lg:gap-14 items-start lg:items-center",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-6 lg:pr-8 max-w-3xl",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)(o.A,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-blue-400/50 to-transparent"})]}),(0,r.jsx)("h2",{id:"local-heading",className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white leading-tight",children:e("location.title","Encontre-nos")}),(0,r.jsx)("p",{className:"text-lg md:text-xl text-blue-100/90 leading-relaxed max-w-2xl",children:e("location.subtitle","Localiza\xe7\xe3o verificada no Google. Facilite sua rota e avalie nosso atendimento.")})]}),(0,r.jsxs)("div",{className:"bg-white text-slate-800 rounded-2xl p-6 lg:p-8 border border-slate-200 shadow-xl space-y-5 max-w-xl",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-1",children:(0,r.jsx)(n.A,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Endere\xe7o"}),(0,r.jsxs)("p",{className:"text-slate-600 leading-relaxed",children:[c.x0.streetAddress,", ",c.x0.neighborhood,(0,r.jsx)("br",{}),c.x0.city," - ",c.x0.state]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(i.A,{className:"w-5 h-5 text-amber-500 fill-current"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Avalia\xe7\xf5es"}),(0,r.jsx)("p",{className:"text-slate-600",children:e("location.reviews_realtime","Avalia\xe7\xf5es em tempo real no Google")})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",role:"group","aria-label":e("location.cta_group","A\xe7\xf5es principais de localiza\xe7\xe3o"),children:[(0,r.jsx)(u.$,{asChild:!0,variant:"medical",size:"lg",className:"gap-3",children:(0,r.jsxs)("a",{href:c.xR,target:"_blank",rel:"noopener noreferrer","aria-label":e("location.google_maps_button_aria","Abrir perfil da cl\xednica no Google Maps (nova aba)"),children:[e("location.google_maps_button","Ver no Google Maps"),(0,r.jsx)(l.A,{className:"w-4 h-4"})]})}),(0,r.jsx)(u.$,{asChild:!0,variant:"outline",size:"lg",className:"gap-3 text-blue-700 border-blue-500 hover:text-blue-800",children:(0,r.jsxs)("a",{href:c.Z$,target:"_blank",rel:"noopener noreferrer","aria-label":e("location.review_button_aria","Abrir p\xe1gina de avalia\xe7\xf5es no Google (nova aba)"),children:[e("location.review_button","Avalie-nos no Google"),(0,r.jsx)(i.A,{className:"w-4 h-4 text-amber-400"})]})})]})]}),(0,r.jsx)("div",{className:"flex-1 max-w-2xl lg:self-center",children:(0,r.jsxs)("div",{className:"h-[304px] lg:h-[336px] rounded-2xl shadow-xl bg-white border border-slate-200 relative p-2",children:[(0,r.jsx)("div",{className:"relative w-full h-full rounded-xl overflow-hidden bg-gray-100",children:(0,r.jsx)(m,{height:"100%"})}),(0,r.jsx)("div",{className:"absolute top-6 left-6 bg-white rounded-lg px-4 py-2 shadow-md z-10",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse","aria-hidden":"true"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Cl\xednica Saraiva Vision"})]})})]})})]})})]})}},29974:(e,t,a)=>{a.d(t,{A:()=>ec});var r=a(37876),s=a(14232),o=a(8632),n=a(34846),i=a(79890),l=a(52958),c=a(43304),d=a(57009),m=a(18024),u=a(55194),g=a(21271),h=a(30449),p=a(78539),x=a(42743),f=a(15471),v=a(33616),b=a(79039),y=a(43279),j=a(96023),w=a(26283),N=a(13900);let E={VALIDATION:"validation",NETWORK:"network",API:"api",RATE_LIMIT:"rate_limit",RECAPTCHA:"recaptcha",EMAIL_SERVICE:"email_service",UNKNOWN:"unknown"},A={LOW:"low",MEDIUM:"medium",HIGH:"high",CRITICAL:"critical"},_={"validation.name_required":{userMessage:"O nome \xe9 obrigat\xf3rio.",field:"name",severity:A.MEDIUM,recovery:"Por favor, insira seu nome completo.",ariaLabel:"Erro no campo nome: nome \xe9 obrigat\xf3rio",retryable:!1},"validation.name_too_short":{userMessage:"O nome deve ter pelo menos 3 caracteres.",field:"name",severity:A.LOW,recovery:"Por favor, insira seu nome completo.",ariaLabel:"Erro no campo nome: muito curto",retryable:!1},"validation.name_too_long":{userMessage:"O nome \xe9 muito longo.",field:"name",severity:A.LOW,recovery:"Use no m\xe1ximo 50 caracteres.",ariaLabel:"Erro no campo nome: muito longo",retryable:!1},"validation.name_invalid":{userMessage:"Nome cont\xe9m caracteres inv\xe1lidos.",field:"name",severity:A.LOW,recovery:"Use apenas letras e espa\xe7os.",ariaLabel:"Erro no campo nome: caracteres inv\xe1lidos",retryable:!1},"validation.invalid":{userMessage:"Valor inv\xe1lido.",field:"unknown",severity:A.LOW,recovery:"Verifique o valor inserido.",ariaLabel:"Erro de valida\xe7\xe3o: valor inv\xe1lido",retryable:!1},"validation.email_required":{userMessage:"O email \xe9 obrigat\xf3rio.",field:"email",severity:A.MEDIUM,recovery:"Por favor, insira um endere\xe7o de email v\xe1lido.",ariaLabel:"Erro no campo email: email \xe9 obrigat\xf3rio",retryable:!1},"validation.email_invalid":{userMessage:"Email inv\xe1lido.",field:"email",severity:A.LOW,recovery:"Verifique o formato do email (ex: nome@dominio.com).",ariaLabel:"Erro no campo email: formato inv\xe1lido",retryable:!1},"validation.email_too_long":{userMessage:"Email muito longo.",field:"email",severity:A.LOW,recovery:"Use no m\xe1ximo 100 caracteres.",ariaLabel:"Erro no campo email: muito longo",retryable:!1},"validation.phone_required":{userMessage:"O telefone \xe9 obrigat\xf3rio.",field:"phone",severity:A.MEDIUM,recovery:"Por favor, insira um n\xfamero de telefone v\xe1lido.",ariaLabel:"Erro no campo telefone: telefone \xe9 obrigat\xf3rio",retryable:!1},"validation.phone_invalid":{userMessage:"Telefone inv\xe1lido.",field:"phone",severity:A.LOW,recovery:"Insira um n\xfamero de telefone v\xe1lido com DDD.",ariaLabel:"Erro no campo telefone: formato inv\xe1lido",retryable:!1},"validation.message_required":{userMessage:"A mensagem \xe9 obrigat\xf3ria.",field:"message",severity:A.MEDIUM,recovery:"Por favor, descreva sua consulta ou d\xfavida.",ariaLabel:"Erro no campo mensagem: mensagem \xe9 obrigat\xf3ria",retryable:!1},"validation.message_too_short":{userMessage:"A mensagem \xe9 muito curta.",field:"message",severity:A.LOW,recovery:"A mensagem deve ter pelo menos 10 caracteres.",ariaLabel:"Erro no campo mensagem: muito curta",retryable:!1},"validation.message_too_long":{userMessage:"A mensagem \xe9 muito longa.",field:"message",severity:A.LOW,recovery:"Use no m\xe1ximo 2000 caracteres.",ariaLabel:"Erro no campo mensagem: muito longa",retryable:!1},"validation.message_contains_links":{userMessage:"Links n\xe3o s\xe3o permitidos na mensagem.",field:"message",severity:A.MEDIUM,recovery:"Remova qualquer link ou URL da mensagem.",ariaLabel:"Erro no campo mensagem: cont\xe9m links n\xe3o permitidos",retryable:!1},"validation.consent_required":{userMessage:"\xc9 necess\xe1rio aceitar os termos de privacidade.",field:"consent",severity:A.MEDIUM,recovery:"Marque a caixa de consentimento para continuar.",ariaLabel:"Erro no consentimento: aceita\xe7\xe3o dos termos \xe9 obrigat\xf3ria",retryable:!1},"network.offline":{userMessage:"Voc\xea est\xe1 offline.",severity:A.HIGH,recovery:"Verifique sua conex\xe3o com a internet e tente novamente.",ariaLabel:"Erro de conex\xe3o: sem conex\xe3o com a internet",retryable:!0,retryDelay:2e3,maxRetries:5},"network.timeout":{userMessage:"A conex\xe3o expirou.",severity:A.MEDIUM,recovery:"Tente novamente em alguns instantes.",ariaLabel:"Erro de conex\xe3o: tempo limite excedido",retryable:!0,retryDelay:1e3,maxRetries:3},"network.failed":{userMessage:"Falha na conex\xe3o.",severity:A.MEDIUM,recovery:"Verifique sua conex\xe3o e tente novamente.",ariaLabel:"Erro de conex\xe3o: falha na comunica\xe7\xe3o",retryable:!0,retryDelay:1500,maxRetries:3},"network.dns_error":{userMessage:"Erro de resolu\xe7\xe3o de DNS.",severity:A.HIGH,recovery:"Verifique sua conex\xe3o DNS ou tente novamente mais tarde.",ariaLabel:"Erro de conex\xe3o: problema de DNS",retryable:!0,retryDelay:3e3,maxRetries:2},"api.missing_token":{userMessage:"Token de verifica\xe7\xe3o ausente.",severity:A.HIGH,recovery:"Recarregue a p\xe1gina e tente novamente.",ariaLabel:"Erro de seguran\xe7a: token de verifica\xe7\xe3o ausente",retryable:!0,retryDelay:2e3,maxRetries:2},"api.recaptcha_failed":{userMessage:"Falha na verifica\xe7\xe3o de seguran\xe7a.",severity:A.HIGH,recovery:"Aguarde alguns instantes e tente novamente.",ariaLabel:"Erro de seguran\xe7a: falha na verifica\xe7\xe3o reCAPTCHA",retryable:!0,retryDelay:3e3,maxRetries:2},"api.missing_required_fields":{userMessage:"Campos obrigat\xf3rios n\xe3o preenchidos.",severity:A.MEDIUM,recovery:"Preencha todos os campos obrigat\xf3rios.",ariaLabel:"Erro de valida\xe7\xe3o: campos obrigat\xf3rios n\xe3o preenchidos",retryable:!1},"api.rate_limited":{userMessage:"Muitas tentativas. Aguarde um momento.",severity:A.MEDIUM,recovery:"Aguarde alguns minutos antes de tentar novamente.",ariaLabel:"Erro de limite: muitas tentativas realizadas",retryable:!0,retryDelay:6e4,maxRetries:1},"api.email_service_error":{userMessage:"Erro no servi\xe7o de email.",severity:A.HIGH,recovery:"Tente novamente mais tarde ou entre em contato por telefone.",ariaLabel:"Erro de servi\xe7o: falha no envio de email",retryable:!0,retryDelay:5e3,maxRetries:2},"api.server_error":{userMessage:"Erro interno do servidor.",severity:A.HIGH,recovery:"Tente novamente em alguns minutos.",ariaLabel:"Erro do servidor: erro interno",retryable:!0,retryDelay:1e4,maxRetries:2},"api.service_unavailable":{userMessage:"Servi\xe7o temporariamente indispon\xedvel.",severity:A.HIGH,recovery:"Tente novamente em alguns minutos ou entre em contato por telefone.",ariaLabel:"Erro de servi\xe7o: servi\xe7o indispon\xedvel",retryable:!0,retryDelay:15e3,maxRetries:1},"recaptcha.missing_token":{userMessage:"Verifica\xe7\xe3o de seguran\xe7a n\xe3o conclu\xedda.",severity:A.HIGH,recovery:"Recarregue a p\xe1gina e tente novamente.",ariaLabel:"Erro de seguran\xe7a: verifica\xe7\xe3o reCAPTCHA n\xe3o conclu\xedda",retryable:!0,retryDelay:2e3,maxRetries:2},"recaptcha.missing_secret":{userMessage:"Erro de configura\xe7\xe3o de seguran\xe7a.",severity:A.CRITICAL,recovery:"Entre em contato com o suporte t\xe9cnico.",ariaLabel:"Erro cr\xedtico: configura\xe7\xe3o de seguran\xe7a incorreta",retryable:!1},"recaptcha.verification_failed":{userMessage:"Falha na verifica\xe7\xe3o reCAPTCHA.",severity:A.HIGH,recovery:"Aguarde alguns instantes e tente novamente.",ariaLabel:"Erro de seguran\xe7a: falha na verifica\xe7\xe3o reCAPTCHA",retryable:!0,retryDelay:3e3,maxRetries:2},"recaptcha.low_score":{userMessage:"Verifica\xe7\xe3o de seguran\xe7a falhou.",severity:A.HIGH,recovery:"Tente novamente ou use outro navegador.",ariaLabel:"Erro de seguran\xe7a: pontua\xe7\xe3o baixa no reCAPTCHA",retryable:!0,retryDelay:5e3,maxRetries:1},"recaptcha.network_error":{userMessage:"Erro na verifica\xe7\xe3o de seguran\xe7a.",severity:A.MEDIUM,recovery:"Verifique sua conex\xe3o e tente novamente.",ariaLabel:"Erro de conex\xe3o: falha na verifica\xe7\xe3o de seguran\xe7a",retryable:!0,retryDelay:2e3,maxRetries:3},email_service_unavailable:{userMessage:"Servi\xe7o de email indispon\xedvel.",severity:A.HIGH,recovery:"Tente novamente mais tarde ou entre em contato por telefone.",ariaLabel:"Erro de servi\xe7o: servi\xe7o de email indispon\xedvel",retryable:!0,retryDelay:1e4,maxRetries:2},email_send_failed:{userMessage:"Falha ao enviar email.",severity:A.HIGH,recovery:"Tente novamente ou entre em contato diretamente.",ariaLabel:"Erro de envio: falha ao enviar email",retryable:!0,retryDelay:5e3,maxRetries:2},email_template_error:{userMessage:"Erro na formata\xe7\xe3o do email.",severity:A.MEDIUM,recovery:"Tente novamente. Se persistir, entre em contato por telefone.",ariaLabel:"Erro de formata\xe7\xe3o: problema no template de email",retryable:!0,retryDelay:2e3,maxRetries:1},unknown:{userMessage:"Ocorreu um erro inesperado.",severity:A.MEDIUM,recovery:"Tente novamente. Se o problema persistir, entre em contato conosco.",ariaLabel:"Erro desconhecido: ocorreu um problema inesperado",retryable:!0,retryDelay:3e3,maxRetries:2},timeout:{userMessage:"A opera\xe7\xe3o demorou mais que o esperado.",severity:A.MEDIUM,recovery:"Tente novamente com uma conex\xe3o mais est\xe1vel.",ariaLabel:"Erro de tempo: opera\xe7\xe3o demorou muito para completar",retryable:!0,retryDelay:2e3,maxRetries:2}};function I(e){if(!e)return{type:E.UNKNOWN,code:"unknown"};if("NetworkError"===e.name||"NETWORK_ERROR"===e.code)return{type:E.NETWORK,code:"network.failed"};if("TimeoutError"===e.name||"TIMEOUT_ERROR"===e.code)return{type:E.NETWORK,code:"network.timeout"};if("undefined"!=typeof navigator&&!navigator.onLine)return{type:E.NETWORK,code:"network.offline"};if(e.error)switch(e.error){case"missing_token":return{type:E.API,code:"api.missing_token"};case"recaptcha_failed":return{type:E.RECAPTCHA,code:"api.recaptcha_failed"};case"missing_required_fields":return{type:E.API,code:"api.missing_required_fields"};case"rate_limited":return{type:E.RATE_LIMIT,code:"api.rate_limited"};case"email_service_error":return{type:E.EMAIL_SERVICE,code:"api.email_service_error"};default:return{type:E.API,code:e.error}}if(e.field)return{type:E.VALIDATION,code:"validation.".concat(e.code||"invalid")};if(e.code)switch(e.code){case"missing_token":return{type:E.RECAPTCHA,code:"recaptcha.missing_token"};case"missing_secret":return{type:E.RECAPTCHA,code:"recaptcha.missing_secret"};case"verification_failed":return{type:E.RECAPTCHA,code:"recaptcha.verification_failed"};case"low_score":return{type:E.RECAPTCHA,code:"recaptcha.low_score"};case"network_error":return{type:E.RECAPTCHA,code:"recaptcha.network_error"};default:return{type:E.UNKNOWN,code:e.code}}return{type:E.UNKNOWN,code:"unknown"}}function R(e){let{type:t,code:a}=I(e);return{..._[a]||_.unknown,type:t,code:a,originalError:e}}let k={default:{maxAttempts:3,baseDelay:1e3,maxDelay:3e4,backoffFactor:2,jitterFactor:.1},network:{maxAttempts:5,baseDelay:2e3,maxDelay:6e4,backoffFactor:1.5,jitterFactor:.2},api:{maxAttempts:3,baseDelay:1500,maxDelay:45e3,backoffFactor:2,jitterFactor:.15},rateLimit:{maxAttempts:2,baseDelay:6e4,maxDelay:3e5,backoffFactor:2,jitterFactor:.1}};function C(e){let{type:t}=I(e),a=R(e);if(!1===a.retryable)return null;if(void 0!==a.maxRetries)return{maxAttempts:a.maxRetries,baseDelay:a.retryDelay||k.default.baseDelay,shouldRetry:()=>!1!==a.retryable};switch(t){case E.NETWORK:return{...k.network,shouldRetry:e=>"NetworkError"===e.name||"TimeoutError"===e.name};case E.RATE_LIMIT:return{...k.rateLimit,shouldRetry:e=>"rate_limited"===e.error};case E.API:return{...k.api,shouldRetry:e=>e.status>=500||"TimeoutError"===e.name};case E.EMAIL_SERVICE:return{...k.api,shouldRetry:e=>"email_service_error"===e.error||e.status>=500};case E.RECAPTCHA:return{maxAttempts:2,baseDelay:3e3,shouldRetry:e=>"missing_secret"!==e.code};default:return k.default}}async function S(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.config||k.default,s=a.maxAttempts||r.maxAttempts,o=a.shouldRetry||(()=>!0),n=a.onRetry||(()=>{}),i=a.errorType||"default",l=1;for(;l<=s;)try{let a=await e();return l>1&&T(t,{action:"retry_success",attempt:l,totalAttempts:s}),a}catch(a){if(t=a,l===s||!o(a))throw T(a,{action:"retry_failed",attempt:l,totalAttempts:s,finalFailure:!0}),a;let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=a||k[t]||k.default,s=Math.min(r.baseDelay*Math.pow(r.backoffFactor,e-1),r.maxDelay),o=s*r.jitterFactor*Math.random();return Math.floor(Math.min(s+o,r.maxDelay))}(l,i,r);n({error:a,attempt:l,maxAttempts:s,delay:e,nextAttemptIn:e}),T(a,{action:"retry_attempt",attempt:l,totalAttempts:s,delay:e}),await new Promise(t=>setTimeout(t,e)),l++}throw t}async function D(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S(()=>e(t),{...a,onRetry:e=>{L("Tentativa ".concat(e.attempt," de ").concat(e.maxAttempts,". ")+"Tentando novamente em ".concat(Math.ceil(e.delay/1e3)," segundos.")),a.onRetry&&a.onRetry(e)}})}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=I(e);return{timestamp:new Date().toISOString(),type:a.type,code:a.code,message:e.message||"Unknown error",context:t}}function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite";if("undefined"==typeof document)return;let a=document.getElementById("error-announcer");a||((a=document.createElement("div")).id="error-announcer",a.setAttribute("aria-live",t),a.setAttribute("aria-atomic","true"),a.style.position="absolute",a.style.left="-10000px",a.style.width="1px",a.style.height="1px",a.style.overflow="hidden",document.body.appendChild(a)),a.textContent="",setTimeout(()=>{a.textContent=e},100),setTimeout(()=>{a.textContent===e&&(a.textContent="")},1e4)}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=R(e),r=O(a.severity),s="".concat(r.label,": ").concat(a.userMessage);return a.field&&(s="Erro no campo ".concat(a.field,": ").concat(a.userMessage)),t.action&&(s="".concat(t.action,": ").concat(s)),L(s,[A.HIGH,A.CRITICAL].includes(a.severity)?"assertive":"polite"),s}function O(e){switch(e){case A.LOW:return{color:"yellow",icon:"⚠️",label:"Aten\xe7\xe3o",ariaLabel:"Aviso de aten\xe7\xe3o",role:"img"};case A.MEDIUM:return{color:"orange",icon:"\uD83D\uDD36",label:"Aviso",ariaLabel:"Aviso importante",role:"img"};case A.HIGH:return{color:"red",icon:"\uD83D\uDD34",label:"Erro",ariaLabel:"Erro cr\xedtico",role:"img"};case A.CRITICAL:return{color:"darkred",icon:"\uD83D\uDEA8",label:"Cr\xedtico",ariaLabel:"Erro cr\xedtico do sistema",role:"img"};default:return{color:"gray",icon:"❓",label:"Desconhecido",ariaLabel:"Erro desconhecido",role:"img"}}}let P={baseUrl:"/api",timeout:3e4};class F{handleStatusChange(e){this.online=e,this.listeners.forEach(t=>t(e))}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}isOnline(){return this.online}constructor(){this.online=navigator.onLine,this.listeners=[],window.addEventListener("online",()=>this.handleStatusChange(!0)),window.addEventListener("offline",()=>this.handleStatusChange(!1))}}let H=new F;async function G(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P.timeout,r=new AbortController,s=setTimeout(()=>r.abort(),a);try{let a=await fetch(e,{...t,signal:r.signal});if(clearTimeout(s),!a.ok){let e=await a.json().catch(()=>({}));throw{name:"ApiError",message:e.message||"HTTP ".concat(a.status),status:a.status,error:e.error||"api_error",details:e.details||null,response:a}}return a}catch(e){if(clearTimeout(s),"AbortError"===e.name)throw{name:"TimeoutError",message:"Request timeout",code:"NETWORK_ERROR"};if(!navigator.onLine)throw{name:"NetworkError",message:"No internet connection",code:"NETWORK_OFFLINE"};throw e}}async function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(P.baseUrl).concat(e),r={method:"GET",headers:{"Content-Type":"application/json",...t.headers},...t};try{return await S(async()=>{let e=await G(a,r);return await e.json()},{errorType:"api",onRetry:t=>{T(t.error,{endpoint:e,method:r.method,attempt:t.attempt,maxAttempts:t.maxAttempts})},shouldRetry:e=>{let t=I(e);return e.status&&e.status>=400&&e.status<500?429===e.status:["network","api","unknown"].includes(t.type)}})}catch(t){throw T(t,{endpoint:e,method:r.method,finalFailure:!0}),M(t,{action:"Falha na comunica\xe7\xe3o com o servidor"}),t}}async function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!H.isOnline()){let e={name:"NetworkError",message:"No internet connection",code:"NETWORK_OFFLINE"};throw M(e,{action:"Envio do formul\xe1rio"}),e}let a=["name","email","message","token"].filter(t=>!e[t]);if(a.length>0){let e={name:"ValidationError",message:"Missing required fields",field:a[0],code:"missing_required_fields"};throw M(e,{action:"Valida\xe7\xe3o do formul\xe1rio"}),e}let r={...e,timestamp:new Date().toISOString(),userAgent:"undefined"!=typeof navigator?navigator.userAgent:"unknown"},s=async()=>({success:!0,data:await V("/contact",{method:"POST",body:JSON.stringify(r)}),timestamp:new Date().toISOString()});try{var o;let a=await D(()=>s(),e,{errorType:"api",onRetry:a=>{T(a.error,{endpoint:"/contact",method:"POST",attempt:a.attempt,maxAttempts:a.maxAttempts,formData:z(e)}),t.onRetry&&t.onRetry(a)},shouldRetry:e=>{let t=C(e);return t&&t.shouldRetry(e)}});return o=t.attempt||1,L(o>1?"Sucesso na tentativa ".concat(o,". Formul\xe1rio enviado com \xeaxito."):"Formul\xe1rio enviado com sucesso.","polite"),a}catch(r){let a={...r,context:{endpoint:"/contact",method:"POST",timestamp:new Date().toISOString(),hasRecaptcha:!!e.token,formFields:Object.keys(e),attempt:t.attempt||1}};throw T(a,{formData:z(e),finalFailure:!0}),M(a,{action:"Envio do formul\xe1rio falhou"}),a}}function z(e){let t={...e};return delete t.token,t}let U={storeForRetry:e=>{try{let t=JSON.parse(localStorage.getItem("failedContactSubmissions")||"[]");t.push({...e,timestamp:new Date().toISOString(),retryCount:0});let a=t.slice(-5);return localStorage.setItem("failedContactSubmissions",JSON.stringify(a)),!0}catch(e){return console.error("Failed to store submission for retry:",e),!1}},retryFailedSubmissions:async()=>{try{let e=JSON.parse(localStorage.getItem("failedContactSubmissions")||"[]");if(0===e.length)return{success:!0,retried:0};let t=[],a=[];for(let r of e){if(r.retryCount>=3){a.push(r);continue}try{let{timestamp:e,retryCount:a,...s}=r;await q(s),t.push({success:!0,originalTimestamp:e})}catch(e){r.retryCount=(r.retryCount||0)+1,a.push(r),t.push({success:!1,originalTimestamp:r.timestamp,error:e.message})}}return localStorage.setItem("failedContactSubmissions",JSON.stringify(a)),{success:!0,retried:t.length,results:t}}catch(e){return T(e,{action:"retry_failed_submissions"}),{success:!1,error:e.message}}}};class W{loadFromStorage(){try{let e=localStorage.getItem("apiCache");if(e){let t=JSON.parse(e);this.cache=new Map(Object.entries(t))}}catch(e){console.warn("Failed to load API cache from storage:",e)}}saveToStorage(){try{let e=Object.fromEntries(this.cache);localStorage.setItem("apiCache",JSON.stringify(e))}catch(e){console.warn("Failed to save API cache to storage:",e)}}set(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5,r=Date.now()+a;this.cache.set(e,{data:t,expiry:r}),this.saveToStorage()}get(e){let t=this.cache.get(e);return t?Date.now()>t.expiry?(this.cache.delete(e),this.saveToStorage(),null):t.data:null}clear(){this.cache.clear(),this.saveToStorage()}constructor(){this.cache=new Map,this.loadFromStorage()}}new W;var B=a(19878),K=a(97842),J=a(66691);let X=e=>{let{error:t,onRetry:a,onDismiss:o,className:n="",showRecoverySteps:i=!0,showContactInfo:c=!0,compact:m=!1,retryAttempt:g=0,maxRetries:h=3,isRetrying:p=!1,autoAnnounce:x=!0}=e,v=(0,s.useRef)(null),b=(0,s.useRef)(null);if(!t)return null;let y=R(t),j=function(e){let t=R(e),a=[];switch(a.push(t.recovery),t.type){case E.NETWORK:a.push("Verifique sua conex\xe3o Wi-Fi ou dados m\xf3veis."),a.push("Tente recarregar a p\xe1gina.");break;case E.RECAPTCHA:a.push("Limpe o cache e cookies do navegador."),a.push("Tente usar o modo an\xf4nimo do navegador.");break;case E.RATE_LIMIT:a.push("Aguarde alguns minutos antes de tentar novamente."),a.push("Se precisar de ajuda urgente, ligue diretamente para n\xf3s.");break;case E.EMAIL_SERVICE:a.push("Tente novamente em alguns minutos."),a.push("Entre em contato por telefone: +55 33 99860-1427");break;default:a.push("Se o problema persistir, entre em contato conosco.")}return a.filter(e=>e&&""!==e.trim())}(t),w=O(y.severity),N=function(e){let t=R(e);if(!1===t.retryable)return!1;let a=[E.CRITICAL],{type:r}=I(e);return!a.includes(r)&&t.severity!==A.CRITICAL}(t),_=C(t),k=a&&N&&_&&g<h;return((0,s.useEffect)(()=>{x&&t&&t!==b.current&&(M(t,{action:"Erro no formul\xe1rio",retryAttempt:g>0?g:void 0}),b.current=t)},[t,x,g]),(0,s.useEffect)(()=>{v.current&&!m&&v.current.focus()},[t,m]),m)?(0,r.jsx)("div",{ref:v,className:"p-3 rounded-lg border ".concat(n),style:{backgroundColor:"".concat(w.color,"10"),borderColor:"".concat(w.color,"30")},role:"alert","aria-live":"polite","aria-labelledby":"error-message",tabIndex:-1,children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-lg",role:w.role,"aria-label":w.ariaLabel,children:w.icon}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{id:"error-message",className:"text-sm font-medium text-gray-800",children:y.userMessage}),g>0&&(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Tentativa ",g," de ",h]}),k&&(0,r.jsxs)("button",{onClick:a,disabled:p,className:"mt-1 text-xs text-blue-600 hover:text-blue-800 disabled:text-gray-400 flex items-center gap-1","aria-describedby":"retry-description",children:[p?(0,r.jsx)(u.A,{size:12,className:"animate-spin"}):(0,r.jsx)(B.A,{size:12}),p?"Tentando...":"Tentar novamente"]}),k&&(0,r.jsx)("span",{id:"retry-description",className:"sr-only",children:"Clique para tentar enviar o formul\xe1rio novamente"})]}),o&&(0,r.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 p-0.5","aria-label":"Fechar mensagem de erro",children:(0,r.jsx)(K.A,{size:14})})]})}):(0,r.jsxs)("div",{ref:v,className:"p-4 rounded-lg border ".concat(n),style:{backgroundColor:"".concat(w.color,"10"),borderColor:"".concat(w.color,"30")},role:"alert","aria-live":"assertive","aria-labelledby":"error-title","aria-describedby":"error-description",tabIndex:-1,children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("span",{className:"text-2xl",role:w.role,"aria-label":w.ariaLabel,children:w.icon})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("h4",{id:"error-title",className:"text-lg font-semibold text-gray-800",children:w.label}),y.field&&(0,r.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600",children:["Campo: ",y.field]}),g>0&&(0,r.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-orange-100 text-orange-700",children:["Tentativa ",g,"/",h]})]}),(0,r.jsx)("p",{id:"error-description",className:"text-gray-700",children:y.userMessage}),y.ariaLabel&&(0,r.jsx)("span",{className:"sr-only",children:y.ariaLabel})]}),o&&(0,r.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 p-1","aria-label":"Fechar mensagem de erro",children:(0,r.jsx)(K.A,{size:18})})]}),i&&j.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h5",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1",children:[(0,r.jsx)(J.A,{size:14}),"O que voc\xea pode fazer:"]}),(0,r.jsx)("ul",{className:"space-y-1",children:j.map((e,t)=>(0,r.jsxs)("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-gray-400 mt-0.5",children:"•"}),(0,r.jsx)("span",{children:e})]},t))})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[k&&(0,r.jsxs)("button",{onClick:a,disabled:p,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm font-medium","aria-describedby":"retry-info",children:[p?(0,r.jsx)(u.A,{size:16,className:"animate-spin"}):(0,r.jsx)(B.A,{size:16}),p?"Tentando...":"Tentar novamente"]}),k&&(0,r.jsx)("div",{id:"retry-info",className:"sr-only",children:_?"Tentativa ".concat(g+1," de ").concat(h,". ").concat(_.maxAttempts-g-1," tentativas restantes."):"Clique para tentar novamente"}),"network"===y.type&&(0,r.jsxs)("button",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium","aria-label":"Recarregar a p\xe1gina para tentar resolver problemas de conex\xe3o",children:[(0,r.jsx)(f.A,{size:16}),"Recarregar p\xe1gina"]})]}),c&&(0,r.jsxs)("div",{className:"border-t pt-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Se o problema persistir, entre em contato diretamente:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsxs)("a",{href:"tel:+5533998601427",className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800",children:[(0,r.jsx)(l.A,{size:16}),"+55 33 99860-1427"]}),(0,r.jsxs)("a",{href:"mailto:saraivavision@gmail.com",className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800",children:[(0,r.jsx)(d.A,{size:16}),"saraivavision@gmail.com"]})]})]}),!1]})};var Y=a(51802),Q=a(81645);let $={html:e=>"string"!=typeof e?"":e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").trim(),text:e=>"string"!=typeof e?"":$.html(e).replace(/\0/g,"").replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"").trim().replace(/\s+/g," "),email:e=>"string"!=typeof e?"":e.trim().toLowerCase(),phone:e=>"string"!=typeof e?"":e.replace(/[^\d\s()\-+]/g,"").trim()};function Z(e){if(10!==e.length&&11!==e.length)return!1;let t=e.substring(0,2);if(11>parseInt(t)||parseInt(t)>99)return!1;if(11===e.length)return"9"===e.charAt(2);if(10===e.length){let t=e.charAt(2);return t>="2"&&t<="8"}return!1}let ee=Y.Yj().min(1,"Telefone \xe9 obrigat\xf3rio").transform($.phone).refine(e=>{let t=e.replace(/\D/g,"");return!(t.length<10)&&!(t.length>13)&&(e.startsWith("+55")?(12===t.length||13===t.length)&&Z(t.substring(2)):Z(t))},{message:"Formato de telefone inv\xe1lido. Use: (11) 99999-9999 ou +55 11 99999-9999"}),et=Y.Ik({name:Y.Yj().min(1,"Nome \xe9 obrigat\xf3rio").min(2,"Nome deve ter pelo menos 2 caracteres").max(100,"Nome deve ter no m\xe1ximo 100 caracteres").transform($.text).refine(e=>e.length>=2,{message:"Nome deve ter pelo menos 2 caracteres ap\xf3s sanitiza\xe7\xe3o"}),email:Y.Yj().min(1,"Email \xe9 obrigat\xf3rio").transform($.email).refine(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),{message:"Formato de email inv\xe1lido"}).refine(e=>e.length<=254,{message:"Email deve ter no m\xe1ximo 254 caracteres"}),phone:ee,message:Y.Yj().min(1,"Mensagem \xe9 obrigat\xf3ria").min(10,"Mensagem deve ter pelo menos 10 caracteres").max(2e3,"Mensagem deve ter no m\xe1ximo 2000 caracteres").transform($.text).refine(e=>e.length>=10,{message:"Mensagem deve ter pelo menos 10 caracteres ap\xf3s sanitiza\xe7\xe3o"}),consent:Y.zM().refine(e=>!0===e,{message:"Voc\xea deve aceitar os termos de privacidade para continuar"}),honeypot:Y.Yj().optional().transform($.text).refine(e=>!e||0===e.length,{message:"Campo de seguran\xe7a detectou atividade suspeita"})}),ea={REQUIRED_FIELD:"Este campo \xe9 obrigat\xf3rio",INVALID_EMAIL:"Por favor, insira um email v\xe1lido",INVALID_PHONE:"Por favor, insira um telefone v\xe1lido no formato brasileiro",MESSAGE_TOO_SHORT:"A mensagem deve ter pelo menos 10 caracteres",MESSAGE_TOO_LONG:"A mensagem deve ter no m\xe1ximo 2000 caracteres",NAME_TOO_SHORT:"O nome deve ter pelo menos 2 caracteres",NAME_TOO_LONG:"O nome deve ter no m\xe1ximo 100 caracteres",CONSENT_REQUIRED:"Voc\xea deve aceitar os termos de privacidade",SPAM_DETECTED:"Atividade suspeita detectada. Tente novamente.",VALIDATION_ERROR:"Por favor, verifique os dados informados"},er=e=>{let t={};return e.errors.forEach(e=>{let a=e.path[0],r=e.code,s=e.message;switch(a){case"name":s.includes("pelo menos 2")?t[a]=ea.NAME_TOO_SHORT:s.includes("m\xe1ximo 100")?t[a]=ea.NAME_TOO_LONG:s.includes("obrigat\xf3rio")?t[a]=ea.REQUIRED_FIELD:t[a]=s;break;case"email":"invalid_string"===r||s.includes("email inv\xe1lido")?t[a]=ea.INVALID_EMAIL:s.includes("obrigat\xf3rio")?t[a]=ea.REQUIRED_FIELD:t[a]=s;break;case"phone":s.includes("Formato de telefone inv\xe1lido")?t[a]=ea.INVALID_PHONE:s.includes("obrigat\xf3rio")?t[a]=ea.REQUIRED_FIELD:t[a]=s;break;case"message":s.includes("pelo menos 10")?t[a]=ea.MESSAGE_TOO_SHORT:s.includes("m\xe1ximo 2000")?t[a]=ea.MESSAGE_TOO_LONG:s.includes("obrigat\xf3rio")?t[a]=ea.REQUIRED_FIELD:t[a]=s;break;case"consent":t[a]=ea.CONSENT_REQUIRED;break;case"honeypot":t[a]=ea.SPAM_DETECTED;break;default:t[a]=s||ea.VALIDATION_ERROR}}),t},es=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let a=et.pick({[e]:!0}).parse({[e]:t});return{success:!0,value:a[e],error:null}}catch(t){if(t instanceof Q.G&&t.errors.find(t=>t.path[0]===e))return{success:!1,value:null,error:er(t)[e]};return{success:!1,value:null,error:ea.VALIDATION_ERROR}}},eo=(Y.Ik({message_type:Y.k5(["email","sms"],{errorMap:()=>({message:"Tipo de mensagem deve ser email ou sms"})}),recipient:Y.Yj().min(1,"Destinat\xe1rio \xe9 obrigat\xf3rio").transform($.email).refine(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),{message:"Email do destinat\xe1rio inv\xe1lido"}),subject:Y.Yj().min(1,"Assunto \xe9 obrigat\xf3rio").max(255,"Assunto deve ter no m\xe1ximo 255 caracteres").transform($.text),content:Y.Yj().min(1,"Conte\xfado \xe9 obrigat\xf3rio").transform($.html),template_data:Y.g1(Y.bz()).optional(),max_retries:Y.ai().int().min(0).max(10).default(3),send_after:Y.p6().optional().default(()=>new Date)}),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{a.current&&t.debug&&console.debug("[Visibility] Tracking ".concat(e," on element"),a.current)},[e,t.debug]),a});class en{hasValidConsent(){try{let e=localStorage.getItem(this.storageKey);if(!e)return!0;let t=JSON.parse(e);return t.accepted&&new Date(t.timestamp)>new Date(Date.now()-31536e6)}catch(e){return console.debug("[LGPD] Error checking consent:",e),!0}}grantConsent(){try{let e={accepted:!0,timestamp:new Date().toISOString(),version:"1.0"};localStorage.setItem(this.storageKey,JSON.stringify(e)),console.debug("[LGPD] Consent granted")}catch(e){console.debug("[LGPD] Error granting consent:",e)}}revokeConsent(){try{localStorage.removeItem(this.storageKey),console.debug("[LGPD] Consent revoked")}catch(e){console.debug("[LGPD] Error revoking consent:",e)}}constructor(){this.storageKey="saraiva_lgpd_consent"}}let ei=new en;var el=a(84980);let ec=()=>{var e,t,a,E,A,_,I,k,C,S,D,L,M,O,P,F,G;let{t:V}=(0,n.Bd)(),{toast:z}=(0,N.d)(),{trackFormView:W,trackFormSubmit:B,trackInteraction:K}={trackEvent:(e,t)=>{console.debug("[Analytics] Event: ".concat(e),t)},trackInteraction:(e,t,a)=>{console.debug("[Analytics] Interaction: ".concat(e," on ").concat(t),a)},trackAppointment:(e,t)=>{console.debug("[Analytics] Appointment: ".concat(e),t)},trackFormView:e=>{console.debug("[Analytics] Form View: ".concat(e))},trackFormSubmit:(e,t)=>{console.debug("[Analytics] Form Submit: ".concat(e),t)},isEnabled:()=>!1,trackPageView:()=>{console.debug("[Analytics] Page view tracked")},trackFunnelEvent:(e,t)=>{console.debug("[Analytics] Funnel: ".concat(e),t)}},{trackContactInteraction:J,trackAppointmentRequest:Y}={trackContactInteraction:(e,t)=>{console.debug("[Saraiva] Contact: ".concat(e),t)},trackAppointmentRequest:e=>{console.debug("[Saraiva] Appointment request",e)},trackServiceView:(e,t)=>{console.debug("[Saraiva] Service view: ".concat(e),t)}},$=eo("contact_form_view"),Z=(0,s.useRef)(null),ee=(0,s.useRef)(null),en=(0,s.useRef)(null),ec=(0,s.useRef)(null),ed=(0,s.useRef)(null),[em,eu]=(0,s.useState)({name:"",email:"",phone:"",message:"",consent:!1,honeypot:""}),[eg,eh]=(0,s.useState)({}),[ep,ex]=(0,s.useState)({}),[ef,ev]=(0,s.useState)({}),[eb,ey]=(0,s.useState)(!1),[ej,ew]=(0,s.useState)(!1),[eN,eE]=(0,s.useState)(null),[eA,e_]=(0,s.useState)(null),[eI,eR]=(0,s.useState)(!1),[ek,eC]=(0,s.useState)(0),[eS,eD]=(0,s.useState)(!1),[eT,eL]=(0,s.useState)(!1),[eM,eO]=(0,s.useState)(""),{ready:eP,execute:eF}=(()=>{let e=(void 0).VITE_RECAPTCHA_SITE_KEY,[t,a]=(0,s.useState)(!1),r=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(!e)return;if(window.grecaptcha&&window.grecaptcha.execute)return void a(!0);if(r.current)return;r.current=!0;let t=document.createElement("script");return t.src="https://www.google.com/recaptcha/api.js?render=".concat(encodeURIComponent(e)),t.async=!0,t.defer=!0,t.onload=()=>{window.grecaptcha&&window.grecaptcha.ready(()=>a(!0))},t.onerror=()=>{r.current=!1},document.head.appendChild(t),()=>{}},[e]);let o=(0,s.useCallback)(async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contact";if(!e||!window.grecaptcha||!t)return null;try{return await window.grecaptcha.execute(e,{action:a})}catch(e){return null}},[e,t]);return{ready:t,execute:o,enabled:!!e}})(),{isOnline:eH}=function(){let[e,t]=s.useState(H.isOnline());return s.useEffect(()=>H.subscribe(t),[]),{isOnline:e,lastChecked:new Date().toISOString()}}()||{isOnline:!0};(0,s.useEffect)(()=>{W("contact")},[W]);let eG=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite";eO(e),ed.current&&(ed.current.setAttribute("aria-live",t),setTimeout(()=>eO(""),100))},eV=async(e,t)=>{ew(!0);try{let a=es(e,t,em);ev(t=>({...t,[e]:a})),a.success?(eh(t=>{let a={...t};return delete a[e],a}),eG("Campo ".concat(eq(e)," v\xe1lido"))):(eh(t=>({...t,[e]:a.error})),eG("Erro no campo ".concat(eq(e),": ").concat(a.error),"assertive"))}catch(a){console.error("Field validation error:",a);let t="Erro de valida\xe7\xe3o";eh(a=>({...a,[e]:t})),eG("Erro no campo ".concat(eq(e),": ").concat(t),"assertive")}finally{ew(!1)}},eq=e=>({name:"Nome",email:"E-mail",phone:"Telefone",message:"Mensagem",consent:"Consentimento"})[e]||e;el.F8.phone.whatsapp.raw,(0,el.Hd)();let ez=e=>{let{name:t,type:a,value:r,checked:s}=e.target,o="checkbox"===a?s:r;eu(e=>({...e,[t]:o})),eT&&eL(!1),"honeypot"!==t&&ep[t]&&eV(t,o)},eU=e=>{let{name:t,value:a}=e.target;ep[t]||ex(e=>({...e,[t]:!0})),"honeypot"!==t&&eV(t,a)},eW=async e=>{if(e.preventDefault(),e_(null),eD(!1),!ei.hasValidConsent()){let e="\xc9 necess\xe1rio aceitar os termos de privacidade antes de enviar o formul\xe1rio.";e_({name:"ConsentError",message:"LGPD consent required",userMessage:e}),eG(e,"assertive");return}if(eG("Enviando formul\xe1rio, aguarde...","assertive"),!eH){e_({name:"NetworkError",message:"No internet connection"}),eG("Sem conex\xe3o com a internet. Verifique sua conex\xe3o e tente novamente.","assertive");return}if(em.honeypot&&""!==em.honeypot.trim()){console.warn("Spam attempt detected via honeypot field"),ey(!0),setTimeout(()=>ey(!1),2e3);return}let t=localStorage.getItem("lastContactSubmission"),a=Date.now();if(t&&a-parseInt(t)<3e4){e_({error:"rate_limited"}),eG("Muitas tentativas. Aguarde 30 segundos antes de tentar novamente.","assertive");return}let r=(e=>{try{let t=et.parse(e);return{success:!0,data:t,errors:null}}catch(e){if(e instanceof Q.G)return{success:!1,data:null,errors:er(e)};return{success:!1,data:null,errors:{general:ea.VALIDATION_ERROR}}}})(em);if(!r.success){eh(r.errors),ex({name:!0,email:!0,phone:!0,message:!0,consent:!0,recaptcha:!0}),e_({field:Object.keys(r.errors)[0]||"validation",code:"validation_failed"});let e=Object.keys(r.errors)[0];if(e){let t=document.getElementById(e);t&&t.focus(),eG("Erro de valida\xe7\xe3o. Corrija o campo ".concat(eq(e)," e tente novamente."),"assertive")}en.current&&en.current.focus();return}eh({}),ey(!0);let s=null;try{let e=await eF("contact");if(!e){e_({code:"missing_token"}),ey(!1);return}s={name:em.name,email:em.email,phone:em.phone,message:em.message,consent:em.consent,token:e,action:"contact"},await q(s),localStorage.setItem("lastContactSubmission",a.toString()),eC(0),B("contact",{name:em.name,email:em.email,phone:em.phone,message:em.message,consent:em.consent}),z({title:V("contact.toast_success_title"),description:V("contact.toast_success_desc"),duration:5e3}),eu({name:"",email:"",phone:"",message:"",consent:!1,honeypot:""}),ex({}),eh({}),ev({}),eE(null),eL(!0),eG("Formul\xe1rio enviado com sucesso! Recebemos sua mensagem e entraremos em contato em breve.","assertive"),setTimeout(()=>{ec.current&&ec.current.focus()},100),setTimeout(()=>eL(!1),5e3)}catch(t){var o;console.error("Form submission error:",t),e_(t),T(t,{action:"contact_form_submission",retryCount:ek,formData:{name:em.name,email:em.email}});let e=(null==(o=R(t))?void 0:o.userMessage)||"Erro ao enviar formul\xe1rio. Tente novamente.";eG("Erro no envio: ".concat(e),"assertive"),ek<3&&("NetworkError"===t.name||t.status>=500)&&U.storeForRetry(s)&&(z({title:"Mensagem salva",description:"Sua mensagem foi salva e ser\xe1 enviada quando a conex\xe3o for restabelecida.",duration:4e3}),eG("Mensagem salva para reenvio autom\xe1tico quando a conex\xe3o for restabelecida.")),(500===t.status||"NetworkError"===t.name)&&(eD(!0),eG("Erro cr\xedtico detectado. M\xe9todos de contato alternativos est\xe3o dispon\xedveis abaixo do formul\xe1rio."))}finally{ey(!1)}},eB=async()=>{if(ek>=3)return void eD(!0);eR(!0),eC(e=>e+1);try{let e=await U.retryFailedSubmissions();e.success&&e.retried>0?(z({title:"Sucesso!",description:"".concat(e.retried," mensagem(ns) enviada(s) com sucesso."),duration:4e3}),e_(null),eC(0)):await eW(new Event("submit"))}catch(e){console.error("Retry failed:",e),e_(e)}finally{eR(!1)}},eK=()=>{e_(null),eC(0)};(0,s.useEffect)(()=>H.subscribe(e=>{e&&(null==eA?void 0:eA.name)==="NetworkError"&&eB()}),[eA]),(0,s.useEffect)(()=>{let e=e=>{if("Escape"===e.key&&(eA?(eK(),eG("Erro dismissado")):eb&&eG("N\xe3o \xe9 poss\xedvel cancelar o envio em andamento")),"Enter"===e.key&&e.target===en.current){e.preventDefault();let t=Object.keys(eg)[0];if(t){let e=document.getElementById(t);e&&e.focus()}}};return Z.current&&Z.current.addEventListener("keydown",e),()=>{Z.current&&Z.current.removeEventListener("keydown",e)}},[eA,eb,eg]),(0,s.useEffect)(()=>{Object.keys(eg).length>0&&en.current&&setTimeout(()=>{var e;null==(e=en.current)||e.focus()},100)},[eg]),(0,s.useEffect)(()=>{void 0!==eH&&eG(eH?"Conex\xe3o com a internet restabelecida":"Conex\xe3o com a internet perdida")},[eH]);let eJ=[{icon:(0,r.jsx)(i.A,{className:"h-6 w-6 text-blue-600"}),title:V("contact.info.address_title"),details:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("a",{href:j.xR,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 hover:underline transition-colors cursor-pointer","aria-label":"Ver localiza\xe7\xe3o no Google Maps (nova aba)",children:(0,r.jsx)("span",{children:"string"==typeof j.x0.address?j.x0.address:V("contact.info.address_details")})})}),subDetails:(0,r.jsx)("a",{href:j.xR,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"\uD83D\uDCCD Ver no Google Maps"})},{icon:(0,r.jsx)(l.A,{className:"h-6 w-6 text-blue-600"}),title:V("contact.info.phone_title"),details:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>window.dispatchEvent(new Event("open-cta-modal")),className:"hover:underline font-medium text-left",children:"+55 33 99860-1427"}),(0,r.jsx)("span",{className:"sr-only",children:"+55 33 99860-1427"})]}),subDetails:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>window.dispatchEvent(new Event("open-cta-modal")),className:"text-blue-600 hover:underline flex items-center gap-1 text-sm font-semibold",children:[(0,r.jsx)(c.A,{size:14})," ",V("contact.info.phone_whatsapp")]}),(0,r.jsxs)("a",{href:"https://wa.me/message/EHTAAAAYH7SHJ1",target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:underline flex items-center gap-1 text-sm font-semibold",children:[(0,r.jsx)(c.A,{size:14})," Auto Atendimento WhatsApp"]}),(0,r.jsxs)("a",{href:"https://api.whatsapp.com/send/?phone=5533984207437&text&type=phone_number&app_absent=0",target:"_blank",rel:"noopener noreferrer",className:"text-red-600 hover:underline flex items-center gap-1 text-sm font-semibold",children:[(0,r.jsx)(c.A,{size:14})," Urg\xeancia - Enfermeira Ana (COREN-MG 834184)"]})]})},{icon:(0,r.jsx)(d.A,{className:"h-6 w-6 text-blue-600"}),title:V("contact.info.email_title"),details:(0,r.jsx)("a",{href:"mailto:saraivavision@gmail.com",className:"hover:underline",children:"saraivavision@gmail.com"}),subDetails:V("contact.info.email_sub")},{icon:(0,r.jsx)(m.A,{className:"h-6 w-6 text-blue-600"}),title:V("contact.info.hours_title"),details:V("contact.info.hours_details"),subDetails:V("contact.info.hours_sub")}];return(0,r.jsxs)("section",{id:"contact",className:"py-16 md:py-20 bg-subtle-gradient scroll-block-internal","aria-labelledby":"contact-heading",role:"region",children:[(0,r.jsx)("a",{href:"#form-title",className:"skip-link sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-blue-600 focus:text-white focus:px-4 focus:py-2 focus:rounded focus:no-underline",onClick:e=>{var t;e.preventDefault(),null==(t=document.getElementById("name"))||t.focus()},children:"Pular para o formul\xe1rio de contato"}),(0,r.jsx)("div",{ref:ed,"aria-live":"polite","aria-atomic":"true",className:"sr-only",role:"status",children:eM}),(0,r.jsxs)("div",{className:"container mx-auto px-[7%]",children:[(0,r.jsxs)("div",{className:"text-center mb-16",children:[(0,r.jsx)(o.P.h2,{id:"contact-heading",initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"mb-4",children:V("contact.title")}),(0,r.jsx)(o.P.p,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.2},className:"max-w-2xl mx-auto",children:(()=>{let e=V("contact.subtitle");try{return e.replace(/em contato/gi,"em​ contato")}catch(t){return e}})()})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,r.jsx)(o.P.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-soft-light",children:[(0,r.jsx)("h3",{className:"mb-6",id:"form-title",children:V("contact.form_title")}),(0,r.jsxs)("form",{ref:e=>{Z.current=e,$.current=e},onSubmit:eW,className:"space-y-5",noValidate:!0,"aria-labelledby":"form-title","aria-describedby":"form-description",children:[(0,r.jsx)("p",{id:"form-description",className:"sr-only",children:"Formul\xe1rio de contato para agendar consulta ou tirar d\xfavidas. Todos os campos marcados com asterisco s\xe3o obrigat\xf3rios."}),Object.keys(eg).length>0&&(0,r.jsxs)("div",{ref:en,className:"p-3 bg-red-50 border border-red-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",role:"alert","aria-live":"assertive","aria-labelledby":"form-errors-title",tabIndex:"-1",children:[(0,r.jsx)("h4",{id:"form-errors-title",className:"text-sm font-semibold text-red-800 mb-2",children:"Por favor, corrija os seguintes erros:"}),(0,r.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:Object.entries(eg).map(e=>{let[t,a]=e;return(0,r.jsx)("li",{children:(0,r.jsxs)("a",{href:"#".concat(t),className:"underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 rounded",onClick:e=>{var a;e.preventDefault(),null==(a=document.getElementById(t))||a.focus()},children:["• ",eq(t),": ",a]})},t)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"name",className:"block text-base font-medium text-slate-700 mb-2 md:text-sm md:mb-1.5",children:[V("contact.name_label","Nome completo")," ",(0,r.jsx)("span",{className:"text-red-500","aria-hidden":"true",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:em.name,onChange:ez,onBlur:eU,required:!0,autoComplete:"name",className:"form-input mobile-touch-input pr-10 ".concat(eg.name?"border-red-400 focus:ring-red-300":(null==(e=ef.name)?void 0:e.success)?"border-green-400 focus:ring-green-300":""),placeholder:V("contact.name_placeholder"),"aria-invalid":!!eg.name,"aria-describedby":eg.name?"error-name":(null==(t=ef.name)?void 0:t.success)?"success-name":"name-help","aria-required":"true",style:{fontSize:"16px",minHeight:"48px",padding:"12px 16px"}}),(0,r.jsx)("div",{id:"name-help",className:"sr-only",children:"Digite seu nome completo. Este campo \xe9 obrigat\xf3rio."}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:ej&&ep.name?(0,r.jsx)(u.A,{className:"h-4 w-4 text-gray-400 animate-spin","aria-hidden":"true"}):eg.name?(0,r.jsx)(g.A,{className:"h-4 w-4 text-red-500","aria-hidden":"true"}):(null==(a=ef.name)?void 0:a.success)?(0,r.jsx)(h.A,{className:"h-4 w-4 text-green-500","aria-hidden":"true"}):null})]}),eg.name&&(0,r.jsx)("p",{id:"error-name",className:"mt-2 text-sm text-red-600 font-medium",role:"alert",children:eg.name}),(null==(E=ef.name)?void 0:E.success)&&!eg.name&&(0,r.jsx)("p",{id:"success-name",className:"mt-2 text-sm text-green-600 font-medium",role:"status",children:"Nome v\xe1lido"})]}),(0,r.jsxs)("div",{className:"space-y-5 md:space-y-0 md:grid md:grid-cols-2 md:gap-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"email",className:"block text-base font-medium text-slate-700 mb-2 md:text-sm md:mb-1.5",children:[V("contact.email_label","E-mail")," ",(0,r.jsx)("span",{className:"text-red-500","aria-hidden":"true",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:em.email,onChange:ez,onBlur:eU,required:!0,autoComplete:"email",className:"form-input mobile-touch-input pr-10 ".concat(eg.email?"border-red-400 focus:ring-red-300":(null==(A=ef.email)?void 0:A.success)?"border-green-400 focus:ring-green-300":""),placeholder:V("contact.email_placeholder"),"aria-invalid":!!eg.email,"aria-describedby":eg.email?"error-email":(null==(_=ef.email)?void 0:_.success)?"success-email":"email-help","aria-required":"true",inputMode:"email",style:{fontSize:"16px",minHeight:"48px",padding:"12px 16px"}}),(0,r.jsx)("div",{id:"email-help",className:"sr-only",children:"Digite um endere\xe7o de e-mail v\xe1lido. Este campo \xe9 obrigat\xf3rio."}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:ej&&ep.email?(0,r.jsx)(u.A,{className:"h-4 w-4 text-gray-400 animate-spin","aria-hidden":"true"}):eg.email?(0,r.jsx)(g.A,{className:"h-4 w-4 text-red-500","aria-hidden":"true"}):(null==(I=ef.email)?void 0:I.success)?(0,r.jsx)(h.A,{className:"h-4 w-4 text-green-500","aria-hidden":"true"}):null})]}),eg.email&&(0,r.jsx)("p",{id:"error-email",className:"mt-2 text-sm text-red-600 font-medium",role:"alert",children:eg.email}),(null==(k=ef.email)?void 0:k.success)&&!eg.email&&(0,r.jsx)("p",{id:"success-email",className:"mt-2 text-sm text-green-600 font-medium",role:"status",children:"E-mail v\xe1lido"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"phone",className:"block text-base font-medium text-slate-700 mb-2 md:text-sm md:mb-1.5",children:[V("contact.phone_label","Telefone")," ",(0,r.jsx)("span",{className:"text-red-500","aria-hidden":"true",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",value:em.phone,onChange:ez,onBlur:eU,required:!0,autoComplete:"tel",className:"form-input mobile-touch-input pr-10 ".concat(eg.phone?"border-red-400 focus:ring-red-300":(null==(C=ef.phone)?void 0:C.success)?"border-green-400 focus:ring-green-300":""),placeholder:V("contact.phone_placeholder"),"aria-invalid":!!eg.phone,"aria-describedby":eg.phone?"error-phone":(null==(S=ef.phone)?void 0:S.success)?"success-phone":"phone-help","aria-required":"true",inputMode:"tel",style:{fontSize:"16px",minHeight:"48px",padding:"12px 16px"}}),(0,r.jsx)("div",{id:"phone-help",className:"sr-only",children:"Digite seu n\xfamero de telefone com DDD. Formato: (XX) XXXXX-XXXX. Este campo \xe9 obrigat\xf3rio."}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:ej&&ep.phone?(0,r.jsx)(u.A,{className:"h-4 w-4 text-gray-400 animate-spin","aria-hidden":"true"}):eg.phone?(0,r.jsx)(g.A,{className:"h-4 w-4 text-red-500","aria-hidden":"true"}):(null==(D=ef.phone)?void 0:D.success)?(0,r.jsx)(h.A,{className:"h-4 w-4 text-green-500","aria-hidden":"true"}):null})]}),eg.phone&&(0,r.jsx)("p",{id:"error-phone",className:"mt-2 text-sm text-red-600 font-medium",role:"alert",children:eg.phone}),(null==(L=ef.phone)?void 0:L.success)&&!eg.phone&&(0,r.jsx)("p",{id:"success-phone",className:"mt-2 text-sm text-green-600 font-medium",role:"status",children:"Telefone v\xe1lido"})]})]}),(0,r.jsx)("input",{type:"text",name:"honeypot",value:em.honeypot,onChange:ez,style:{display:"none"},tabIndex:"-1",autoComplete:"off","aria-hidden":"true"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"message",className:"block text-base font-medium text-slate-700 mb-2 md:text-sm md:mb-1.5",children:[V("contact.message_label","Mensagem")," ",(0,r.jsx)("span",{className:"text-red-500","aria-hidden":"true",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("textarea",{id:"message",name:"message",value:em.message,onChange:ez,onBlur:eU,required:!0,rows:"4",maxLength:"2000",className:"form-input mobile-touch-input pr-10 ".concat(eg.message?"border-red-400 focus:ring-red-300":(null==(M=ef.message)?void 0:M.success)?"border-green-400 focus:ring-green-300":""),placeholder:V("contact.message_placeholder"),"aria-invalid":!!eg.message,"aria-describedby":eg.message?"error-message":(null==(O=ef.message)?void 0:O.success)?"success-message":"message-help","aria-required":"true",style:{fontSize:"16px",minHeight:"120px",padding:"12px 16px",resize:"vertical",overscrollBehavior:"none"}}),(0,r.jsx)("div",{className:"absolute top-3 right-3",children:ej&&ep.message?(0,r.jsx)(u.A,{className:"h-4 w-4 text-gray-400 animate-spin","aria-hidden":"true"}):eg.message?(0,r.jsx)(g.A,{className:"h-4 w-4 text-red-500","aria-hidden":"true"}):(null==(P=ef.message)?void 0:P.success)?(0,r.jsx)(h.A,{className:"h-4 w-4 text-green-500","aria-hidden":"true"}):null})]}),(0,r.jsxs)("div",{className:"flex justify-between items-start mt-1",children:[(0,r.jsxs)("div",{className:"flex-1",children:[eg.message&&(0,r.jsx)("p",{id:"error-message",className:"text-sm text-red-600 font-medium",role:"alert",children:eg.message}),(null==(F=ef.message)?void 0:F.success)&&!eg.message&&(0,r.jsx)("p",{id:"success-message",className:"text-sm text-green-600 font-medium",role:"status",children:"Mensagem v\xe1lida"}),!eg.message&&!(null==(G=ef.message)?void 0:G.success)&&(0,r.jsx)("p",{id:"message-help",className:"text-xs text-slate-500",children:"M\xednimo 10 caracteres, m\xe1ximo 2000 caracteres"})]}),(0,r.jsxs)("div",{className:"text-xs text-slate-400 ml-2",children:[em.message.length,"/2000"]})]})]}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,r.jsx)(p.A,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Prote\xe7\xe3o de Dados Pessoais (LGPD)"}),(0,r.jsx)("p",{className:"text-xs text-blue-800 leading-relaxed",children:"Seus dados pessoais ser\xe3o utilizados exclusivamente para responder \xe0 sua consulta m\xe9dica. Coletamos apenas as informa\xe7\xf5es necess\xe1rias (nome, e-mail, telefone e mensagem) para que Dr. Philipe possa entrar em contato e fornecer orienta\xe7\xf5es oftalmol\xf3gicas adequadas."})]})]}),(0,r.jsxs)("div",{className:"bg-white p-3 rounded border border-blue-100 mb-3",children:[(0,r.jsx)("h5",{className:"text-xs font-medium text-slate-700 mb-2",children:"Seus direitos:"}),(0,r.jsxs)("ul",{className:"text-xs text-slate-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Acesso aos seus dados pessoais"}),(0,r.jsx)("li",{children:"• Corre\xe7\xe3o de dados incompletos ou incorretos"}),(0,r.jsx)("li",{children:"• Exclus\xe3o dos dados quando solicitado"}),(0,r.jsx)("li",{children:"• Portabilidade dos dados para outro prestador"})]})]}),(0,r.jsxs)("label",{className:"inline-flex items-start gap-3 cursor-pointer p-3 rounded-md border-2 transition-colors ".concat(eg.consent?"border-red-300 bg-red-50":em.consent?"border-green-300 bg-green-50":"border-blue-200 bg-white hover:bg-blue-25"),htmlFor:"consent",children:[(0,r.jsx)("input",{type:"checkbox",id:"consent",name:"consent",checked:em.consent,onChange:ez,"aria-invalid":!!eg.consent,"aria-describedby":eg.consent?"error-consent":"consent-description","aria-required":"true",className:"mt-0.5 h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500 focus:ring-2 focus:ring-offset-2",required:!0}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-slate-800",children:"Concordo com o tratamento dos meus dados pessoais *"}),(0,r.jsx)("p",{id:"consent-description",className:"text-xs text-slate-600 mt-1",children:"Ao marcar esta op\xe7\xe3o, voc\xea autoriza o uso dos seus dados conforme descrito acima, em conformidade com a Lei Geral de Prote\xe7\xe3o de Dados (LGPD - Lei 13.709/2018)."})]}),em.consent&&(0,r.jsx)(h.A,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0","aria-hidden":"true"})]}),eg.consent&&(0,r.jsxs)("p",{id:"error-consent",className:"mt-2 text-sm text-red-600 font-medium",role:"alert",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 inline mr-1"}),eg.consent]}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Para exercer seus direitos ou esclarecer d\xfavidas sobre o tratamento de dados, entre em contato conosco atrav\xe9s do e-mail: saraivavision@gmail.com"})]})}),(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[eH?(0,r.jsx)(x.A,{className:"h-4 w-4 text-green-600"}):(0,r.jsx)(f.A,{className:"h-4 w-4 text-red-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-slate-700",children:"Conex\xe3o"})]}),(0,r.jsx)("p",{className:"text-xs ".concat(eH?"text-green-600":"text-red-500"),children:eH?"Conectado \xe0 internet":"Sem conex\xe3o com a internet"}),!eH&&(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Verifique sua conex\xe3o para enviar o formul\xe1rio."})]}),(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-slate-700",children:V("contact.recaptcha_label","Verifica\xe7\xe3o de Seguran\xe7a")})]}),(0,r.jsx)("p",{className:"text-xs ".concat(eP?"text-green-600":"text-red-500"),children:eP?V("contact.recaptcha_ready","Prote\xe7\xe3o autom\xe1tica reCAPTCHA ativada"):V("contact.recaptcha_not_ready","Verifica\xe7\xe3o de seguran\xe7a indispon\xedvel. Tente novamente.")}),!eP&&(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Certifique-se de que est\xe1 conectado \xe0 internet e recarregue a p\xe1gina."})]}),eA&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(X,{error:eA,onRetry:ek<3?eB:void 0,onDismiss:eK,compact:!0})}),eS&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(l.A,{className:"h-4 w-4 text-yellow-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-yellow-800",children:"Contato Alternativo"})]}),(0,r.jsx)("p",{className:"text-xs text-yellow-700 mb-2",children:"N\xe3o foi poss\xedvel enviar sua mensagem. Entre em contato diretamente:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("a",{href:"tel:+5533998601427",className:"text-xs text-yellow-600 hover:text-yellow-800 underline",children:"+55 33 99860-1427"}),(0,r.jsx)("a",{href:"mailto:saraivavision@gmail.com",className:"text-xs text-yellow-600 hover:text-yellow-800 underline",children:"saraivavision@gmail.com"})]})]}),eT&&(0,r.jsx)("div",{ref:ec,className:"p-4 bg-green-50 border border-green-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",role:"alert","aria-live":"assertive",tabIndex:"-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"h-5 w-5 text-green-600","aria-hidden":"true"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-green-800",children:"Mensagem enviada com sucesso!"}),(0,r.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Sua mensagem foi recebida! Resposta em at\xe9 24h."})]})]})}),(0,r.jsxs)(w.$,{ref:ee,disabled:eb||!eH||!eP,type:"submit",size:"lg",className:"w-full flex items-center justify-center gap-2 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(eT?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"disabled:opacity-60"),"aria-busy":eb,"aria-describedby":"submit-status submit-help","aria-label":eI?"Tentando novamente, tentativa ".concat(ek+1," de 3"):eb?"Enviando mensagem, aguarde":eT?"Mensagem enviada com sucesso":eH?eP?"Enviar mensagem de contato":"Bot\xe3o desabilitado: carregando verifica\xe7\xe3o de seguran\xe7a":"Bot\xe3o desabilitado: sem conex\xe3o com a internet",children:[eb?(0,r.jsx)(u.A,{className:"h-5 w-5 animate-spin","aria-hidden":"true"}):eT?(0,r.jsx)(h.A,{className:"h-5 w-5","aria-hidden":"true"}):(0,r.jsx)(v.A,{className:"h-5 w-5","aria-hidden":"true"}),(0,r.jsx)("span",{children:eI?"Tentando novamente (".concat(ek+1,"/3)..."):eb?V("contact.sending_label","Enviando mensagem..."):eT?"Mensagem enviada!":eH?eP?V("contact.send_button","Enviar Mensagem"):"Carregando verifica\xe7\xe3o de seguran\xe7a...":"Sem conex\xe3o com a internet"})]}),(0,r.jsxs)("div",{id:"submit-status",className:"sr-only","aria-live":"polite","aria-atomic":"true",children:[eb&&"Enviando formul\xe1rio, aguarde...",eT&&"Formul\xe1rio enviado com sucesso",eA&&"Erro no envio do formul\xe1rio"]}),(0,r.jsx)("div",{id:"submit-help",className:"sr-only",children:"Para enviar o formul\xe1rio, certifique-se de que todos os campos obrigat\xf3rios est\xe3o preenchidos corretamente e que voc\xea tem conex\xe3o com a internet."})]})]})}),(0,r.jsxs)(o.P.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:"flex flex-col space-y-6",role:"complementary","aria-labelledby":"contact-options-heading",children:[(0,r.jsx)("div",{className:"sr-only",children:j.x0.name}),(0,r.jsx)("h3",{id:"contact-options-heading",className:"sr-only",children:"Op\xe7\xf5es de contato e agendamento"}),(0,r.jsx)("a",{href:j.x0.onlineSchedulingUrl,target:"_blank",rel:"noopener noreferrer",className:"block modern-card-alt p-6 group mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-2xl","aria-describedby":"online-scheduling-desc",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl","aria-hidden":"true",children:(0,r.jsx)(b.A,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-slate-800 group-hover:text-blue-700",children:V("contact.online_scheduling_title")}),(0,r.jsx)("div",{className:"mt-1",id:"online-scheduling-desc",children:V("contact.online_scheduling_desc")}),(0,r.jsx)("div",{className:"text-blue-600 text-sm mt-1 font-semibold",children:V("contact.online_scheduling_benefit")})]})]})}),(0,r.jsx)("a",{href:"https://chatgpt.com/g/g-quepJB90J-saraiva-vision-clinica-oftalmologica?model=gpt-4o",target:"_blank",rel:"noopener noreferrer",className:"block modern-card-alt p-6 group focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 rounded-2xl","aria-describedby":"chatbot-desc",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"p-3 bg-green-100 rounded-xl","aria-hidden":"true",children:(0,r.jsx)(y.A,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-bold text-slate-800 group-hover:text-green-700",children:V("contact.chatbot_title")}),(0,r.jsx)("div",{className:"mt-1",id:"chatbot-desc",children:V("contact.chatbot_desc")}),(0,r.jsx)("div",{className:"text-green-600 text-sm mt-1 font-semibold",children:V("contact.chatbot_availability")})]})]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",role:"list","aria-label":"Informa\xe7\xf5es de contato",children:eJ.map((e,t)=>(0,r.jsx)(o.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4,delay:.1*t},className:"modern-card p-6 focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2",role:"listitem",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"icon-container","aria-hidden":"true",children:e.icon}),(0,r.jsxs)("div",{className:"min-w-0 break-words leading-relaxed",children:[(0,r.jsx)("h4",{className:"font-bold text-slate-800",children:e.title}),(0,r.jsx)("div",{className:"mt-1 text-sm text-wrap",children:e.details}),(0,r.jsx)("div",{className:"text-slate-500 text-sm mt-0.5 text-wrap",children:e.subDetails})]})]})},t))})]})]})]})]})}},69147:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(37876),s=a(14232),o=a(8632),n=a(34846),i=a(10458);let l=e=>{let{sources:t=[],alt:a,className:o,width:n,height:i,loading:l="lazy",decoding:c="async",sizes:d,priority:m=!1,onError:u,onLoad:g,...h}=e,[p,x]=(0,s.useState)(0),[f,v]=(0,s.useState)(t[0]||""),[b,y]=(0,s.useState)(!1),[j,w]=(0,s.useState)(new Set([t[0]]));return b||!t.length?(0,r.jsx)("div",{className:"".concat(o," flex items-center justify-center bg-slate-100 text-slate-400"),style:{width:n,height:i},...h,children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-50",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),(0,r.jsx)("p",{className:"text-xs",children:"Imagem n\xe3o dispon\xedvel"})]})}):(0,r.jsx)("img",{src:f,alt:a,className:o,width:n,height:i,loading:m?"eager":l,decoding:c,sizes:d,onError:e=>{let a=(e=>{let t=e.lastIndexOf(".");if(-1===t)return null;let a=e.substring(0,t);for(let r of({avif:["webp","png","jpg","jpeg"],webp:["png","jpg","jpeg"],png:["webp","jpg","jpeg"],jpg:["webp","png","jpeg"],jpeg:["webp","png","jpg"]})[e.substring(t+1).toLowerCase()]||["png","jpg","webp"]){let e="".concat(a,".").concat(r);if(!j.has(e))return e}return null})(f);if(a){w(e=>new Set([...e,a])),v(a),y(!1);return}let r=p+1;if(r<t.length){let e=t[r];x(r),v(e),w(t=>new Set([...t,e])),y(!1);return}y(!0),console.warn("All image sources and format fallbacks failed for: ".concat(t.join(", "))),u&&u(e)},onLoad:e=>{y(!1),g&&g(e)},...h})},c=()=>{let{t:e}=(0,n.Bd)(),t=e("about.features",{returnObjects:!0})||[],a=[e("about.alt1"),e("about.alt2"),e("about.alt3"),e("about.alt4")];return(0,r.jsxs)("section",{id:"about",className:"section-padding bg-section-gradient relative overflow-hidden scroll-block-internal",children:[(0,r.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-br from-blue-400/8 to-cyan-400/8 rounded-full blur-3xl animate-pulse-soft"}),(0,r.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-br from-cyan-400/8 to-teal-400/8 rounded-full blur-3xl animate-pulse-soft",style:{animationDelay:"1000ms"}}),(0,r.jsx)("div",{className:"absolute top-10 right-20 w-32 h-32 bg-gradient-to-br from-cyan-300/6 to-blue-400/6 rounded-full blur-2xl animate-float"}),(0,r.jsx)("div",{className:"absolute bottom-10 left-20 w-24 h-24 bg-gradient-to-br from-green-300/6 to-emerald-400/6 rounded-full blur-2xl animate-float-delayed"})]}),(0,r.jsxs)("div",{className:"container mx-auto px-[7%] relative z-10 scroll-block-internal",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-20 items-center mb-20",children:[(0,r.jsxs)(o.P.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:"relative",children:[(0,r.jsx)("div",{className:"absolute -top-12 -left-12 w-72 h-72 bg-gradient-to-br from-blue-200/30 to-indigo-200/30 rounded-full filter blur-3xl"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"rounded-2xl overflow-hidden shadow-3d hover:shadow-3d-hover card-hover h-64",children:(0,r.jsx)(l,{sources:["/fachada.webp"],alt:a[0],className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",sizes:"(min-width: 1024px) 33vw, 50vw",loading:"lazy",decoding:"async"})}),(0,r.jsx)("div",{className:"rounded-2xl overflow-hidden shadow-3d hover:shadow-3d-hover card-hover h-40",children:(0,r.jsx)(l,{sources:["/autorrefrator.png"],alt:a[1],className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",sizes:"(min-width: 1024px) 33vw, 50vw",loading:"lazy",decoding:"async"})})]}),(0,r.jsxs)("div",{className:"space-y-4 mt-8",children:[(0,r.jsx)("div",{className:"rounded-2xl overflow-hidden shadow-3d hover:shadow-3d-hover card-hover h-40",children:(0,r.jsx)(l,{sources:["/consultorio.jpg"],alt:a[2],className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",sizes:"(min-width: 1024px) 33vw, 50vw",loading:"lazy",decoding:"async"})}),(0,r.jsx)("div",{className:"rounded-2xl overflow-hidden shadow-3d hover:shadow-3d-hover card-hover h-64",children:(0,r.jsx)(l,{sources:["/topografo.png"],alt:a[3],className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",sizes:"(min-width: 1024px) 33vw, 50vw",loading:"lazy",decoding:"async"})})]})]})]}),(0,r.jsxs)(o.P.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},className:"flex flex-col space-y-8",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-3 px-6 py-3 rounded-full bg-gradient-to-r from-slate-600 via-slate-700 to-slate-800 text-white mb-4 w-fit shadow-md border border-slate-700/50",children:[(0,r.jsx)("span",{className:"text-xl",children:"✦"}),(0,r.jsx)("span",{className:"font-bold text-sm tracking-wide uppercase",children:e("about.tag")})]}),(0,r.jsx)("h2",{className:"text-4xl md:text-5xl font-black leading-tight text-slate-900",children:(0,r.jsx)("span",{className:"bg-gradient-to-r from-slate-600 via-slate-700 to-slate-800 bg-clip-text text-transparent",children:e("about.title")})}),(0,r.jsxs)("div",{className:"space-y-6 text-slate-700 leading-relaxed",children:[(0,r.jsx)("p",{className:"text-lg font-medium",children:e("about.p1")}),(0,r.jsx)("p",{className:"text-lg",children:e("about.p2")}),(0,r.jsx)("p",{className:"text-slate-600 leading-relaxed",children:e("about.p3")})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 pt-6",children:Array.isArray(t)&&t.map((e,t)=>(0,r.jsxs)(o.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4,delay:.1*t},className:"flex items-center gap-4 p-3 rounded-xl bg-white/60 backdrop-blur-sm border border-slate-200/50 shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-r from-slate-600 to-slate-800 flex items-center justify-center shadow-md",children:(0,r.jsx)(i.A,{className:"h-5 w-5 text-white"})}),(0,r.jsx)("span",{className:"text-slate-800 font-semibold",children:e})]},t))})]})]}),(0,r.jsx)(o.P.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8,ease:[.04,.62,.23,.98]},className:"max-w-6xl mx-auto group",style:{perspective:"1500px"},children:(0,r.jsxs)(o.P.div,{whileHover:{scale:1.03},transition:{type:"spring",stiffness:200,damping:30},className:"relative bg-slate-100/80 backdrop-blur-xl rounded-3xl shadow-2xl border-t border-l border-slate-200/50",children:[(0,r.jsx)("div",{className:"absolute -inset-px rounded-3xl border border-transparent bg-gradient-to-br from-slate-700/20 via-slate-800/20 to-slate-900/20 blur-lg group-hover:blur-xl transition-all duration-500"}),(0,r.jsx)("div",{className:"relative p-8 md:p-12",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12 items-center",children:[(0,r.jsx)(o.P.div,{className:"lg:col-span-1 flex justify-center",style:{transformStyle:"preserve-3d"},children:(0,r.jsxs)(o.P.div,{className:"relative w-full max-w-xs",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:20},children:[(0,r.jsx)("div",{className:"absolute -inset-4 bg-gradient-to-r from-slate-600/30 via-slate-700/30 to-slate-800/30 rounded-3xl blur-xl",style:{transform:"translateZ(-50px)"}}),(0,r.jsx)("div",{className:"relative aspect-[3/4] overflow-hidden rounded-3xl shadow-2xl bg-gradient-to-b from-slate-50 to-white",style:{transform:"translateZ(0)"},children:(0,r.jsx)(l,{sources:["/img/drphilipe_jaleco Medium.jpeg","/img/drphilipe_jaleco2 Medium.jpeg","/img/drphilipe_novo.jpg","/img/drphilipe_terno.jpeg"],alt:e("about.doctor.alt"),width:300,height:400,className:"w-full h-full object-cover object-top transition-transform duration-500",loading:"lazy",decoding:"async"})}),(0,r.jsx)("div",{className:"absolute -top-6 -right-6 w-12 h-12 bg-gradient-to-br from-slate-600 to-slate-800 rounded-full opacity-80 animate-pulse",style:{transform:"translateZ(20px)"}}),(0,r.jsx)("div",{className:"absolute -bottom-4 -left-4 w-8 h-8 bg-gradient-to-br from-slate-500 to-slate-700 rounded-full opacity-70 animate-bounce",style:{animationDuration:"3s",transform:"translateZ(-20px)"}})]})}),(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6 text-center lg:text-left",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-3xl md:text-4xl font-black text-slate-900 mb-2",children:e("about.doctor.heading")}),(0,r.jsxs)("p",{className:"text-xl font-bold bg-gradient-to-r from-slate-600 to-slate-800 bg-clip-text text-transparent mb-4",children:[e("about.doctor.name")," – ",e("about.doctor.title")]})]}),(0,r.jsx)("div",{className:"prose prose-slate max-w-none",children:(0,r.jsx)("p",{className:"text-slate-700 leading-relaxed whitespace-pre-line text-lg",children:e("about.doctor.description")})})]})]})})]})})]})]})}},90323:(e,t,a)=>{a.d(t,{wl:()=>d});var r=a(14232),s=a(65364);let o=["GOOGLE_PLACE_ID_PLACEHOLDER","your_google_place_id_here","PLACEHOLDER"],n=new Map,i=e=>{if(!e)return null;let t=String(e).trim();return!t||o.some(e=>t.includes(e))?null:t},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(let e of t){let t=i(e);if(t)return t}return null},c={placeId:null,limit:5,autoFetch:!0,refreshInterval:null,onError:null,onSuccess:null};function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{placeId:t=c.placeId,limit:a=c.limit,autoFetch:o=c.autoFetch,refreshInterval:i=c.refreshInterval,onError:d=c.onError,onSuccess:m=c.onSuccess}=e,u=(0,r.useMemo)(()=>({placeId:t,limit:a,autoFetch:o,refreshInterval:i,onError:d,onSuccess:m}),[t,a,o,i,d,m]),[g,h]=(0,r.useState)([]),[p,x]=(0,r.useState)(null),[f,v]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),[j,w]=(0,r.useState)(null),[N,E]=(0,r.useState)(0),A=(0,r.useRef)(null),_=(0,r.useRef)(null),I=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l(e.placeId,u.placeId,s.env.GOOGLE_PLACE_ID,s.env.VITE_GOOGLE_PLACE_ID);if(!t){console.info("Google Reviews: Using fallback data (API not configured)"),y(null),h([]),x(null);return}let a="".concat(t,"-").concat(e.limit||u.limit||5),r=n.get(a);if(!e.forceRefresh&&r&&Date.now()-r.timestamp<3e5){console.log("Google Reviews: Using cached data"),h(r.reviews),x(r.stats),w(new Date(r.timestamp)),v(!1),y(null);return}A.current&&A.current.abort(),A.current=new AbortController,v(!0),y(null);let o=e.retryAttempt||0;try{var i;let r,o=new URLSearchParams({placeId:t,limit:e.limit||u.limit||5,language:"pt-BR"}),l=await fetch("".concat((null==(i=s.env.VITE_API_URL)?void 0:i.replace("/api",""))||"http://localhost:3001","/api/google-reviews?").concat(o),{signal:A.current.signal,headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error("HTTP ".concat(l.status,": ").concat(l.statusText));try{let e=l.headers.get("content-type");if(!e||!e.includes("application/json")){let t=await l.text();throw console.error("Expected JSON but got:",e,t.substring(0,200)),Error("Server returned non-JSON response")}r=await l.json()}catch(e){throw console.error("JSON parsing error:",e),Error("Invalid response format from server")}if(!r.success)throw Error(r.error||"Failed to fetch reviews");let{reviews:c,stats:d}=r.data,m={reviews:c||[],stats:d,timestamp:Date.now()};n.set(a,m),h(c||[]),d&&x(d),w(new Date),u.onSuccess&&u.onSuccess(r.data)}catch(s){if("AbortError"===s.name)return;console.error("Google Reviews fetch error:",s);let t=s.message.includes("network")||s.message.includes("timeout")||s.message.includes("fetch")||s.message.includes("ECONNREFUSED")||s.message.includes("ENOTFOUND")||s.response&&s.response.status>=500,a=s.message.includes("401")||s.message.includes("403")||s.message.includes("Unauthorized")||s.message.includes("Forbidden");if(o<3&&t&&!a){console.log("Retrying request (".concat(o+1,"/").concat(3,")...")),E(o+1),setTimeout(()=>{I({...e,retryAttempt:o+1})},1e3*Math.pow(2,o));return}a&&console.warn("Authentication error with Google Reviews API:",s.message);let r=Error(s.message||"Failed to fetch reviews from Google Places API");y(r),E(0),u.onError&&u.onError(r)}finally{0===o&&v(!1)}},[u]),R=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l(e.placeId,u.placeId,s.env.GOOGLE_PLACE_ID,s.env.VITE_GOOGLE_PLACE_ID);if(t)try{var a,r,o;let n=new URLSearchParams({placeId:t,period:e.period||"30",includeDistribution:null==(r=e.includeDistribution)||r,includeTrends:null!=(o=e.includeTrends)&&o}),i=await fetch("".concat((null==(a=s.env.VITE_API_URL)?void 0:a.replace("/api",""))||"http://localhost:3001","/api/google-reviews-stats?").concat(n));if(!i.ok)throw Error("HTTP ".concat(i.status,": ").concat(i.statusText));let l=await i.json();l.success&&x(l.data)}catch(e){console.error("Failed to fetch review stats:",e)}},[u.placeId]),k=(0,r.useCallback)(async()=>{await I({forceRefresh:!0})},[I]),C=(0,r.useCallback)(e=>g.filter(t=>{if(e.minRating&&t.starRating<e.minRating||e.maxRating&&t.starRating>e.maxRating||void 0!==e.hasResponse&&t.hasResponse!==e.hasResponse)return!1;if(e.keywords&&e.keywords.length>0){let a=(t.comment||"").toLowerCase();if(!e.keywords.some(e=>a.includes(e.toLowerCase())))return!1}if(e.dateRange){let a=new Date(t.createTime);if(e.dateRange.start&&a<e.dateRange.start||e.dateRange.end&&a>e.dateRange.end)return!1}return!0}),[g]),S=(0,r.useCallback)(e=>g.filter(t=>t.starRating===e),[g]),D=(0,r.useCallback)(()=>{let e=new Date;return e.setDate(e.getDate()-30),g.filter(t=>!!t.createTime&&new Date(t.createTime)>=e)},[g]);return(0,r.useEffect)(()=>{u.autoFetch&&I()},[u.autoFetch]),(0,r.useEffect)(()=>{if(u.refreshInterval&&u.refreshInterval>0)return _.current=setInterval(()=>{I()},u.refreshInterval),()=>{_.current&&clearInterval(_.current)}},[u.refreshInterval]),(0,r.useEffect)(()=>()=>{A.current&&A.current.abort(),_.current&&clearInterval(_.current)},[]),{reviews:g,stats:p,hasMore:!1,loading:f,error:b,lastFetch:j,retryCount:N,isRetrying:N>0,fetchReviews:I,fetchStats:R,refresh:k,filterReviews:C,getReviewsByRating:S,getRecentReviews:D,config:{placeId:l(u.placeId,s.env.GOOGLE_PLACE_ID,s.env.VITE_GOOGLE_PLACE_ID),limit:u.limit}}}}}]);