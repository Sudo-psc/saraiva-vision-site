"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8447],{7487:(e,o,a)=>{a.d(o,{pO:()=>l});var t=a(59642);let r=null,n=0;function l(e){return r?console.log("\uD83D\uDD04 [DEBUG] Retornando promise existente do Google Maps"):(r=(async()=>{if(window.google&&window.google.maps)return console.log("✅ [DEBUG] Google Maps j\xe1 carregado"),window.google.maps;let o=(0,t.a6)(e)?e:await (0,t.Wq)();if(!(0,t.a6)(o))throw console.error("❌ [ERROR] Google Maps API key is required"),Error("Google Maps API key is required");return function e(o){return n++,console.log("\uD83D\uDE80 [DEBUG] Iniciando carregamento do Google Maps (tentativa ".concat(n,"/").concat(3,")")),new Promise((a,t)=>{let l=setTimeout(()=>{console.error("⏰ [ERROR] Timeout ap\xf3s ".concat(1e4,"ms")),n<3?(console.log("\uD83D\uDD04 [DEBUG] Tentando novamente..."),r=null,e(o).then(a).catch(t)):t(Error("Timeout: Google Maps n\xe3o carregou em ".concat(1e4,"ms ap\xf3s ").concat(3," tentativas")))},1e4),s="initGoogleMaps_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));window[s]=async()=>{clearTimeout(l),console.log("✅ [DEBUG] Callback executado com sucesso");try{window.google&&window.google.maps?(console.log("\uD83D\uDCDA [DEBUG] Carregando bibliotecas necess\xe1rias..."),await window.google.maps.importLibrary("marker"),console.log("✅ [DEBUG] Biblioteca marker carregada"),await window.google.maps.importLibrary("places"),console.log("✅ [DEBUG] Biblioteca places carregada"),n=0,a(window.google.maps)):(console.error("❌ [ERROR] Google object n\xe3o dispon\xedvel ap\xf3s callback"),t(Error("Google Maps object n\xe3o dispon\xedvel ap\xf3s callback")))}catch(e){console.error("❌ [ERROR] Erro ao carregar bibliotecas:",e),t(Error("Erro ao carregar bibliotecas do Google Maps: ".concat(e.message)))}delete window[s]};let i=document.createElement("script");i.async=!0,i.defer=!0,i.id="google-maps-script-".concat(Date.now()),i.crossOrigin="anonymous",i.referrerPolicy="no-referrer-when-downgrade",i.src="https://maps.googleapis.com/maps/api/js?key=".concat(o,"&v=weekly&loading=async&callback=").concat(s,"&libraries=places,geometry"),i.onerror=e=>{clearTimeout(l),console.error("❌ [ERROR] Falha ao carregar script:",e),delete window[s],n<3?(console.log("\uD83D\uDD04 [DEBUG] Tentando estrat\xe9gia alternativa..."),r=null,setTimeout(()=>{(console.log("\uD83D\uDD27 [DEBUG] Usando estrat\xe9gia alternativa de carregamento"),new Promise(async(e,a)=>{let t=document.createElement("script");t.async=!0,t.src="https://maps.googleapis.com/maps/api/js?key=".concat(o,"&v=weekly"),t.onload=async()=>{console.log("✅ [DEBUG] Estrat\xe9gia alternativa: script carregado");try{let o=0,t=async()=>{o++,window.google&&window.google.maps&&window.google.maps.importLibrary?(console.log("✅ [DEBUG] Estrat\xe9gia alternativa: Google Maps dispon\xedvel"),await window.google.maps.importLibrary("marker"),await window.google.maps.importLibrary("places"),n=0,e(window.google.maps)):o<50?setTimeout(t,100):a(Error("Google Maps n\xe3o dispon\xedvel ap\xf3s estrat\xe9gia alternativa"))};t()}catch(e){console.error("❌ [ERROR] Erro na estrat\xe9gia alternativa:",e),a(Error("Estrat\xe9gia alternativa falhou: ".concat(e.message)))}},t.onerror=e=>{console.error("❌ [ERROR] Estrat\xe9gia alternativa falhou:",e),a(Error("Estrat\xe9gia alternativa de carregamento falhou"))},document.head.appendChild(t)})).then(a).catch(t)},1e3)):t(Error("Falha ao carregar Google Maps API: ".concat(e.message||"Unknown error")))},console.log("\uD83D\uDCCB [DEBUG] Adicionando script ao DOM:",i.src),document.head.appendChild(i)})}(o)})()).catch(()=>{r=null}),r}},59642:(e,o,a)=>{a.d(o,{Wq:()=>c,a6:()=>s});var t=a(65364);let r=null,n=null;function l(e){return"string"==typeof e?e.trim():""}function s(e){let o=l(e);return o.startsWith("AIza")&&o.length>=30}async function i(){try{let e=await fetch(function(){if(void 0!==t&&(null==t.env?void 0:"production")==="production")return"/api/config";let e="";return(void 0!==t&&t.env&&(e=l(t.env.NEXT_PUBLIC_API_BASE_URL||t.env.VITE_API_BASE_URL)),e&&e.startsWith("http"))?"".concat(e.replace(/\/$/,""),"/config"):"/api/config"}(),{method:"GET",headers:{Accept:"application/json"},cache:"no-store",credentials:"omit"});if(!e.ok)throw Error("Runtime config request failed with status ".concat(e.status));let o=await e.json(),a=l(null==o?void 0:o.googleMapsApiKey);if(s(a))return a;throw Error("Runtime configuration did not return a valid Google Maps API key")}catch(e){throw console.error("❌ Failed to fetch runtime Google Maps API key:",e),e}}async function c(){if(r)return r;let e=function(){if(void 0!==t&&(null==t.env?void 0:"production")==="production")return"";let e="";return void 0!==t&&t.env&&(e=l(t.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY||t.env.GOOGLE_MAPS_API_KEY||t.env.VITE_GOOGLE_MAPS_API_KEY)),s(e)?e:""}();return e?r=e:(n||(n=i().then(e=>(r=e,e)).catch(e=>{throw n=null,e})),n)}},78447:(e,o,a)=>{a.d(o,{A:()=>g});var t=a(37876),r=a(14232),n=a(79890),l=a(21271),s=a(8584),i=a(96023),c=a(7487),d=a(59642);let g=e=>{let{height:o=340}=e,a=(0,r.useRef)(null),[g,p]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),[w,h]=(0,r.useState)(!1),[v,f]=(0,r.useState)(null),E="https://staticmap.openstreetmap.de/staticmap.php?center=".concat(i.x0.latitude,",").concat(i.x0.longitude,"&zoom=17&size=640x360&markers=").concat(i.x0.latitude,",").concat(i.x0.longitude,",lightblue1");return((0,r.useEffect)(()=>{let e=!0,o=new AbortController,t=o=>{e&&(o&&p(o),h(!0),m(!1))};return(async()=>{let r;try{r=await (0,d.Wq)()}catch(e){console.error("[GoogleMap] Falha ao resolver Google Maps API key:",e),t("Mapa interativo indispon\xedvel: chave da API ausente.");return}if(!(0,d.a6)(r))return t("Mapa interativo indispon\xedvel: chave da API inv\xe1lida.");try{let a=await fetch("/api/maps-health",{signal:o.signal,headers:{Accept:"application/json"}});if(a.ok){let o=await a.json();if(!e)return;if(f(o),"healthy"!==o.status)return void t("Mapa interativo temporariamente indispon\xedvel (".concat(o.status,")."))}}catch(e){(void 0).DEV&&console.warn("[GoogleMap] Falha ao verificar sa\xfade do servi\xe7o:",e)}if(!a.current)return t("N\xe3o foi poss\xedvel carregar o mapa neste momento.");try{var n,l;if(await (0,c.pO)(r),!e||!a.current)return;let o=new window.google.maps.Map(a.current,{zoom:17,center:{lat:i.x0.latitude,lng:i.x0.longitude},mapId:(void 0).VITE_GOOGLE_MAP_ID||void 0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1}),t=new window.google.maps.Marker({position:{lat:i.x0.latitude,lng:i.x0.longitude},map:o,title:i.x0.name});i.fO&&(null==(l=window.google)||null==(n=l.maps)?void 0:n.places)&&new window.google.maps.places.PlacesService(o).getDetails({placeId:i.fO,fields:["geometry","name","url"]},(e,a)=>{var r;a===window.google.maps.places.PlacesServiceStatus.OK&&(null==e||null==(r=e.geometry)?void 0:r.location)?(o.setCenter(e.geometry.location),t.setPosition(e.geometry.location)):(void 0).DEV&&console.warn("[GoogleMap] Place ID n\xe3o p\xf4de ser confirmado:",a)}),m(!1),p(null)}catch(e){t("N\xe3o foi poss\xedvel carregar o mapa: ".concat(e.message))}})(),()=>{e=!1,o.abort()}},[]),w||g)?(0,t.jsx)(()=>(0,t.jsx)("div",{className:"relative w-full bg-gradient-to-br from-blue-50 to-slate-100 rounded-lg overflow-hidden",style:{height:o},children:(0,t.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6",children:(0,t.jsxs)("div",{className:"text-center space-y-4 max-w-sm",children:[(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto",children:(0,t.jsx)(n.A,{className:"w-8 h-8 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Localiza\xe7\xe3o da Cl\xednica"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:[i.x0.address.street,(0,t.jsx)("br",{}),i.x0.address.city,", ",i.x0.address.state,(0,t.jsx)("br",{}),"CEP: ",i.x0.address.zip]}),(0,t.jsx)("div",{className:"overflow-hidden rounded-lg border border-slate-200 shadow-sm",children:(0,t.jsx)("img",{src:E,alt:"Mapa est\xe1tico da regi\xe3o da cl\xednica ".concat(i.x0.name),className:"w-full h-auto",loading:"lazy"})}),((null==v?void 0:v.status)||g)&&(0,t.jsxs)("p",{className:"mt-3 text-xs text-gray-500 flex items-center justify-center gap-1",children:[(0,t.jsx)(l.A,{className:"w-4 h-4"}),g||"Mapa interativo indispon\xedvel no momento."]}),(0,t.jsx)("div",{className:"space-y-2 mt-4",children:(0,t.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(i.x0.latitude,",").concat(i.x0.longitude,"&query_place_id=").concat(i.fO||""),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,t.jsx)(s.A,{className:"w-4 h-4"}),"Abrir no Google Maps"]})})]})]})})}),{}):(0,t.jsxs)("div",{className:"relative w-full",style:{height:o},children:[u&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-slate-500 bg-gray-50",children:"Carregando mapa..."}),(0,t.jsx)("div",{ref:a,className:"w-full h-full rounded"})]})}}}]);