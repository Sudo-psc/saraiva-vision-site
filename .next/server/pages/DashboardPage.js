"use strict";(()=>{var a={};a.id=1373,a.ids=[1373,3220],a.modules={8645:(a,b,c)=>{c.d(b,{As:()=>f}),c(8732);var d=c(82015);c(13162);let e=(0,d.createContext)({}),f=()=>{let a=(0,d.useContext)(e);if(!a)throw Error("useAuth must be used within an AuthProvider");return a}},8732:a=>{a.exports=require("react/jsx-runtime")},13162:(a,b,c)=>{c.d(b,{E:()=>h});let d=require("@supabase/supabase-js"),e=process.env.NEXT_PUBLIC_SUPABASE_URL,f=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,g=process.env.SUPABASE_SERVICE_ROLE_KEY;(0,d.createClient)(e,f);let h=(0,d.createClient)(e,g,{auth:{autoRefreshToken:!1,persistSession:!1}})},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},43698:(a,b,c)=>{c.d(b,{E:()=>e});var d=c(8732);c(82015);let e=({children:a,variant:b="default",className:c="",...e})=>(0,d.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${(a=>{switch(a){case"success":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"destructive":return"bg-red-100 text-red-800 border-red-200";case"outline":return"bg-transparent text-gray-700 border-gray-300";case"secondary":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}})(b)} ${c}`,...e,children:a})},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},54822:a=>{a.exports=require("react-router-dom")},66070:(a,b,c)=>{c.r(b),c.d(b,{config:()=>Q,default:()=>M,getServerSideProps:()=>P,getStaticPaths:()=>O,getStaticProps:()=>N,handler:()=>Y,reportWebVitals:()=>R,routeModule:()=>X,unstable_getServerProps:()=>V,unstable_getServerSideProps:()=>W,unstable_getStaticParams:()=>U,unstable_getStaticPaths:()=>T,unstable_getStaticProps:()=>S});var d={};c.r(d),c.d(d,{default:()=>K});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(625),k=c.n(j),l=c(8732),m=c(82015),n=c(54822),o=c(8645);let p=({children:a,className:b="",...c})=>(0,l.jsx)("div",{className:`bg-white rounded-lg border border-gray-200 shadow-sm ${b}`,...c,children:a}),q=({children:a,className:b="",...c})=>(0,l.jsx)("div",{className:`px-6 py-4 border-b border-gray-200 ${b}`,...c,children:a}),r=({children:a,className:b="",...c})=>(0,l.jsx)("h3",{className:`text-lg font-semibold text-gray-900 ${b}`,...c,children:a}),s=({children:a,className:b="",...c})=>(0,l.jsx)("div",{className:`px-6 py-4 ${b}`,...c,children:a});var t=c(43698);let u=({children:a,variant:b="default",className:c="",...d})=>(0,l.jsx)("div",{className:`p-4 rounded-lg border ${(a=>{switch(a){case"destructive":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"success":return"bg-green-50 border-green-200 text-green-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}})(b)} ${c}`,...d,children:a}),v=({children:a,className:b="",...c})=>(0,l.jsx)("div",{className:`text-sm ${b}`,...c,children:a});var w=c(74952);let x=({health:a})=>(0,l.jsxs)(p,{children:[(0,l.jsx)(q,{children:(0,l.jsxs)(r,{className:"flex items-center gap-2",children:[(0,l.jsx)(w.Ilq,{className:"h-5 w-5"}),"System Health"]})}),(0,l.jsx)(s,{children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:`flex items-center gap-2 px-3 py-2 rounded-full ${(a=>{switch(a){case"healthy":return"text-green-600 bg-green-100";case"degraded":return"text-yellow-600 bg-yellow-100";case"unhealthy":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(a?.overall?.status)}`,children:[(a=>{switch(a){case"healthy":return(0,l.jsx)(w.rAV,{className:"h-5 w-5"});case"degraded":return(0,l.jsx)(w.hcu,{className:"h-5 w-5"});case"unhealthy":return(0,l.jsx)(w.Jpz,{className:"h-5 w-5"});default:return(0,l.jsx)(w.zD7,{className:"h-5 w-5"})}})(a?.overall?.status),(0,l.jsx)("span",{className:"font-medium capitalize",children:a?.overall?.status||"Unknown"})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[a?.overall?.upServices||0,"/",a?.overall?.totalServices||0," services operational"]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[a?.overall?.uptime||0,"% uptime"]})]})})]}),y=({title:a,value:b,subtitle:c,icon:d,trend:e})=>(0,l.jsx)(p,{children:(0,l.jsx)(s,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-600",children:a}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:b}),(0,l.jsx)("p",{className:`text-sm ${(a=>{switch(a){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-gray-600"}})(e)}`,children:c})]}),(0,l.jsx)("div",{className:"text-gray-400",children:d})]})})}),z=({appointments:a})=>(0,l.jsxs)(p,{children:[(0,l.jsx)(q,{children:(0,l.jsx)(r,{children:"Appointment Status (24h)"})}),(0,l.jsx)(s,{children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:"Confirmed"}),(0,l.jsx)(t.E,{variant:"success",children:a?.confirmed||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:"Pending"}),(0,l.jsx)(t.E,{variant:"warning",children:a?.pending||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:"Cancelled"}),(0,l.jsx)(t.E,{variant:"destructive",children:a?.cancelled||0})]}),(0,l.jsx)("div",{className:"pt-2 border-t",children:(0,l.jsxs)("div",{className:"flex justify-between items-center font-medium",children:[(0,l.jsx)("span",{children:"Conversion Rate"}),(0,l.jsxs)("span",{children:[a?.conversionRate||0,"%"]})]})})]})})]}),A=({queue:a})=>(0,l.jsxs)(p,{children:[(0,l.jsx)(q,{children:(0,l.jsx)(r,{children:"Message Queue Status"})}),(0,l.jsx)(s,{children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:"Pending"}),(0,l.jsx)(t.E,{variant:a?.metrics?.current?.pending>10?"warning":"default",children:a?.metrics?.current?.pending||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:"Sent (24h)"}),(0,l.jsx)(t.E,{variant:"success",children:a?.metrics?.recent24h?.successful||0})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:"Failed (24h)"}),(0,l.jsx)(t.E,{variant:"destructive",children:a?.metrics?.recent24h?.failed||0})]}),(0,l.jsx)("div",{className:"pt-2 border-t",children:(0,l.jsxs)("div",{className:"flex justify-between items-center font-medium",children:[(0,l.jsx)("span",{children:"Success Rate"}),(0,l.jsxs)("span",{children:[a?.metrics?.performance?.successRate||100,"%"]})]})})]})})]}),B=({health:a})=>(0,l.jsxs)(p,{children:[(0,l.jsx)(q,{children:(0,l.jsx)(r,{children:"External Services"})}),(0,l.jsx)(s,{children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a?.services?.map((a,b)=>(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:a.service}),a.responseTime&&(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:[a.responseTime,"ms"]}),a.error&&(0,l.jsx)("div",{className:"text-sm text-red-500",children:a.error})]}),(a=>{switch(a){case"up":return(0,l.jsx)(t.E,{variant:"success",children:"Online"});case"down":return(0,l.jsx)(t.E,{variant:"destructive",children:"Offline"});default:return(0,l.jsx)(t.E,{variant:"secondary",children:"Unknown"})}})(a.status)]},b))})})]}),C=({alerts:a})=>(0,l.jsxs)(p,{children:[(0,l.jsx)(q,{children:(0,l.jsxs)(r,{className:"flex items-center gap-2",children:[(0,l.jsx)(w.hcu,{className:"h-5 w-5"}),"Active Alerts"]})}),(0,l.jsx)(s,{children:(0,l.jsx)("div",{className:"space-y-3",children:a.map((a,b)=>(0,l.jsx)(u,{variant:"error"===a.type?"destructive":"default",children:(0,l.jsx)(v,{children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{children:a.message}),(0,l.jsx)(t.E,{variant:"outline",children:a.severity})]})})},b))})})]}),D=()=>{let{data:{metrics:a,health:b,queue:c},loading:d,error:e,lastUpdated:f,isRefreshing:g,refresh:h}=((a=3e4)=>{let[b,c]=(0,m.useState)({metrics:null,health:null,queue:null}),[d,e]=(0,m.useState)(!0),[f,g]=(0,m.useState)(null),[h,i]=(0,m.useState)(null),[j,k]=(0,m.useState)(!1),l=(0,m.useRef)(null),n=(0,m.useRef)(null),o=(0,m.useCallback)(async(a=!1)=>{try{n.current&&n.current.abort(),n.current=new AbortController,a?k(!0):e(!0),g(null);let[b,d,f]=await Promise.all([fetch("/api/dashboard/metrics",{signal:n.current.signal,headers:{"Cache-Control":"no-cache"}}),fetch("/api/dashboard/health",{signal:n.current.signal,headers:{"Cache-Control":"no-cache"}}),fetch("/api/dashboard/queue",{signal:n.current.signal,headers:{"Cache-Control":"no-cache"}})]);if(!b.ok||!d.ok||!f.ok){let a=[];throw b.ok||a.push("metrics"),d.ok||a.push("health"),f.ok||a.push("queue"),Error(`Failed to fetch: ${a.join(", ")}`)}let[h,j,l]=await Promise.all([b.json(),d.json(),f.json()]);if(!h.success||!j.success||!l.success)throw Error("Invalid response format from API");c({metrics:h.data,health:j.data,queue:l.data}),i(new Date),g(null)}catch(a){"AbortError"!==a.name&&(console.error("Dashboard fetch error:",a),g(a.message))}finally{e(!1),k(!1)}},[]),p=(0,m.useCallback)(()=>{o(!0)},[o]),q=(0,m.useCallback)(()=>{l.current&&clearInterval(l.current),l.current=setInterval(()=>{o(!1)},a)},[o,a]),r=(0,m.useCallback)(()=>{l.current&&(clearInterval(l.current),l.current=null)},[]);return(0,m.useEffect)(()=>(o(!1),q(),()=>{r(),n.current&&n.current.abort()}),[o,q,r]),(0,m.useEffect)(()=>{let a=()=>{document.hidden?r():(o(!1),q())};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[o,q,r]),{data:b,loading:d,error:f,lastUpdated:h,isRefreshing:j,refresh:p,startAutoRefresh:q,stopAutoRefresh:r}})();return d?(0,l.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,l.jsx)(w.krw,{className:"h-8 w-8 animate-spin"}),(0,l.jsx)("span",{className:"ml-2",children:"Loading dashboard..."})]}):e?(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)(u,{variant:"destructive",children:[(0,l.jsx)(w.hcu,{className:"h-4 w-4"}),(0,l.jsxs)(v,{children:["Failed to load dashboard: ",e,(0,l.jsx)("button",{onClick:h,className:"ml-2 underline hover:no-underline",children:"Retry"})]})]})}):(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Operational Dashboard"}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("button",{onClick:h,disabled:g,className:"flex items-center gap-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,l.jsx)(w.e9t,{className:`h-4 w-4 ${g?"animate-spin":""}`}),g?"Refreshing...":"Refresh"]}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["Last updated: ",f?.toLocaleTimeString()]})]})]}),(0,l.jsx)(x,{health:b}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsx)(y,{title:"Contacts (24h)",value:a?.contacts?.total24h||0,subtitle:`${a?.contacts?.hourlyRate||0}/hour avg`,icon:(0,l.jsx)(w.zWC,{className:"h-4 w-4"}),trend:"neutral"}),(0,l.jsx)(y,{title:"Appointments (24h)",value:a?.appointments?.total24h||0,subtitle:`${a?.appointments?.conversionRate||0}% conversion`,icon:(0,l.jsx)(w.VvS,{className:"h-4 w-4"}),trend:"neutral"}),(0,l.jsx)(y,{title:"Message Delivery",value:`${a?.messaging?.deliveryRate||100}%`,subtitle:`${a?.messaging?.sent||0}/${a?.messaging?.totalMessages||0} sent`,icon:(0,l.jsx)(w.vEG,{className:"h-4 w-4"}),trend:a?.messaging?.deliveryRate>=95?"positive":"negative"}),(0,l.jsx)(y,{title:"System Errors",value:a?.system?.errors24h||0,subtitle:`${a?.system?.errorRate||0}/hour avg`,icon:(0,l.jsx)(w.hcu,{className:"h-4 w-4"}),trend:a?.system?.errors24h===0?"positive":"negative"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsx)(z,{appointments:a?.appointments}),(0,l.jsx)(A,{queue:c})]}),(0,l.jsx)(B,{health:b}),c?.alerts&&c.alerts.length>0&&(0,l.jsx)(C,{alerts:c.alerts})]})};var E=c(13162);let F=({isOpen:a,onClose:b,onUserCreated:c})=>{let[d,e]=(0,m.useState)({email:"",password:"",confirmPassword:"",fullName:"",role:"admin"}),[f,g]=(0,m.useState)(!1),[h,i]=(0,m.useState)(!1),[j,k]=(0,m.useState)(!1),[n,o]=(0,m.useState)(""),[p,q]=(0,m.useState)(""),r=a=>{let{name:b,value:c}=a.target;e(a=>({...a,[b]:c})),n&&o(""),p&&q("")},s=async a=>{if(a.preventDefault(),d.email&&d.password&&d.fullName?d.password.length<8?(o("A senha deve ter pelo menos 8 caracteres"),!1):d.password!==d.confirmPassword?(o("As senhas n\xe3o coincidem"),!1):!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(o("Email inv\xe1lido"),!1):(o("Todos os campos obrigat\xf3rios devem ser preenchidos"),!1)){k(!0),o(""),q("");try{let{data:a,error:f}=await E.E.auth.admin.createUser({email:d.email,password:d.password,email_confirm:!0,user_metadata:{full_name:d.fullName}});if(f)throw f;let{error:g}=await E.E.from("profiles").insert({id:a.user.id,email:d.email,full_name:d.fullName,role:d.role,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(g)throw await E.E.auth.admin.deleteUser(a.user.id),g;await E.E.rpc("log_event",{p_event_type:"admin_user_created",p_event_data:{created_user_id:a.user.id,created_user_email:d.email,created_user_role:d.role},p_severity:"info",p_source:"user_management"}),q("Usu\xe1rio criado com sucesso!"),e({email:"",password:"",confirmPassword:"",fullName:"",role:"admin"}),c&&c({id:a.user.id,email:d.email,full_name:d.fullName,role:d.role,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_login:null}),setTimeout(()=>{b(),q("")},2e3)}catch(a){console.error("Error creating user:",a),a.message?.includes("User already registered")?o("Este email j\xe1 est\xe1 registrado no sistema"):a.message?.includes("Password should be at least")?o("A senha deve ter pelo menos 6 caracteres"):o("Erro ao criar usu\xe1rio. Tente novamente.")}finally{k(!1)}}},t=()=>{j||(e({email:"",password:"",confirmPassword:"",fullName:"",role:"admin"}),o(""),q(""),b())};return a?(0,l.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,l.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t}),(0,l.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,l.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:(0,l.jsx)(w.KJW,{className:"h-6 w-6 text-blue-600"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Criar Novo Usu\xe1rio Admin"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Adicione um novo administrador ao sistema"})]})]}),(0,l.jsx)("button",{onClick:t,disabled:j,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:(0,l.jsx)(w.X,{className:"h-6 w-6"})})]}),n&&(0,l.jsxs)("div",{className:"mb-4 flex items-start p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,l.jsx)(w.RIJ,{className:"h-5 w-5 text-red-400 mr-2 mt-0.5 flex-shrink-0"}),(0,l.jsx)("div",{className:"text-sm text-red-700",children:n})]}),p&&(0,l.jsxs)("div",{className:"mb-4 flex items-start p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,l.jsx)(w.rAV,{className:"h-5 w-5 text-green-400 mr-2 mt-0.5 flex-shrink-0"}),(0,l.jsx)("div",{className:"text-sm text-green-700",children:p})]}),(0,l.jsxs)("form",{onSubmit:s,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(w.KJW,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:d.fullName,onChange:r,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do administrador",required:!0,disabled:j})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(w.gE4,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)("input",{type:"email",id:"email",name:"email",value:d.email,onChange:r,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"admin@saraivavision.com.br",required:!0,disabled:j})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fun\xe7\xe3o *"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(w.ekZ,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsxs)("select",{id:"role",name:"role",value:d.role,onChange:r,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:j,children:[(0,l.jsx)("option",{value:"admin",children:"Admin"}),(0,l.jsx)("option",{value:"super_admin",children:"Super Admin"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha *"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(w.c_I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)("input",{type:f?"text":"password",id:"password",name:"password",value:d.password,onChange:r,className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"M\xednimo 8 caracteres",required:!0,disabled:j,minLength:8}),(0,l.jsx)("button",{type:"button",onClick:()=>g(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:j,children:f?(0,l.jsx)(w.X_F,{className:"w-4 h-4"}):(0,l.jsx)(w.kU3,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Senha *"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(w.c_I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)("input",{type:h?"text":"password",id:"confirmPassword",name:"confirmPassword",value:d.confirmPassword,onChange:r,className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Repita a senha",required:!0,disabled:j}),(0,l.jsx)("button",{type:"button",onClick:()=>i(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:j,children:h?(0,l.jsx)(w.X_F,{className:"w-4 h-4"}):(0,l.jsx)(w.kU3,{className:"w-4 h-4"})})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,l.jsx)("button",{type:"submit",onClick:s,disabled:j,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w.krw,{className:"w-4 h-4 mr-2 animate-spin"}),"Criando..."]}):"Criar Usu\xe1rio"}),(0,l.jsx)("button",{type:"button",onClick:t,disabled:j,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:"Cancelar"})]})]})]})}):null},G=()=>{let{profile:a,isSuperAdmin:b}=(0,o.As)(),{loading:c,error:d,listUsers:e,updateUserRole:f,toggleUserStatus:g,clearError:h}=(()=>{let{user:a,profile:b}=(0,o.As)(),[c,d]=(0,m.useState)(!1),[e,f]=(0,m.useState)(null),g=(0,m.useCallback)(async(c,d={})=>{if(!a||!b)throw Error("User not authenticated");let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:c,requesterId:a.id,...d})}),f=await e.json();if(!f.success)throw Error(f.error?.message||"Operation failed");return f.data},[a,b]),h=(0,m.useCallback)(async a=>{try{return d(!0),f(null),await g("verify_admin",{userId:a})}catch(a){throw f(a.message),a}finally{d(!1)}},[g]),i=(0,m.useCallback)(async a=>{try{return d(!0),f(null),(await g("get_user_profile",{userId:a})).profile}catch(a){throw f(a.message),a}finally{d(!1)}},[g]),j=(0,m.useCallback)(async(a,b)=>{try{return d(!0),f(null),(await g("update_user_role",{userId:a,newRole:b})).profile}catch(a){throw f(a.message),a}finally{d(!1)}},[g]),k=(0,m.useCallback)(async a=>{try{return d(!0),f(null),(await g("toggle_user_status",{userId:a})).profile}catch(a){throw f(a.message),a}finally{d(!1)}},[g]),l=(0,m.useCallback)(async(a={})=>{try{return d(!0),f(null),(await g("list_users",{filters:a})).users}catch(a){throw f(a.message),a}finally{d(!1)}},[g]);return{loading:c,error:e,clearError:(0,m.useCallback)(()=>{f(null)},[]),verifyAdminAccess:h,getUserProfile:i,updateUserRole:j,toggleUserStatus:k,listUsers:l}})(),[i,j]=(0,m.useState)([]),[k,n]=(0,m.useState)(!0),[p,q]=(0,m.useState)(""),[r,s]=(0,m.useState)(""),[t,u]=(0,m.useState)("all"),[v,x]=(0,m.useState)("all"),[y,z]=(0,m.useState)(!1),[A,B]=(0,m.useState)(null);(0,m.useEffect)(()=>{C()},[]),(0,m.useEffect)(()=>{d&&q(d)},[d]);let C=async()=>{try{n(!0),q(""),h();let a=await e();j(a||[])}catch(a){console.error("Error fetching users:",a),q("Failed to load users")}finally{n(!1)}},D=async(a,b)=>{try{q(""),h();let c=await f(a,b);j(b=>b.map(b=>b.id===a?c:b))}catch(a){console.error("Error updating user role:",a),q("Failed to update user role")}},E=async(a,b)=>{try{q(""),h();let b=await g(a);j(c=>c.map(c=>c.id===a?b:c))}catch(a){console.error("Error updating user status:",a),q("Failed to update user status")}},G=i.filter(a=>{let b=(a.email||"").toLowerCase().includes(r.toLowerCase())||(a.full_name||"").toLowerCase().includes(r.toLowerCase()),c="all"===t||a.role===t,d="all"===v||"active"===v&&a.is_active||"inactive"===v&&!a.is_active;return b&&c&&d});return k||c?(0,l.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("span",{className:"ml-2",children:"Loading users..."})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage admin users and permissions"})]}),b()&&(0,l.jsxs)("button",{onClick:()=>z(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,l.jsx)(w.FWt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),p&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(w.hcu,{className:"h-5 w-5 text-red-400 mr-2"}),(0,l.jsx)("div",{className:"text-sm text-red-700",children:p})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(w.vji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,l.jsx)("input",{type:"text",placeholder:"Search users...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:r,onChange:a=>s(a.target.value)})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t,onChange:a=>u(a.target.value),children:[(0,l.jsx)("option",{value:"all",children:"All Roles"}),(0,l.jsx)("option",{value:"user",children:"User"}),(0,l.jsx)("option",{value:"admin",children:"Admin"}),(0,l.jsx)("option",{value:"super_admin",children:"Super Admin"})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:v,onChange:a=>x(a.target.value),children:[(0,l.jsx)("option",{value:"all",children:"All Status"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"})]})})]})}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),b()&&(0,l.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(c=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,l.jsx)(w.zWC,{className:"h-5 w-5 text-blue-600"})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:c.full_name||"No name"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:c.email})]})]})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(a=>{let b={super_admin:"bg-red-100 text-red-800 border-red-200",admin:"bg-blue-100 text-blue-800 border-blue-200",user:"bg-gray-100 text-gray-800 border-gray-200"};return(0,l.jsxs)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${b[a]||b.user}`,children:[(a=>{switch(a){case"super_admin":return(0,l.jsx)(w.oxo,{className:"h-4 w-4 text-red-600"});case"admin":return(0,l.jsx)(w.ekZ,{className:"h-4 w-4 text-blue-600"});default:return(0,l.jsx)(w.ExS,{className:"h-4 w-4 text-gray-400"})}})(a),(0,l.jsx)("span",{className:"ml-1 capitalize",children:(a||"user").replace("_"," ")})]})})(c.role)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(a=>(0,l.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w.rAV,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w.hcu,{className:"h-3 w-3 mr-1"}),"Inactive"]})}))(c.is_active)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.last_login?new Date(c.last_login).toLocaleDateString():(0,l.jsx)("span",{className:"text-gray-400",children:"Never"})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(c.created_at).toLocaleDateString()}),b()&&(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,l.jsxs)("select",{value:c.role,onChange:a=>D(c.id,a.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c.id===a.id,children:[(0,l.jsx)("option",{value:"user",children:"User"}),(0,l.jsx)("option",{value:"admin",children:"Admin"}),(0,l.jsx)("option",{value:"super_admin",children:"Super Admin"})]}),(0,l.jsx)("button",{onClick:()=>E(c.id,c.is_active),disabled:c.id===a.id,className:`p-1 rounded ${c.is_active?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} disabled:opacity-50 disabled:cursor-not-allowed`,title:c.is_active?"Deactivate user":"Activate user",children:c.is_active?(0,l.jsx)(w.kU3,{className:"h-4 w-4"}):(0,l.jsx)(w.X_F,{className:"h-4 w-4"})})]})})]},c.id))})]})}),0===G.length&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(w.zWC,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:"No users found matching your criteria"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(w.zWC,{className:"h-8 w-8 text-blue-600"}),(0,l.jsxs)("div",{className:"ml-3",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:i.length})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(w.ekZ,{className:"h-8 w-8 text-green-600"}),(0,l.jsxs)("div",{className:"ml-3",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:i.filter(a=>"admin"===a.role||"super_admin"===a.role).length})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(w.rAV,{className:"h-8 w-8 text-green-600"}),(0,l.jsxs)("div",{className:"ml-3",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:i.filter(a=>a.is_active).length})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(w.zD7,{className:"h-8 w-8 text-yellow-600"}),(0,l.jsxs)("div",{className:"ml-3",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Recent Logins"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:i.filter(a=>a.last_login&&new Date(a.last_login)>new Date(Date.now()-6048e5)).length})]})]})})]}),(0,l.jsx)(F,{isOpen:y,onClose:()=>z(!1),onUserCreated:a=>{j(b=>[a,...b]),z(!1)}})]})},H=({children:a,requiredRole:b="user",requireDashboardAccess:c=!1,fallbackPath:d="/admin/login"})=>{let{user:e,profile:f,loading:g,hasRole:h,canAccessDashboard:i,isAuthenticated:j,isProfileLoaded:k}=(0,o.As)(),m=(0,n.useLocation)();return g||j&&!k?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(w.krw,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Verifying access..."})]})}):j?f&&f.is_active?h(b)?c&&!i()?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",children:[(0,l.jsx)(w.ekZ,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Dashboard Access Restricted"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have access to the admin dashboard. Admin role is required."}),(0,l.jsx)(n.Navigate,{to:"/",replace:!0})]})}):a:(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",children:[(0,l.jsx)(w.ekZ,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,l.jsxs)("p",{className:"text-gray-600 mb-4",children:["You don't have the required permissions to access this page. Required role: ",(0,l.jsx)("span",{className:"font-medium",children:b})]}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Your current role: ",(0,l.jsx)("span",{className:"font-medium",children:f.role})]}),(0,l.jsx)(n.Navigate,{to:"/",replace:!0})]})}):(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",children:[(0,l.jsx)(w.hcu,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Account Inactive"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Your account is not active or could not be loaded. Please contact an administrator for assistance."}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Retry"})]})}):(0,l.jsx)(n.Navigate,{to:d,state:{from:m.pathname},replace:!0})},I=({navigation:a,profile:b,onLogout:c})=>(0,l.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200 pt-5 pb-4 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center flex-shrink-0 px-4",children:[(0,l.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,l.jsx)(w.ekZ,{className:"h-5 w-5 text-white"})}),(0,l.jsx)("span",{className:"ml-2 text-lg font-semibold text-gray-900",children:"Admin Panel"})]}),(0,l.jsx)("nav",{className:"mt-8 flex-1 px-2 space-y-1",children:a.map(a=>{let b=a.icon;return(0,l.jsxs)(n.Link,{to:a.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${a.current?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[(0,l.jsx)(b,{className:`mr-3 flex-shrink-0 h-5 w-5 ${a.current?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`}),a.name]},a.name)})}),(0,l.jsx)("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,l.jsx)(w.zWC,{className:"h-5 w-5 text-blue-600"})}),(0,l.jsxs)("div",{className:"ml-3 flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-900",children:b?.full_name||"Admin"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:b?.role?.replace("_"," ")})]}),(0,l.jsx)("button",{onClick:c,className:"ml-2 p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Sign out",children:(0,l.jsx)(w.nUv,{className:"h-4 w-4"})})]})})]}),J=()=>(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),(0,l.jsx)("p",{className:"text-gray-600",children:"System configuration and preferences"})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(w.wB_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Settings Panel"}),(0,l.jsx)("p",{className:"text-gray-500",children:"Settings configuration will be implemented in a future update."})]})})]}),K=()=>{let{user:a,profile:b,signOut:c,isAdmin:d,isSuperAdmin:e}=(0,o.As)(),[f,g]=(0,m.useState)(!1),h=(0,n.useLocation)(),i=async()=>{try{await c()}catch(a){console.error("Logout error:",a)}},j=[{name:"Dashboard",href:"/admin/dashboard",icon:w.HxJ,current:"/admin/dashboard"===h.pathname},...e()?[{name:"User Management",href:"/admin/users",icon:w.zWC,current:"/admin/users"===h.pathname}]:[],{name:"Settings",href:"/admin/settings",icon:w.wB_,current:"/admin/settings"===h.pathname}];return(0,l.jsx)(H,{requiredRole:"admin",requireDashboardAccess:!0,children:(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsxs)("div",{className:`fixed inset-0 flex z-40 md:hidden ${f?"":"hidden"}`,children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>g(!1)}),(0,l.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[(0,l.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,l.jsx)("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>g(!1),children:(0,l.jsx)(w.X,{className:"h-6 w-6 text-white"})})}),(0,l.jsx)(I,{navigation:j,profile:b,onLogout:i})]})]}),(0,l.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:(0,l.jsx)(I,{navigation:j,profile:b,onLogout:i})}),(0,l.jsxs)("div",{className:"md:pl-64 flex flex-col flex-1",children:[(0,l.jsx)("div",{className:"sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-50",children:(0,l.jsx)("button",{className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",onClick:()=>g(!0),children:(0,l.jsx)(w.W1t,{className:"h-6 w-6"})})}),(0,l.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Saraiva Vision - Admin Dashboard"}),b?.role&&(0,l.jsxs)("span",{className:"ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,l.jsx)(w.ekZ,{className:"h-3 w-3 mr-1"}),b.role.replace("_"," ").toUpperCase()]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[(0,l.jsx)(w.IrQ,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400 ring-2 ring-white"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:b?.full_name||"Admin User"}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:a?.email})]}),(0,l.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,l.jsx)(w.zWC,{className:"h-4 w-4 text-blue-600"})})]})]})]})})}),(0,l.jsx)("main",{className:"flex-1",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)(n.Routes,{children:[(0,l.jsx)(n.Route,{path:"/",element:(0,l.jsx)(n.Navigate,{to:"/admin/dashboard",replace:!0})}),(0,l.jsx)(n.Route,{path:"/dashboard",element:(0,l.jsx)(D,{})}),e()&&(0,l.jsx)(n.Route,{path:"/users",element:(0,l.jsx)(G,{})}),(0,l.jsx)(n.Route,{path:"/settings",element:(0,l.jsx)(J,{})}),(0,l.jsx)(n.Route,{path:"*",element:(0,l.jsx)(n.Navigate,{to:"/admin/dashboard",replace:!0})})]})})})]})]})})};var L=c(12289);let M=(0,g.M)(d,"default"),N=(0,g.M)(d,"getStaticProps"),O=(0,g.M)(d,"getStaticPaths"),P=(0,g.M)(d,"getServerSideProps"),Q=(0,g.M)(d,"config"),R=(0,g.M)(d,"reportWebVitals"),S=(0,g.M)(d,"unstable_getStaticProps"),T=(0,g.M)(d,"unstable_getStaticPaths"),U=(0,g.M)(d,"unstable_getStaticParams"),V=(0,g.M)(d,"unstable_getServerProps"),W=(0,g.M)(d,"unstable_getServerSideProps"),X=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/DashboardPage",pathname:"/DashboardPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),Y=(0,L.U)({srcPage:"/DashboardPage",config:Q,userland:d,routeModule:X,getStaticPaths:O,getStaticProps:N,getServerSideProps:P})},82015:a=>{a.exports=require("react")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[5611,157,4952],()=>b(b.s=66070));module.exports=c})();