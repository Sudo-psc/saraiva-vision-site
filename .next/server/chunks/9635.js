"use strict";exports.id=9635,exports.ids=[9635],exports.modules={59635:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(82015),g=c(63220),h=c(77843),i=c(27293),j=c(74952),k=a([g,h]);[g,h]=k.then?(await k)():k;let l=({episode:a,mode:b="card",onClose:c=()=>{},className:d=""})=>{let{t:k}=(0,h.useTranslation)(),[l,m]=(0,f.useState)(!1),[n,o]=(0,f.useState)(0),[p,q]=(0,f.useState)(0),[r,s]=(0,f.useState)(1),[t,u]=(0,f.useState)(!1),[v,w]=(0,f.useState)(!1),[x,y]=(0,f.useState)(1),[z,A]=(0,f.useState)(!1),[B,C]=(0,f.useState)(null),D=(0,f.useRef)(null),E=(0,f.useRef)(null);(0,f.useEffect)(()=>{let a=D.current;if(!a)return;let b=()=>o(a.currentTime),c=()=>q(a.duration),d=()=>w(!0),e=()=>w(!1),f=()=>m(!1),g=()=>{w(!1),m(!1),C("Falha ao carregar o \xe1udio. Tente novamente mais tarde.")};return a.addEventListener("timeupdate",b),a.addEventListener("loadedmetadata",c),a.addEventListener("loadstart",d),a.addEventListener("canplay",e),a.addEventListener("ended",f),a.addEventListener("error",g),()=>{a.removeEventListener("timeupdate",b),a.removeEventListener("loadedmetadata",c),a.removeEventListener("loadstart",d),a.removeEventListener("canplay",e),a.removeEventListener("ended",f),a.removeEventListener("error",g)}},[]),(0,f.useEffect)(()=>{let b=b=>{if(b?.detail&&b.detail.id!==a.id){let a=D.current;a&&!a.paused&&(a.pause(),m(!1))}};return window.addEventListener("sv:audio-play",b),()=>window.removeEventListener("sv:audio-play",b)},[a.id]);let F=!!(a&&a.src),G=async()=>{if(!F)return;let b=D.current;if(l)b.pause(),m(!1);else try{window.dispatchEvent(new CustomEvent("sv:audio-play",{detail:{id:a.id}})),b.playsInline=!0,b.muted=!1,b.readyState<2&&(w(!0),await new Promise((a,c)=>{let d=()=>{b.removeEventListener("canplay",d),b.removeEventListener("error",e),w(!1),a()},e=()=>{b.removeEventListener("canplay",d),b.removeEventListener("error",e),w(!1),c(Error("Failed to load audio"))};b.addEventListener("canplay",d),b.addEventListener("error",e),b.load()})),await b.play(),m(!0)}catch(a){console.warn("Audio play failed:",a),m(!1),C("Falha ao reproduzir o \xe1udio. Tente novamente.")}},H=a=>{let b=D.current;b.currentTime=Math.max(0,Math.min(p,b.currentTime+a))},I=a=>{let b=E.current.getBoundingClientRect(),c=(a.clientX-b.left)/b.width;D.current.currentTime=c*p},J=()=>{let a=D.current;t?(a.volume=r,u(!1)):(a.volume=0,u(!0))},K=a=>{let b=parseFloat(a.target.value);s(b),D.current.volume=b,u(0===b)},L=()=>{D.current.currentTime=0,o(0)},M=()=>{let b=document.createElement("a");b.href=a.src,b.download=`${a.title}.mp3`,document.body.appendChild(b),b.click(),document.body.removeChild(b)},N=a=>{let b=Math.floor(a/60),c=Math.floor(a%60);return`${b}:${c.toString().padStart(2,"0")}`},O=p?n/p*100:0;(0,f.useEffect)(()=>()=>{try{D.current&&D.current.pause()}catch(a){}},[]);let P="modal"===b;(0,i.y)(P);let Q="inline"===b||"compact"===b,R=()=>(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("div",{ref:E,className:"w-full h-2 bg-gray-200 rounded-full cursor-pointer group",onClick:I,role:"slider","aria-label":"Progresso do \xe1udio","aria-valuenow":Math.round(O),"aria-valuemin":0,"aria-valuemax":100,tabIndex:0,children:(0,e.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all group-hover:from-blue-600 group-hover:to-blue-700 relative",style:{width:`${O}%`},children:(0,e.jsx)("div",{className:"absolute -right-1 top-1/2 -translate-y-1/2 w-4 h-4 bg-white border-2 border-blue-500 rounded-full shadow-sm opacity-0 group-hover:opacity-100 transition-opacity"})})}),(0,e.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,e.jsx)("span",{children:N(n)}),(0,e.jsx)("span",{children:N(p)})]})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("button",{onClick:L,className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Reiniciar epis\xf3dio",title:"Reiniciar do in\xedcio",children:(0,e.jsx)(j.Hbd,{className:"w-4 h-4"})}),(0,e.jsx)("button",{onClick:()=>H(-10),className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Voltar 10 segundos",children:(0,e.jsx)(j.L92,{className:"w-4 h-4"})}),(0,e.jsx)("button",{onClick:G,disabled:v||!F,className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-full flex items-center justify-center transition-all shadow-lg","aria-label":F?l?"Pausar":"Reproduzir":"\xc1udio indispon\xedvel",children:v?(0,e.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):l?(0,e.jsx)(j.vRz,{className:"w-5 h-5"}):(0,e.jsx)(j.jGG,{className:"w-5 h-5 ml-0.5"})}),(0,e.jsx)("button",{onClick:()=>H(10),className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Avan\xe7ar 10 segundos",children:(0,e.jsx)(j.xPj,{className:"w-4 h-4"})})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)("button",{onClick:J,className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":t?"Ativar som":"Silenciar",children:t?(0,e.jsx)(j.XL$,{className:"w-4 h-4"}):(0,e.jsx)(j.jIq,{className:"w-4 h-4"})}),!Q&&(0,e.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:t?0:r,onChange:K,className:"w-16 h-1 bg-gray-200 rounded-full appearance-none cursor-pointer","aria-label":"Volume"})]}),a.src&&(0,e.jsx)("button",{onClick:M,className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Baixar epis\xf3dio",title:"Baixar epis\xf3dio",children:(0,e.jsx)(j.f5X,{className:"w-4 h-4"})}),!Q&&(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("button",{onClick:()=>A(!z),className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Configura\xe7\xf5es de velocidade",title:"Velocidade de reprodu\xe7\xe3o",children:(0,e.jsx)(j.wB_,{className:"w-4 h-4"})}),(0,e.jsx)(g.AnimatePresence,{children:z&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute bottom-full right-0 mb-2 bg-white rounded-xl shadow-lg border border-gray-200 p-3 min-w-[120px] z-50",children:[(0,e.jsx)("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Velocidade"}),(0,e.jsx)("div",{className:"space-y-1",children:[.5,.75,1,1.25,1.5,2].map(a=>(0,e.jsxs)("button",{onClick:()=>(a=>{y(a),D.current.playbackRate=a,A(!1)})(a),className:`w-full text-left px-2 py-1 rounded-lg text-sm transition-colors ${x===a?"bg-blue-50 text-blue-600 font-semibold border border-blue-200":"text-gray-600 hover:bg-gray-100"}`,children:[a,"x"]},a))})]})})]}),(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[a.spotifyUrl&&(0,e.jsx)("a",{href:a.spotifyUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Ouvir no Spotify",children:(0,e.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,e.jsx)("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.3c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.42 1.56-.299.421-1.02.599-1.559.3z"})})}),a.applePodcastsUrl&&(0,e.jsx)("a",{href:a.applePodcastsUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Ouvir no Apple Podcasts",children:(0,e.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,e.jsx)("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.182c5.42 0 9.818 4.398 9.818 9.818S17.42 21.818 12 21.818 2.182 17.42 2.182 12 6.58 2.182 12 2.182zm0 3.273c-3.6 0-6.545 2.945-6.545 6.545S8.4 18.545 12 18.545s6.545-2.945 6.545-6.545S15.6 5.455 12 5.455zm0 2.182c2.4 0 4.364 1.964 4.364 4.363S14.4 16.364 12 16.364 7.636 14.4 7.636 12 9.6 7.637 12 7.637zm0 1.636c-1.5 0-2.727 1.227-2.727 2.727S10.5 14.727 12 14.727 14.727 13.5 14.727 12 13.5 9.273 12 9.273z"})})})]})]})]})]}),S=(0,e.jsx)("audio",{ref:D,src:a.src,preload:"none",playsInline:!0,className:"hidden"});return P?(0,e.jsx)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:c,children:(0,e.jsxs)(g.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative max-h-[90dvh] overflow-y-auto touch-scroll scroll-container scrollbar-none",onClick:a=>a.stopPropagation(),children:[S,(0,e.jsx)("button",{onClick:c,className:"absolute top-4 right-4 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Fechar player",children:(0,e.jsx)(j.X,{className:"w-5 h-5"})}),(0,e.jsxs)("div",{className:"text-center mb-6",children:[(0,e.jsx)("img",{src:a.cover,alt:k("ui.alt.podcast_episode","Capa do epis\xf3dio de podcast sobre sa\xfade ocular")+": "+a.title,className:"w-40 h-40 rounded-2xl mx-auto mb-4 shadow-lg object-cover",width:256,height:256,onError:a=>{try{a.currentTarget.src="/Podcasts/Covers/podcast.png"}catch(a){}}}),(0,e.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:a.title}),a.description&&(0,e.jsx)("p",{className:"text-sm text-gray-600 mb-3 max-w-md mx-auto leading-relaxed",children:a.description}),(0,e.jsxs)("div",{className:"flex items-center justify-center gap-3 text-sm text-gray-500",children:[a.duration&&(0,e.jsx)("span",{children:a.duration}),a.category&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"•"}),(0,e.jsx)("span",{className:"bg-blue-50 text-blue-600 px-2 py-1 rounded-full font-semibold text-xs border border-blue-200",children:a.category})]})]})]}),B?(0,e.jsx)("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg p-3",children:B}):(0,e.jsx)(R,{})]})}):(0,e.jsxs)("div",{className:`bg-white rounded-2xl shadow-soft-light border border-gray-100 ${Q?"p-4":"p-6"} ${d}`,children:[S,"card"===b&&a.cover&&(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("img",{src:a.cover,alt:k("ui.alt.podcast_episode","Capa do epis\xf3dio de podcast sobre sa\xfade ocular")+": "+a.title,className:"w-full aspect-square rounded-xl object-cover shadow-md",loading:"lazy",onError:a=>{try{a.currentTarget.src="/Podcasts/Covers/podcast.png"}catch(a){}}}),(0,e.jsxs)("div",{className:"mt-3",children:[(0,e.jsx)("h4",{className:"font-bold text-gray-900 mb-1 line-clamp-2",children:a.title}),(0,e.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[a.duration&&(0,e.jsx)("span",{children:a.duration}),a.category&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"•"}),(0,e.jsx)("span",{className:"bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full font-semibold border border-blue-200",children:a.category})]})]})]})]}),Q&&(0,e.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,e.jsx)("img",{src:a.cover,alt:k("ui.alt.podcast_episode","Capa do epis\xf3dio de podcast sobre sa\xfade ocular")+": "+a.title,className:"w-16 h-16 rounded-xl object-cover shadow-md flex-shrink-0",loading:"lazy",onError:a=>{try{a.currentTarget.src="/Podcasts/Covers/podcast.png"}catch(a){}}}),(0,e.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,e.jsx)("h4",{className:"font-bold text-gray-900 mb-1 line-clamp-2",children:a.title}),a.description&&(0,e.jsx)("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2 leading-relaxed",children:a.description}),(0,e.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[a.duration&&(0,e.jsx)("span",{children:a.duration}),a.category&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{children:"•"}),(0,e.jsx)("span",{className:"bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full font-semibold border border-blue-200",children:a.category})]})]})]})]}),(0,e.jsx)(R,{})]})};d()}catch(a){d(a)}})}};